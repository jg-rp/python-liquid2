
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Liquid templates for Python.">
      
      
      
        <link rel="canonical" href="https://jg-rp.github.io/python-liquid2/migration/">
      
      
        <link rel="prev" href="../conventions/">
      
      
        <link rel="next" href="../rendering_templates/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.8">
    
    
      
        <title>Migration guide - Python Liquid2</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#migration-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Python Liquid2" class="md-header__button md-logo" aria-label="Python Liquid2" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Python Liquid2
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Migration guide
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/jg-rp/python-liquid2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    jg-rp/python-liquid2
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href=".." class="md-tabs__link">
          
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../rendering_templates/" class="md-tabs__link">
          
  
  User guide

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../tag_reference/" class="md-tabs__link">
          
  
  Tag reference

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../filter_reference/" class="md-tabs__link">
          
  
  Filter reference

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../api/convenience/" class="md-tabs__link">
          
  
  API reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Python Liquid2" class="md-nav__button md-logo" aria-label="Python Liquid2" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Python Liquid2
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jg-rp/python-liquid2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    jg-rp/python-liquid2
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quick_start/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick start
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../syntax/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Liquid Syntax
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../conventions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conventions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Migration guide
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Migration guide
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#approach-to-compatibility-and-stability" class="md-nav__link">
    <span class="md-ellipsis">
      Approach to compatibility and stability
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Approach to compatibility and stability">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-is-render-stability-so-important" class="md-nav__link">
    <span class="md-ellipsis">
      Why is render stability so important?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-features" class="md-nav__link">
    <span class="md-ellipsis">
      New features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="New features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#more-whitespace-control" class="md-nav__link">
    <span class="md-ellipsis">
      More whitespace control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#array-construction-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      Array construction syntax
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#string-interpolation" class="md-nav__link">
    <span class="md-ellipsis">
      String interpolation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-expression-as-filter-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Lambda expression as filter arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logical-not" class="md-nav__link">
    <span class="md-ellipsis">
      Logical not
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ternary-expressions" class="md-nav__link">
    <span class="md-ellipsis">
      Ternary expressions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dedicated-comment-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      Dedicated comment syntax
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#better-string-literal-parsing" class="md-nav__link">
    <span class="md-ellipsis">
      Better string literal parsing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unicode-identifiers" class="md-nav__link">
    <span class="md-ellipsis">
      Unicode identifiers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scientific-notation" class="md-nav__link">
    <span class="md-ellipsis">
      Scientific notation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-argument-delimiters" class="md-nav__link">
    <span class="md-ellipsis">
      Common argument delimiters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shorthand-array-indexes" class="md-nav__link">
    <span class="md-ellipsis">
      Shorthand array indexes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-inheritance" class="md-nav__link">
    <span class="md-ellipsis">
      Template inheritance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#macros" class="md-nav__link">
    <span class="md-ellipsis">
      Macros
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#i18n-and-l10n" class="md-nav__link">
    <span class="md-ellipsis">
      i18n and l10n
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serializable-templates" class="md-nav__link">
    <span class="md-ellipsis">
      Serializable templates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#better-exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      Better exceptions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#features-that-have-been-removed" class="md-nav__link">
    <span class="md-ellipsis">
      Features that have been removed
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-changes" class="md-nav__link">
    <span class="md-ellipsis">
      API changes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-tags" class="md-nav__link">
    <span class="md-ellipsis">
      Custom tags
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Package dependencies
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../rendering_templates/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    User guide
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../tag_reference/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Tag reference
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../filter_reference/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Filter reference
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../api/convenience/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    API reference
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#approach-to-compatibility-and-stability" class="md-nav__link">
    <span class="md-ellipsis">
      Approach to compatibility and stability
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Approach to compatibility and stability">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-is-render-stability-so-important" class="md-nav__link">
    <span class="md-ellipsis">
      Why is render stability so important?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-features" class="md-nav__link">
    <span class="md-ellipsis">
      New features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="New features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#more-whitespace-control" class="md-nav__link">
    <span class="md-ellipsis">
      More whitespace control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#array-construction-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      Array construction syntax
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#string-interpolation" class="md-nav__link">
    <span class="md-ellipsis">
      String interpolation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-expression-as-filter-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Lambda expression as filter arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logical-not" class="md-nav__link">
    <span class="md-ellipsis">
      Logical not
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ternary-expressions" class="md-nav__link">
    <span class="md-ellipsis">
      Ternary expressions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dedicated-comment-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      Dedicated comment syntax
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#better-string-literal-parsing" class="md-nav__link">
    <span class="md-ellipsis">
      Better string literal parsing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unicode-identifiers" class="md-nav__link">
    <span class="md-ellipsis">
      Unicode identifiers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scientific-notation" class="md-nav__link">
    <span class="md-ellipsis">
      Scientific notation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-argument-delimiters" class="md-nav__link">
    <span class="md-ellipsis">
      Common argument delimiters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shorthand-array-indexes" class="md-nav__link">
    <span class="md-ellipsis">
      Shorthand array indexes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-inheritance" class="md-nav__link">
    <span class="md-ellipsis">
      Template inheritance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#macros" class="md-nav__link">
    <span class="md-ellipsis">
      Macros
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#i18n-and-l10n" class="md-nav__link">
    <span class="md-ellipsis">
      i18n and l10n
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serializable-templates" class="md-nav__link">
    <span class="md-ellipsis">
      Serializable templates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#better-exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      Better exceptions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#features-that-have-been-removed" class="md-nav__link">
    <span class="md-ellipsis">
      Features that have been removed
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-changes" class="md-nav__link">
    <span class="md-ellipsis">
      API changes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-tags" class="md-nav__link">
    <span class="md-ellipsis">
      Custom tags
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Package dependencies
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="migration-guide">Migration guide</h1>
<p>When compared to <a href="https://github.com/jg-rp/liquid">Python Liquid</a> and <a href="https://github.com/Shopify/liquid">Shopify/Liquid</a>, Liquid2 adds features, subtly changes the syntax of Liquid templates and changes the template engine's Python API. This is not "Python Liquid version 2", but a Python implementation of "Liquid2", which is mostly backwards compatible with other implementations.</p>
<h2 id="approach-to-compatibility-and-stability">Approach to compatibility and stability</h2>
<p>With <a href="https://github.com/jg-rp/liquid">Python Liquid</a>, our primary objectives are render behavior stability and Shopify/Liquid compatibility, in that order. We also have <code>liquid.future.Environment</code>, which sacrifices some stability for greater Shopify/Liquid compatibility as Shopify/Liquid and our understanding of it changes.</p>
<p>Now, with Python Liquid2, render behavior stability is still the top priority, but the default environment deliberately deviates from Shopify/Liquid in several ways, "fixing" and adding often requested features that Shopify can't due to their large user base and the technical debt that comes with it.</p>
<p>In most cases these fixes and features are backwards compatible with Shopify/Liquid, requiring little or no modification to legacy Liquid templates. To ease transition from legacy templates to Liquid2 templates, we include a <code>liquid2.shopify.Environment</code>, which is configured to include some legacy tags that didn't make it in to the default environment.</p>
<h3 id="why-is-render-stability-so-important">Why is render stability so important?</h3>
<p>When developing a conventional website, for example, templates are developed along side application code. Template authors and application developers might be different people or different teams, but templates are known at deployment time, and all templates can probably be parsed upfront and held in memory. In this scenario it's a pain if your template render engine introduces behavioral changes, but it's manageable.</p>
<p>Python Liquid2 caters for situations where templates change and grow with an application's user base. Not only can templates change after the application is deployed, but the number of templates could be huge, far more than can be expected to fit in memory all at once.</p>
<p>Behavioral stability is essential when application users are responsible for maintaining templates. It is impractical or unreasonable to expect authors to update their templates on demand.</p>
<p>Whether shopify/Liquid compatibility is important to you or not, if you're developing a multi-tenant application where users are responsible for maintaining templates, you should seriously consider building in an opt-in upgrade path for template authors to transition to updated syntax and features.</p>
<h2 id="new-features">New features</h2>
<h3 id="more-whitespace-control">More whitespace control</h3>
<p>(<a href="../whitespace_control/">docs</a>)</p>
<p>Along with a <a href="../api/environment/#liquid2.Environment.default_trim"><code>default_trim</code></a> configuration option, tags and the output statement now support <code>+</code>, <code>-</code> and <code>~</code> for controlling whitespace in templates. By default, <code>~</code> will remove newlines but retain space and tab characters.</p>
<p>Here we use <code>~</code> to remove the newline after the opening <code>for</code> tag, but preserve indentation before <code>&lt;li&gt;</code>.</p>
<div class="language-liquid2 highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>&lt;ul&gt;
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="p">{%</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">..</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="p">~%}</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>  &lt;li&gt;<span class="p">{{</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="p">}}</span>&lt;/li&gt;
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="p">{%</span><span class="w"> </span><span class="kr">endfor</span><span class="w"> </span><span class="p">-%}</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>&lt;/ul&gt;
</span></code></pre></div>
<div class="language-text highlight"><span class="filename">output</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>&lt;ul&gt;
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>  &lt;li&gt;1&lt;/li&gt;
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>  &lt;li&gt;2&lt;/li&gt;
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>  &lt;li&gt;3&lt;/li&gt;
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>  &lt;li&gt;4&lt;/li&gt;
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>&lt;/ul&gt;
</span></code></pre></div>
<h3 id="array-construction-syntax">Array construction syntax</h3>
<p>Filtered expressions (those found in output statements, the <code>assign</code> tag and the <code>echo</code> tag) and <code>for</code> tag expressions support array literal syntax. We don't use the traditional <code>[item1, item2, ...]</code> syntax with square brackets because square brackets are already used for variables (<code>["some variable with spaces"]</code> is a valid variable).</p>
<div class="language-liquid2 highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="p">{%</span><span class="w"> </span><span class="nt">assign</span><span class="w"> </span><span class="na">my_array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;42&#39;</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">-%}</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="p">{%</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">my_array</span><span class="w"> </span><span class="p">-%}</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    - <span class="p">{{</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="p">}}</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="p">{%</span><span class="w"> </span><span class="kr">endfor</span><span class="w"> </span><span class="p">%}</span>
</span></code></pre></div>
<p>or, using a <code>{% liquid %}</code> tag:</p>
<div class="language-liquid2 highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="p">{%</span><span class="w"> </span><span class="nt">liquid</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="kr">for</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;42&#39;</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">        </span><span class="nt">echo</span><span class="w"> </span><span class="s2">&quot;- </span><span class="si">${</span><span class="nx">item</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="kr">endfor</span><span class="w"> </span><span class="p">%}</span>
</span></code></pre></div>
<p>With <code>a</code> set to <code>"Hello"</code> and <code>b</code> set to <code>"World"</code>, both of the examples above produce the following output.</p>
<div class="language-text highlight"><span class="filename">output</span><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>- Hello
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>- World
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>- 42
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>- false
</span></code></pre></div>
<h3 id="string-interpolation">String interpolation</h3>
<p>String literals support interpolation using JavaScript-style <code>${</code> and <code>}</code> delimiters. Liquid template strings don't use backticks like JavaScript. Any single or double quoted string can use <code>${variable_name}</code> placeholders for automatic variable substitution.</p>
<p><code>${</code> can be escaped with <code>\${</code> to prevent variable substitution.</p>
<p>Liquid template strings are effectively a shorthand alternative to <code>capture</code> tags or chains of <code>append</code> filters. These two tags are equivalent.</p>
<div class="language-liquid2 highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="p">{%</span><span class="w"> </span><span class="nt">capture</span><span class="w"> </span><span class="nx">greeting</span><span class="w"> </span><span class="p">%}</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>Hello, <span class="p">{{</span><span class="w"> </span><span class="nx">you</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nf">capitalize</span><span class="w"> </span><span class="p">}}</span>!
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="p">{%</span><span class="w"> </span><span class="nt">endcapture</span><span class="w"> </span><span class="p">%}</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="p">{%</span><span class="w"> </span><span class="nt">assign</span><span class="w"> </span><span class="na">greeting</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Hello, </span><span class="si">${</span><span class="nx">you</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nf">capitalize</span><span class="si">}</span><span class="s1">!&#39;</span><span class="w"> </span><span class="p">%}</span>
</span></code></pre></div>
<h3 id="lambda-expression-as-filter-arguments">Lambda expression as filter arguments</h3>
<p><span class="mdx-badge"><span class="mdx-badge__icon"><a href="../conventions/#version" title="Minimum version"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.41 11.58-9-9A2 2 0 0 0 11 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 .59 1.42l9 9A2 2 0 0 0 13 22a2 2 0 0 0 1.41-.59l7-7A2 2 0 0 0 22 13a2 2 0 0 0-.59-1.42M13 20l-9-9V4h7l9 9M6.5 5A1.5 1.5 0 1 1 5 6.5 1.5 1.5 0 0 1 6.5 5"/></svg></span></a></span><span class="mdx-badge__text">0.3.0</span></span></p>
<p>Many built-in filters that operate on arrays now support lambda expressions. For example, we can use the <a href="../filter_reference/#where"><code>where</code></a> filter to select values according to an arbitrary Boolean expression.</p>
<div class="language-liquid2 highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="p">{%</span><span class="w"> </span><span class="nt">assign</span><span class="w"> </span><span class="na">coding_pages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pages</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nf">where</span><span class="p">:</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">tags</span><span class="w"> </span><span class="ow">contains</span><span class="w"> </span><span class="s1">&#39;coding&#39;</span><span class="w"> </span><span class="p">%}</span>
</span></code></pre></div>
<h3 id="logical-not">Logical <code>not</code></h3>
<p>Logical expressions now support negation with the <code>not</code> operator and grouping terms with parentheses by default. Previously this was an opt-in feature.</p>
<p>In this example, <code>{% if not user %}</code> is equivalent to <code>{% unless user %}</code>, however, <code>not</code> can also be used after <code>and</code> and <code>or</code>, like <code>{% if user.active and not user.title %}</code>, potentially saving nested <code>if</code> and <code>unless</code> tags.</p>
<div class="language-liquid2 highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="kc">not</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="p">%}</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>  please log in
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="p">{%</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="p">%}</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>  hello user
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>
</span></code></pre></div>
<h3 id="ternary-expressions">Ternary expressions</h3>
<p>Inline conditional expression are now supported by default. Previously this was an opt-in feature. If omitted, the <code>else</code> branch defaults to an instance of <code>Undefined</code>.</p>
<div class="language-liquid2 highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="p">{{</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="kc">if</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="kc">else</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="p">}}</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="p">{{</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nf">upcase</span><span class="w"> </span><span class="kc">if</span><span class="w"> </span><span class="na">b</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;foo&#39;</span><span class="w"> </span><span class="kc">else</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nf">split</span><span class="w"> </span><span class="p">}}</span>
</span></code></pre></div>
<h3 id="dedicated-comment-syntax">Dedicated comment syntax</h3>
<p>Comments surrounded by <code>{#</code> and <code>#}</code> are enabled by default. Additional <code>#</code>'s can be added to comment out blocks of markup that already contain comments, as long as hashes are balanced.</p>
<div class="language-liquid2 highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p">{##</span><span class="c"> comment this out for now</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="c">{% for x in y %}</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="c">    {# x could be empty #}</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="c">    {{ x | default: TODO}}</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="c">{% endfor %}</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="p">##}</span>
</span></code></pre></div>
<h3 id="better-string-literal-parsing">Better string literal parsing</h3>
<p>String literals are now allowed to contain markup delimiters (<code>{{</code>, <code>}}</code>, <code>{%</code>, <code>%}</code>, <code>{#</code> and <code>#}</code>) and support c-like escape sequence to allow for including quote characters, literal newline characters and <code>\uXXXX</code> Unicode code points.</p>
<div class="language-liquid2 highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="p">{%</span><span class="w"> </span><span class="nt">assign</span><span class="w"> </span><span class="na">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Hi </span><span class="se">\u</span><span class="s2">D83D</span><span class="se">\u</span><span class="s2">DE00!&quot;</span><span class="w"> </span><span class="p">%}</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="p">{{</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="p">}}</span>
</span></code></pre></div>
<div class="language-text highlight"><span class="filename">output</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>Hi 😀!
</span></code></pre></div>
<h3 id="unicode-identifiers">Unicode identifiers</h3>
<p>Identifiers and paths resolving to variables can contain Unicode characters (templates are assumed to be UTF-8 encoded). For example:</p>
<div class="language-liquid2 highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="p">{%</span><span class="w"> </span><span class="nt">assign</span><span class="w"> </span><span class="err">😀</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;smiley&#39;</span><span class="w"> </span><span class="p">%}</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="p">{{</span><span class="w"> </span><span class="err">😀</span><span class="w"> </span><span class="p">}}</span>
</span></code></pre></div>
<h3 id="scientific-notation">Scientific notation</h3>
<p>Integer and float literals can use scientific notation, like <code>1.2e3</code> or <code>1e-2</code>.</p>
<h3 id="common-argument-delimiters">Common argument delimiters</h3>
<p>Filter and tag named arguments can be separated by a <code>:</code> or <code>=</code>. Previously only <code>:</code> was allowed.</p>
<h3 id="shorthand-array-indexes">Shorthand array indexes</h3>
<p>Optionally allow shorthand dotted notation for array indexes in paths to variables. When the <code>Environment</code> class variable <code>shorthand_indexes</code> is set to <code>True</code> (default is <code>False</code>), <code>{{ foo.0.bar }}</code> is equivalent to <code>{{ foo[0].bar }}</code>.</p>
<h3 id="template-inheritance">Template inheritance</h3>
<p>(<a href="../tag_reference/#extends">docs</a>)</p>
<p>Template inheritance is now built in. Previously <a href="../tag_reference/#extends"><code>{% extends %}</code></a> and <a href="../tag_reference/#block"><code>{% block %}</code></a> tags were available from a separate package.</p>
<h3 id="macros">Macros</h3>
<p><a href="../tag_reference/#macro-and-call"><code>macro and call</code></a> tags are enabled by default.</p>
<h3 id="i18n-and-l10n">i18n and l10n</h3>
<p>(<a href="../babel/">docs</a>)</p>
<p>Internationalization and localization tags and filters are now built in and enabled by default. Previously these were in a separate package.</p>
<p>See <a href="../filter_reference/#currency">currency</a>, <a href="../filter_reference/#datetime">datetime</a>, <a href="../filter_reference/#money">money</a>, <a href="../filter_reference/#decimal">decimal</a>, <a href="../filter_reference/#unit">unit</a>, <a href="../filter_reference/#gettext">gettext</a>, <a href="../filter_reference/#t">t</a> and <a href="../tag_reference/#translate">translate</a>.</p>
<h3 id="serializable-templates">Serializable templates</h3>
<p>Instances of <code>Template</code> are now serializable. Use <code>str(template)</code> or <code>pickle.dump(template)</code>.</p>
<h3 id="better-exceptions">Better exceptions</h3>
<p>(<a href="../api/exceptions/">docs</a>)</p>
<p>Error messages have been improved and exceptions inheriting from <code>LiquidError</code> expose line and column numbers, and have <code>detailed_message()</code> and error <code>context()</code> methods.</p>
<div class="language-liquid2 highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="p">{%</span><span class="w"> </span><span class="nt">assign</span><span class="w"> </span><span class="na">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">..</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">%}</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="p">{%</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="nx">foo</span><span class="w"> </span><span class="p">%}</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>    <span class="p">{{</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="p">}}</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="p">{%</span><span class="w"> </span><span class="kr">endfor</span><span class="w"> </span><span class="p">%}</span>
</span></code></pre></div>
<div class="language-text highlight"><span class="filename">error message</span><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>liquid2.exceptions.LiquidSyntaxError: expected IN, found WORD
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>  -&gt; &#39;{% for x foo %}&#39; 2:9
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>  |
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>2 | {% for x foo %}
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>  |          ^^^ expected IN, found WORD
</span></code></pre></div>
<h2 id="features-that-have-been-removed">Features that have been removed</h2>
<ul>
<li>We no longer offer "lax" or "warn" modes, previously controlled by the <code>tolerance</code> argument to <code>Environment</code>. A dedicated fault tolerant parser suitable for use with code editors is in progress.</li>
<li>It's not currently possible to change Liquid markup delimiters (<code>{{</code>, <code>}}</code>, <code>{%</code> and <code>%}</code>).</li>
<li>Async filters have not been implemented, but can be if there is a demand.</li>
<li>Contextual template analysis has not been implemented, but can be if there is a demand.</li>
<li>Template tag analysis (analyzing tokens instead of a syntax tree) has not been implemented, but can be if there is a demand.</li>
<li>Liquid Babel used to allow simple, zero-argument filters in the arguments to the <code>translate</code> tag. The <code>translate</code> tag bundled in to Liquid2 does not allow the use of filters here.</li>
<li>There's no Django template backend or Flask extension for Python Liquid2. Open an issue if these are things that would be useful to you.</li>
<li>The <a href="https://github.com/jg-rp/liquid-jsonpath">Liquid JSONPath</a> project has not yet been ported to Python Liquid2. Open an issue if you'd like to see JSONPath syntax added to Liquid2.</li>
</ul>
<h2 id="api-changes">API changes</h2>
<p>These are the most notable changes. Please open an <a href="https://github.com/jg-rp/python-liquid2/issues">issue</a> or start a discussion if I've missed anything or you need help with migration.</p>
<ul>
<li>Package level <code>Template</code> can no longer be used as a convenience function for creating a template from a string. Use <a href="../api/convenience/#liquid2.parse"><code>parse()</code></a>, <a href="../api/convenience/#liquid2.render"><code>render()</code></a> or <a href="../api/environment/#liquid2.Environment.from_string"><code>DEFAULT_ENVIRONMENT.from_string()</code></a> instead.</li>
<li><code>StrictUndefined</code> now plays nicely with the <code>default</code> filter. Previously we had a separate <code>StrictDefaultUndefined</code> class.</li>
<li><a href="../api/loaders/#liquid2.FileSystemLoader"><code>FileSystemLoader</code></a> now takes an optional default file extension to use when looking for files that don't already have an extension. Previously there was a separate <code>FileExtensionLoader</code>.</li>
<li><code>AwareBoundTemplate</code> (a template with a built-in <code>template</code> drop) has been removed, but can be added as a feature later if there is a demand.</li>
<li>The <code>auto_reload</code> and <code>cache_size</code> arguments to <code>Environment</code> have been removed. Now caching is handle by template loaders, not the environment. For example, pass a <a href="../api/loaders/#liquid2.CachingFileSystemLoader"><code>CachingFileSystemLoader</code></a> as the <code>loader</code> argument to <code>Environment</code> instead of a <code>FileSystemLoader</code>.</li>
<li>The <code>strict_filters</code> argument to <code>Environment</code> has been removed. Unknown filters now always raise an <code>UnknownFilterError</code>.</li>
<li><code>TemplateNotFound</code> has been renamed to <code>TemplateNotFoundError</code>.</li>
<li><code>Context</code> has been renamed to <a href="../api/render_context/"><code>RenderContext</code></a> and now takes a mandatory <code>template</code> argument instead of <code>env</code>. All other arguments to <code>RenderContext</code> are now keyword only.</li>
<li><code>FilterValueError</code> and <code>FilterArgumentError</code> have been removed. <code>LiquidValueError</code> and <code>LiquidTypeError</code> should be used instead. In some cases where <code>FilterValueError</code> was deliberately ignored before, <code>LiquidValueError</code> is now raised.</li>
<li>The exception <code>NoSuchFilterFunc</code>, raised when rendering a template that uses a filter that is not defined in <code>Environment.filters</code>, has been renamed to <code>UnknownFilterError</code>.</li>
<li>The <code>@liquid_filter</code> decorator has been removed. Now filter implementations are expected to raise a <code>LiquidTypeError</code> in the event of an argument with an unacceptable type.</li>
<li><a href="../api/environment/#liquid2.Environment.tags"><code>Environment.tags</code></a> is now a mapping of tag names to <code>Tag</code> instances. It used to be a mapping of names to <code>Tag</code> classes.</li>
</ul>
<h3 id="custom-tags">Custom tags</h3>
<p>(<a href="../custom_tags/">docs</a>)</p>
<p>The lexer has been completely rewritten and the tokens it produces bear little resemblance to those produced by any of the several parsing functions from Python Liquid. Now we have a single lexer that scans source text content, tags, statements and expressions in a single pass, and a parser that delegates the parsing of those tokens to classes implementing <code>Tag</code>.</p>
<p>These changes were necessary to support "proper" string literals with escaping, Unicode support and interpolation.</p>
<p>As before, <code>Tag</code> instances are responsible for returning <code>Node</code>s from <code>Tag.parse()</code>. And nodes still have the familiar <code>render_to_output()</code> abstract method.</p>
<p>As a result of these changes, custom tags are now limited to using tokens recognized by the lexer. Previously, custom tags would be passed their expression as a string to be parsed however you see fit, now tags are passed a sequence of tokens.</p>
<p>For now I recommend familiarizing yourself with the different <a class="autorefs autorefs-internal" title="liquid2.token.TokenT


  
      dataclass
  " href="../api/tokens/#liquid2.token.TokenT">tokens</a> generated by the lexer and have a look at the <a href="../custom_tags/">custom tags docs</a>. Note that the <a href="../api/tokens/#liquid2.TokenStream"><code>TokenStream</code></a> interface has changed too.</p>
<p>As always, open an <a href="https://github.com/jg-rp/python-liquid2/issues">issue</a> or start a discussion if you need any help with migration.</p>
<h2 id="package-dependencies">Package dependencies</h2>
<p>The following packages are dependencies of Python Liquid2.</p>
<ul>
<li>Markupsafe&gt;=3</li>
<li>Babel&gt;=2</li>
<li>python-dateutil</li>
<li>pytz</li>
<li>typing-extensions</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "navigation.top", "navigation.sections", "navigation.tabs", "navigation.prune"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>