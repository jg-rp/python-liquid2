{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Python Liquid2","text":"<p>Liquid is a template language, where source text (the template) contains placeholders for variables, conditional expressions for including or excluding blocks of text, and loops for repeating blocks of text. Plus other syntax for manipulating variables and combining multiple templates into a single output.</p> <p>Python Liquid2 is a flexible, non-evaluating Liquid template engine. We cater for situations where templates change and grow with an application's user base, and the authors of those templates are potentially untrusted.</p>"},{"location":"#features","title":"Features","text":"<ul> <li> <p>Flexible: Add to, remove or replace built-in tags and filters to suite your needs. Also choose from several built-in template loaders or define your own custom template loader.</p> </li> <li> <p>Asynchronous: For situations where you have too many templates to fit in memory or those templates change frequently, they can be loaded asynchronously from file systems, databases or over a network. Similarly, template data can be fetch lazily at render time, also asynchronously.</p> </li> <li> <p>Template inheritance: Python Liquid2 has built-in template inheritance features. As well and including or rendering a partial template, you can extend parent templates by defining template blocks.</p> </li> <li> <p>Static analysis: Python Liquid2 exposes a syntax tree for each template and built-in tools for analyzing tag, filter and variable usage. You can also extract comment text and have the option of loading and analyzing included/rendered/extended templates too.</p> </li> <li> <p>Internationalization and localization: Templates have built-in support for translator comments and extracting message catalogs, plus filters for formatting currency, dates, times and numbers for international users.</p> </li> <li> <p>Compatible: Python Liquid2 mostly is backwards compatible with Shopify/Liquid, the original authors of the Liquid template language.</p> </li> </ul>"},{"location":"#get-started","title":"Get started","text":"<p>Have a look at the quick start guide and browse through the built-in tags and filters.</p> <p>If you're coming from Python Liquid, check out the migration guide.</p>"},{"location":"babel/","title":"Internationalization and localization","text":"<p>This page covers i18n and l10n filter and tag configuration, and how we support translations and translation message catalogs. See the filter reference and tag reference for usage examples.</p>"},{"location":"babel/#currency","title":"Currency","text":"<p>The <code>currency</code> filter returns the input number formatted as currency for the current locale. For usage examples see <code>currency</code> in the filter reference.</p>"},{"location":"babel/#options","title":"Options","text":"<p><code>currency</code> defaults to looking for a locale in a render context variable called <code>locale</code>, and a currency code in a render context variable called <code>currency_code</code>. It outputs in the locale's standard format and falls back to <code>en_US</code> and <code>USD</code> if those context variables don't exist.</p> <pre><code>from liquid2 import parse\n\ntemplate = parse(\"{{ 100457.99 | currency }}\")\n\nprint(template.render())\nprint(template.render(currency_code=\"GBP\"))\nprint(template.render(locale=\"de\", currency_code=\"CAD\"))\n</code></pre> output<pre><code>$100,457.99\n\u00a3100,457.99\n100.457,99\u00a0CA$\n</code></pre> <p>To configure <code>currency</code>, register a new instance of <code>Currency</code> with an <code>Environment</code>, then render your templates from that. See the API reference for details of all arguments accepted by <code>Currency</code>.</p> <pre><code>from liquid2.builtin import Currency\nfrom liquid2 import Environment\n\nenv = Environment()\nenv.filters[\"currency\"] = Currency(default_locale=\"de\")\n</code></pre>"},{"location":"babel/#money","title":"Money","text":"<p>For convenience, some \"money\" filters are defined that mimic Shopify's money filter behavior. These are instances of <code>Currency()</code> with specific default formats. All other currency options are set to their defaults.</p> <pre><code>from liquid2 import parse\n\ntemplate = parse(\"\"\"\\\n{% assign amount = 10 %}\n{{ amount | money }}\n{{ amount | money_with_currency }}\n{{ amount | money_without_currency }}\n{{ amount | money_without_trailing_zeros }}\"\"\")\n\nprint(template.render(currency_code=\"CAD\", locale=\"en_CA\"))\n</code></pre> output<pre><code>$10.00\n$10.00 CAD\n10.00\n$10\n</code></pre>"},{"location":"babel/#datetime","title":"DateTime","text":"<p>The <code>datetime</code> filter returns the input datetime formatted for the current locale. For usage examples see <code>datetime</code> in the filter reference.</p>"},{"location":"babel/#options_1","title":"Options","text":"<p><code>datetime</code> defaults to looking for a timezone in a render context variable called <code>timezone</code>, a locale in a render context variable called <code>locale</code> and a datetime format in a render context variable called <code>datetime_format</code>.</p> <pre><code>from liquid2 import parse\n\ntemplate = parse(\"{{ 'Apr 1, 2007, 3:30:00 PM' | datetime }}\")\n\nprint(template.render())\nprint(template.render(locale=\"de\", datetime_format=\"long\"))\nprint(template.render(locale=\"de\", timezone=\"CET\", datetime_format=\"short\"))\n</code></pre> output<pre><code>Apr 1, 2007, 3:30:00 PM\n1. April 2007 um 15:30:00 UTC\n01.04.07, 17:30\n</code></pre> <p>To configure <code>datetime</code>, register a new instance of <code>DateTime</code> with an <code>Environment</code>, then render your templates from that. See the API reference for details of all arguments accepted by <code>DateTime</code>.</p> <pre><code>from liquid2.builtin import DateTime\nfrom liquid2 import Environment\n\nenv = Environment()\nenv.filters[\"datetime\"] = DateTime(timezone_var=\"tz\")\n</code></pre>"},{"location":"babel/#decimal","title":"Decimal","text":"<p>The <code>decimal</code> filter returns the input number formatted as a decimal for the current locale. For usage examples see <code>decimal</code> in the filter reference.</p>"},{"location":"babel/#options_2","title":"Options","text":"<p><code>decimal</code> defaults to looking for a locale in a render context variable called <code>locale</code>. It uses the locale's standard format and falls back to <code>en_US</code> if that variable does not exist.</p> <pre><code>from liquid2 import parse\n\n# Parse a number from a string in the default (en_US) input locale.\ntemplate = parse(\"\"\"\\\n{{ '10,000.23' | decimal }}\n{{ '10,000.23' | decimal: group_separator: false }}\n\"\"\")\n\nprint(template.render(locale=\"de\"))\nprint(template.render(locale=\"en_GB\"))\n</code></pre> output<pre><code>10.000,23\n10000,23\n\n10,000.23\n10000.23\n</code></pre> <p>To configure <code>decimal</code>, register a new instance of <code>Number</code> with an <code>Environment</code>, then render your templates from that.</p> <pre><code>from liquid2.builtin import Number\nfrom liquid2 import Environment\n\nenv = Environment()\nenv.filters[\"decimal\"] = Number(default_locale=\"en_GB\")\n</code></pre>"},{"location":"babel/#unit","title":"Unit","text":"<p>The <code>unit</code> filter returns he input number formatted with the given units according to the current locale. For usage examples see <code>unit</code> in the filter reference.</p>"},{"location":"babel/#options_3","title":"Options","text":"<p><code>unit</code> defaults to looking for a locale in a render context variable called <code>locale</code>, a length in a render context variable called <code>unit_length</code>, and a decimal format in a render context variable called <code>unit_format</code>.</p> <pre><code>from liquid2 import parse\n\ntemplate = parse(\"\"\"\\\n{{ 12 | unit: 'length-meter', format: '#,##0.00' }}\n{{ 150 | unit: 'kilowatt', denominator_unit: 'hour' }}\n\"\"\")\n\nprint(template.render(unit_length=\"long\"))\nprint(template.render(locale=\"de\", unit_length=\"long\"))\n</code></pre> output<pre><code>12.00 meters\n150 kilowatts per hour\n\n12,00 Meter\n150 Kilowatt pro Stunde\n</code></pre> <p>To configure <code>unit</code>, register a new instance of <code>Unit</code> with an <code>Environment</code>, then render your templates from that.</p> <pre><code>from liquid2.builtin import Unit\nfrom liquid2 import Environment\n\nenv = Environment()\nenv.filters[\"unit\"] = Unit(locale_var=\"_locale\")\n</code></pre>"},{"location":"babel/#translations","title":"Translations","text":"<p>Liquid Babel includes <code>gettext</code>, <code>ngettext</code>, <code>pgettext</code> and <code>npgettext</code> filter equivalents to the functions found in Python's gettext module. Application developers can choose to use any of these filters, possibly using more user friendly filter names, and/or the more general <code>t (translate)</code> filter.</p> <p>The <code>t</code> filter can behave like any of the *gettext filters, depending on the arguments it is given. Where the *gettext filters require positional arguments for <code>context</code>, <code>count</code> and <code>plural</code>, <code>t</code> reserves optional <code>count</code> and <code>plural</code> keyword arguments.</p> <p>Liquid Babel also offers a <code>{% translate %}</code> tag. This is similar to the <code>{% trans %}</code> tag found in Jinja or the <code>{% blocktranslate %}</code> tag found in Django's template language. Again, application developers can configure and customize the included <code>translate</code> tag to suit an application's needs.</p>"},{"location":"babel/#filters","title":"Filters","text":"<p><code>gettext</code>, <code>ngettext</code>, <code>npgettext</code>, <code>pgettext</code> and <code>t</code> filters all default to looking for translations in a render context variable called <code>translations</code>, falling back to an instance of <code>NullTranslations</code> if <code>translations</code> can not be resolved.</p> <pre><code>from liquid2 import parse\n\n# You'll need to load an appropriate Translations object.\n# `get_translations()` is defined elsewhere.\ntranslations = get_translations(locale=\"de\")\n\ntemplate = parse(\"{{ 'Hello, World!' | t }}\")\nprint(template.render(translations=translations))  # Hallo Welt!\n</code></pre> <p>To configure <code>gettext</code>, <code>ngettext</code>, <code>npgettext</code>, <code>pgettext</code> or <code>t</code>, register a new instance of <code>GetText</code>, <code>NGetText</code>, <code>NPGetText</code>, <code>PGetText</code> or <code>Translate</code> with an <code>Environment</code>, then render your templates from that. All of these classes inherit from <code>BaseTranslateFilter</code> and accept the same constructor arguments.</p>"},{"location":"babel/#message-catalogs","title":"Message catalogs","text":"<p>By default, all translation filters and tags will look for a render context variable called <code>translations</code>, which must be an object implementing the <code>Translations</code> protocol. It is the application developer's responsibility to provide a <code>Translations</code> object, being the interface between Liquid and a message catalog.</p> <p>The <code>Translations</code> protocol is defined as follows. It is simply a subset of the <code>NullTranslations</code> class found in the gettext module.</p> <pre><code>class Translations(Protocol):\n    def gettext(self, message: str) -&gt; str:\n        ...\n\n    def ngettext(self, singular: str, plural: str, n: int) -&gt; str:\n        ...\n\n    def pgettext(self, context: str, message: str) -&gt; str:\n        ...\n\n    def npgettext(self, context: str, singular: str, plural: str, n: int) -&gt; str:\n        ...\n</code></pre> <p>It could be a <code>GNUTranslations</code> instance, a Babel <code>Translations</code> instance, or any object implementing <code>gettext</code>, <code>ngettext</code>, <code>pgettext</code> and <code>npgettext</code> methods.</p>"},{"location":"babel/#message-variables","title":"Message variables","text":"<p>Translatable message text can contain placeholders for variables. When using variables in strings to be translated by filters, variables are defined using percent-style formatting. Only the <code>s</code> modifier is supported and every variable must have a name. In this example <code>you</code> is the variable name.</p> <pre><code>{{ \"Hello, %(you)s!\" | t }}\n</code></pre> <p>Filter keyword arguments are merged with the current render context before being used to replace variables in message text. All variables are converted to their string representation before substitution. Dotted property/attribute access is not supported inside message variables.</p> <pre><code>{{ \"Hello, %(you)s!\" | t: you: user.name }}\n</code></pre> <p>The <code>translate</code> block tag recognizes simplified Liquid output statements as translation message variables. These variables must be valid identifiers without dotted or bracketed property/attribute access, and no filters.</p> <pre><code>{% translate %}\n    Hello, {{ you }}!\n{% endtranslate %}\n</code></pre> <p>Keyword arguments passed to the <code>translate</code> tag will be merged with the current render context before being used to replace variables in message text.</p> <pre><code>{% translate you: user.name, count: users.size %}\n    Hello, {{ you }}!\n{% plural %}\n    Hello, {{ you }}s!\n{% endtranslate %}\n</code></pre>"},{"location":"babel/#message-extraction","title":"Message Extraction","text":"<p>Use the <code>extract_from_templates()</code> function to build a message catalog from one or more templates. You are then free to make use of Babel's PO file features, or convert the catalog to a more convenient internal representation.</p> <pre><code>import io\n\nfrom babel.messages.pofile import write_po\n\nfrom liquid2 import parse\nfrom liquid2.messages import extract_from_templates\n\nsource = \"\"\"\n{% # Translators: some comment %}\n{{ 'Hello, World!' | t }}\n{% comment %}Translators: other comment{% endcomment %}\n{% translate count: 2 %}\n    Hello, {{ you }}!\n{% plural %}\n    Hello, all!\n{% endtranslate %}\n\"\"\"\n\ntemplate = parse(source, name=\"something.liquid\")\ncatalog = extract_from_templates(template)\n\nbuf = io.BytesIO()\nwrite_po(buf, catalog, omit_header=True)\nprint(buf.getvalue().decode(\"utf-8\"))\n</code></pre> output<pre><code>#. Translators: some comment\n#: something.liquid:3\nmsgid \"Hello, World!\"\nmsgstr \"\"\n\n#. Translators: other comment\n#: something.liquid:5\n#, python-format\nmsgid \"Hello, %(you)s!\"\nmsgid_plural \"Hello, all!\"\nmsgstr[0] \"\"\nmsgstr[1] \"\"\n</code></pre>"},{"location":"babel/#translator-comments","title":"Translator Comments","text":"<p>When a Liquid comment tag immediately precedes a translatable filter or tag, and the comment starts with a string in <code>comment_tags</code>, that comment will be included as a translator comment with the message. Use the <code>comment_tags</code> argument to <code>extract_liquid()</code>, or <code>extract_from_templates()</code> to change translator comment prefixes. The default is <code>[\"Translators:\"]</code>.</p> <pre><code>from liquid2 import parse\nfrom liquid2.messages import extract_from_templates\n\nsource = \"\"\"\n{% # Translators: some comment %}\n{{ 'Hello, World!' | t }}\n{% comment %}Translators: other comment{% endcomment %}\n{% translate count: 2 %}\n    Hello, {{ you }}!\n{% plural %}\n    Hello, all!\n{% endtranslate %}\n\"\"\"\n\ntemplate = parse(source, name=\"something.liquid\")\ncatalog = extract_from_templates(template, strip_comment_tags=True)\n\nmessage = catalog.get(\"Hello, World!\")\nprint(message.auto_comments[0])  # some comment\n</code></pre>"},{"location":"conventions/","title":"Conventions","text":"<p>Throughout this documentation we use icons to indicate if a feature is experimental, compatible with shopify and what version it was introduced.</p>"},{"location":"conventions/#version","title":"\u2013 Version","text":"<p>Shows the minimum version of Liquid2 that is required to use a feature.</p>"},{"location":"conventions/#shopify","title":"\u2013 Shopify/Liquid compatible","text":"<p>Indicates that the feature or example code is compatible with Shopify/Liquid.</p>"},{"location":"conventions/#liquid2","title":"\u2013 New to Liquid2","text":"<p>Indicates that the feature or example code is new to Liquid2 and not compatible with Shopify/Liquid.</p>"},{"location":"conventions/#compatibility","title":"\u2013 Compatibility warning","text":"<p>Indicates that the example code is not 100% compatible with Shopify/Liquid.</p>"},{"location":"custom_filters/","title":"Custom filters","text":"<p>Filters are usually implemented as simple Python functions. When rendered, Liquid will find the function in <code>Environment.filters</code>, then call it, passing the input value as the first argument, followed by positional and keyword arguments given by the template author. The function's return value then becomes the result of the filtered expression.</p> <p>Filters can actually be any Python callable. Implementing a filter as a class with a <code>__call__</code> method or as a closure can be useful if you want to configure the filter before registering it with an <code>Environment</code>.</p> <p>Also see the filter helpers API documentation.</p> <p>Tip</p> <p>See liquid2/builtin/filters for lots of examples.</p>"},{"location":"custom_filters/#add-a-filter","title":"Add a filter","text":"<p>To add a filter, add an item to <code>Environment.filters</code>. It's a regular dictionary mapping filter names to callables.</p> <p>In this example we add <code>ends_with</code>, a filter that delegates to Python's <code>str.endswith</code>. The <code>@string_filter</code> decorator coerces the input value to a string, if it is not one already.</p> <pre><code>from liquid2 import Environment\nfrom liquid2.filter import string_filter\n\n\n@string_filter\ndef ends_with(left: str, val: str) -&gt; bool:\n    return left.endswith(val)\n\n\nenv = Environment()\nenv.filters[\"ends_with\"] = ends_with\n\nsource = \"\"\"\\\n{% assign foo = \"foobar\" | ends_with: \"bar\" %}\n{% if foo %}\n    do something\n{% endif %}\"\"\"\n\ntemplate = env.from_string(source)\nprint(template.render())\n</code></pre>"},{"location":"custom_filters/#with-context","title":"With context","text":"<p>Sometimes a filter will need access to the current render context. Use the <code>@with_context</code> decorator to have an instance of <code>RenderContext</code> passed to your filter callable as a keyword argument named <code>context</code>.</p> <p>Here we use the render context to resolve a variable called \"handle\".</p> <pre><code>from liquid2 import Environment\nfrom liquid2.filter import string_filter\nfrom liquid2.filter import with_context\n\n\n@string_filter\n@with_context\ndef link_to_tag(label, tag, *, context):\n    handle = context.resolve(\"handle\", default=\"\")\n    return (\n        f'&lt;a title=\"Show tag {tag}\" href=\"/collections/{handle}/{tag}\"&gt;{label}&lt;/a&gt;'\n    )\n\nclass MyEnvironment(Environment):\n    def register_tags_and_filters(self):\n        super().register_tags_and_filters()\n        self.filters[\"link_to_tag\"] = link_to_tag\n\nenv = MyEnvironment()\n# ...\n</code></pre>"},{"location":"custom_filters/#with-environment","title":"With environment","text":"<p>Use the <code>@with_environment</code> decorator to have the current <code>Environment</code> passed to your filter callable as a keyword argument named <code>environment</code>.</p> <pre><code>import re\n\nfrom markupsafe import Markup\nfrom markupsafe import escape as markupsafe_escape\n\nfrom liquid2 import Environment\nfrom liquid2.filter import string_filter\nfrom liquid2.filter import with_environment\n\nRE_LINETERM = re.compile(r\"\\r?\\n\")\n\n\n@with_environment\n@string_filter\ndef strip_newlines(val: str, *, environment: Environment) -&gt; str:\n    if environment.auto_escape:\n        val = markupsafe_escape(val)\n        return Markup(RE_LINETERM.sub(\"\", val))\n    return RE_LINETERM.sub(\"\", val)\n\n# ...\n</code></pre>"},{"location":"custom_filters/#replace-a-filter","title":"Replace a filter","text":"<p>To replace a default filter implementation with your own, simply update the <code>filters</code> dictionary on your environment.</p> <p>Here we replace the default <code>slice</code> filter with one which uses start and stop values instead of start and length, and is a bit more forgiving in terms of allowed inputs.</p> <pre><code>from liquid2 import Environment\nfrom liquid2.filter import int_arg\nfrom liquid2.filter import sequence_filter\n\n@sequence_filter\ndef myslice(val, start, stop=None):\n    start = int_arg(start)\n\n    if stop is None:\n        return val[start]\n\n    stop = int_arg(stop)\n    return val[start:stop]\n\n\nenv = Environment()\nenv.filters[\"slice\"] = myslice\n# ...\n</code></pre>"},{"location":"custom_filters/#remove-a-filter","title":"Remove a filter","text":"<p>Remove a built-in filter by deleting it from your environment's <code>filters</code> dictionary.</p> <pre><code>from liquid import Environment\n\nenv = Environment()\ndel env.filters[\"safe\"]\n\n# ...\n</code></pre> <p>Tip</p> <p>You can add, remove and replace filters on <code>liquid2.DEFAULT_ENVIRONMENT</code> too. Convenience functions <code>parse()</code> and <code>render()</code> use <code>DEFAULT_ENVIRONMENT</code></p>"},{"location":"custom_tags/","title":"Custom tags","text":"<p>A Liquid tag is defined by a class extending <code>Tag</code>. It has just one abstract method, <code>parse()</code>, which takes an instance of <code>TokenStream</code> and returns a <code>Node</code>. The returned node will be added to a template's abstract syntax tree and, when rendered, its <code>render_to_output()</code> method will be called.</p> <p><code>render_to_output()</code> receives the active render context and an output buffer. It is responsible for either updating the render context or writing to the buffer, or both.</p> <p>Tip</p> <p>See liquid2/builtin/tags for lots of examples.</p>"},{"location":"custom_tags/#add-a-tag","title":"Add a tag","text":"<p>To add a tag, add an item to <code>Environment.tags</code>. It's a regular dictionary mapping tag names to instances of <code>Tag</code>.</p> <p>This example implements the <code>with</code> tag, which allows template authors to define block scoped variables. <code>{% with %}</code> is a block tag. It has a start tag, an end tag (<code>{% endwith %}</code>), and Liquid markup in between. We should ensure that we leave the closing tag token on the stream.</p>"},{"location":"custom_tags/#the-tag","title":"The tag","text":"with_tag.py<pre><code>from liquid2 import BlockNode\nfrom liquid2 import Node\nfrom liquid2 import Tag\nfrom liquid2 import TokenStream\nfrom liquid2.builtin import parse_keyword_arguments\n\nfrom .with_node import WithNode\n\nclass WithTag(Tag):\n\n    def parse(self, stream: TokenStream) -&gt; Node:\n        token = stream.next()\n        assert isinstance(token, TagToken)\n\n        tokens = TokenStream(token.expression)\n        args = parse_keyword_arguments(tokens)\n        block = BlockNode(\n            stream.current(), self.env.parser.parse_block(stream, (\"endwith\",))\n        )\n\n        stream.expect_tag(\"endwith\")\n        end_tag_token = stream.current()\n        assert isinstance(end_tag_token, TagToken)\n\n        return WithNode(token, args, block, end_tag_token)\n</code></pre> <p>The next token in the stream should always be an instance of <code>TagToken</code>, describing the tag we're parsing. We use <code>assert</code> to confirm this and please Python's static type checker.</p> <p><code>TagToken</code> has an <code>expression</code> property, being a list of tokens representing the tag's expression. In this case we expect the expression to be an argument list, so we use the built-in <code>parse_keyword_arguments()</code> parse the expression tokens for us.</p> <p>Next we need to parse the tag's block using <code>self.env.parser.parse_block()</code>. We pass it the token stream and tell it the name of the tag that will close the block. You'll notice that all tags have access to the current <code>Environment</code> and all nodes must have an associated token. Those tokens are used to generate rich, informative error messages.</p> <p>We pass the \"end\" token to <code>WithNode</code> for the benefit of Template serialization. If you're not interested in serializing a parsed template back to a string, there's no need to store <code>end_tag_token</code>.</p>"},{"location":"custom_tags/#the-node","title":"The node","text":"with_node.py<pre><code>from __future__ import annotations\n\nfrom typing import TYPE_CHECKING\nfrom typing import Iterable\nfrom typing import TextIO\n\nfrom liquid2 import BlockNode\nfrom liquid2 import Node\nfrom liquid2 import TagToken\nfrom liquid2.builtin import Identifier\n\nif TYPE_CHECKING:\n    from liquid2 import Expression\n    from liquid2 import RenderContext\n    from liquid2 import TokenT\n    from liquid2.builtin import KeywordArgument\n\nclass WithNode(Node):\n\n    def __init__(\n        self,\n        token: TokenT,\n        args: list[KeywordArgument],\n        block: BlockNode,\n        end_tag_token: TagToken,\n    ):\n        super().__init__(token)\n        self.args = args\n        self.block = block\n        self.end_tag_token = end_tag_token\n        self.blank = self.block.blank\n\n    def __str__(self) -&gt; str:\n        assert isinstance(self.token, TagToken)\n        args = \" \" + \", \".join(str(p) for p in self.args) if self.args else \"\"\n        return (\n            f\"{{%{self.token.wc[0]} with{args} {self.token.wc[1]}%}}\"\n            f\"{self.block}\"\n            f\"{{%{self.end_tag_token.wc[0]} endwith {self.end_tag_token.wc[1]}%}}\"\n        )\n\n    def render_to_output(self, context: RenderContext, buffer: TextIO) -&gt; int:\n        \"\"\"Render the node to the output buffer.\"\"\"\n        namespace = dict(arg.evaluate(context) for arg in self.args)\n        with context.extend(namespace):\n            return self.block.render(context, buffer)\n\n    async def render_to_output_async(\n        self, context: RenderContext, buffer: TextIO\n    ) -&gt; int:\n        \"\"\"Render the node to the output buffer.\"\"\"\n        namespace = dict([await arg.evaluate_async(context) for arg in self.args])\n        with context.extend(namespace):\n            return await self.block.render_async(context, buffer)\n\n    def expressions(self) -&gt; Iterable[Expression]:\n        \"\"\"Return this node's expressions.\"\"\"\n        yield from (arg.value for arg in self.args)\n\n    def children(\n        self,\n        static_context: RenderContext,\n        *,\n        include_partials: bool = True,\n    ) -&gt; Iterable[Node]:\n        \"\"\"Return this node's children.\"\"\"\n        yield self.block\n\n    def block_scope(self) -&gt; Iterable[Identifier]:\n        \"\"\"Return variables this node adds to the node's block scope.\"\"\"\n        yield from (Identifier(p.name, token=p.token) for p in self.args)\n</code></pre> <p><code>WithNode.render_to_output()</code> evaluates its arguments, extends the render context and renders its block to the output buffer. The <code>RenderContext.extend</code> context manager is used to ensure the variables added by our tag go out of scope after the block has been rendered.</p> <p><code>expressions()</code>, <code>children()</code> and <code>block_Scope()</code> are all used for static analysis. It is the node's responsibility to report its child nodes, any instances of <code>Expression</code> that it maintains and the names of any variables it adds to template and/or block scope. If you don't plan to use Liquid's static analysis features, you can omit these methods.</p> <p>The <code>__str__()</code> method is used for template serialization. It should return a string representation of the node using valid Liquid syntax. If you're not interested in serializing a parsed template back to a string, you can omit <code>__str__()</code>.</p>"},{"location":"custom_tags/#usage","title":"Usage","text":"<p>We can now add an instance of <code>WithTag</code> to <code>Environment.tags</code>.</p> <pre><code>from liquid2 import Environment\n\nfrom .with_tag import WithTag\n\nenv = Environment()\nenv.tags[\"with\"] = WithTag(env)\n\ntemplate = env.from_string(\n\"{% with greeting: 'Hello', name: 'Sally' -%}\"\n\"  {{ greeting }}, {{ name }}!\"\n\"{%- endwith %}\"\n)\n\nprint(template.render()) # Hello, Sally\n</code></pre>"},{"location":"custom_tags/#replace-a-tag","title":"Replace a tag","text":"<p>To replace a default tag implementation with your own, simply update the <code>tags</code> dictionary on your environment.</p> <pre><code>from liquid2 import Environment\nfrom .my_tag import MyTag\n\nenv = Environment()\nenv.tags[\"my_tag_name\"] = MyTag(env)\n\n# ...\n</code></pre>"},{"location":"custom_tags/#remove-a-tag","title":"Remove a tag","text":"<p>Remove a built-in tag by deleting it from your environment's <code>tags</code> dictionary. The example removes the <code>macro</code> <code>call</code> tags.</p> <pre><code>from liquid import Environment\n\nenv = Environment()\ndel env.tags[\"macro\"]\ndel env.tags[\"call\"]\n\n# ...\n</code></pre> <p>Tip</p> <p>You can add, remove and replace tags on <code>liquid2.DEFAULT_ENVIRONMENT</code> too. Convenience functions <code>parse()</code> and <code>render()</code> use <code>DEFAULT_ENVIRONMENT</code></p>"},{"location":"environment/","title":"Liquid environments","text":"<p>Template parsing and rendering behavior is configured using an instance of <code>Environment</code>. Once configured, you'd parse templates with <code>Environment.from_string()</code> or <code>Environment.get_template()</code>, both of which return an instance of <code>Template</code>.</p>"},{"location":"environment/#the-default-environment","title":"The default environment","text":"<p>The default environment, <code>liquid2.DEFAULT_ENVIRONMENT</code>, and an instance of <code>Environment</code> without any arguments are equivalent to the following <code>Environment</code> subclass and constructor arguments.</p> <pre><code>from liquid2 import DictLoader\nfrom liquid2 import Environment\nfrom liquid2 import Template\nfrom liquid2 import Undefined\nfrom liquid2 import WhitespaceControl\nfrom liquid2.builtin import register_default_tags_and_filters\nfrom liquid2.lexer import Lexer\n\nclass MyLiquidEnvironment(Environment):\n    context_depth_limit = 30\n    loop_iteration_limit = None\n    loop_namespace_limit = None\n    output_stream_limit = None\n    suppress_blank_control_flow_blocks = True\n    lexer_class = Lexer\n    template_class = Template\n\n    def setup_tags_and_filters(self):\n        register_default_tags_and_filters(self)\n\n\nenv = MyLiquidEnvironment(\n    loader=DictLoader(),\n    globals=None,\n    auto_escape=False,\n    undefined=Undefined,\n    default_trim=WhitespaceControl.PLUS\n)\n</code></pre>"},{"location":"environment/#managing-tags-and-filters","title":"Managing tags and filters","text":"<p>As you'd expect, <code>register_default_tags_and_filters()</code> registers all the default tags and filters with the environment. You are encouraged to override <code>setup_tags_and_filters()</code> in your <code>Environment</code> subclasses to add optional or custom tags and filters, remove unwanted default tags and filters, and possibly replace default implementation with your own.</p> <p>It's also OK to manipulate <code>Environment.tags</code> and <code>Environment.filters</code> directly after an <code>Environment</code> instance has been created. They are just dictionaries mapping tag names to instances of <code>Tag</code> and filter names to callables, respectively.</p> <pre><code>from liquid2 import Environment\n\nenv = Environment()\ndel env.tags[\"include\"]\n</code></pre>"},{"location":"environment/#managing-global-variables","title":"Managing global variables","text":"<p>By default, global template variables attached to instances of <code>Template</code> take priority over global template variables attached to an <code>Environment</code>. You can change this priority or otherwise manipulate the <code>globals</code> dictionary for a <code>Template</code> by overriding <code>Environment.make_globals()</code>.</p> <p>Also see Render context data.</p> <pre><code>from typing import Mapping\nfrom liquid2 import Environment\n\nclass MyLiquidEnvironment(Environment):\n\n    def make_globals(\n        self,\n        globals: Mapping[str, object] | None = None,\n    ) -&gt; dict[str, object]:\n        \"\"\"Combine environment globals with template globals.\"\"\"\n        if globals:\n            # Template globals take priority over environment globals.\n            return {**self.globals, **globals}\n        return dict(self.globals)\n</code></pre>"},{"location":"environment/#html-auto-escape","title":"HTML auto escape","text":"<p>When <code>auto_escape</code> is <code>True</code>, render context variables will be automatically escaped to produce HTML-safe strings on output.</p> <p>You can be explicitly mark strings as safe by wrapping them in <code>Markup()</code> and drops can implement the special <code>__html__()</code> method.</p> <pre><code>from markupsafe import Markup\nfrom liquid2 import Environment\n\nenv = Environment(auto_escape=True)\ntemplate = env.from_string(\"&lt;p&gt;Hello, {{ you }}&lt;/p&gt;\")\nprint(template.render(you=Markup(\"&lt;em&gt;World!&lt;/em&gt;\")))\n</code></pre>"},{"location":"environment/#resource-limits","title":"Resource limits","text":"<p>For deployments where template authors are untrusted, you can set limits on some resources to avoid malicious templates from consuming too much memory or too many CPU cycles. Limits are set by subclassing <code>Environment</code> and setting some class attributes.</p> <pre><code>from liquid2 import Environment\n\nclass MyEnvironment(Environment):\n    context_depth_limit = 30\n    local_namespace_limit = 2000\n    loop_iteration_limit = 1000\n    output_stream_limit = 15000\n\n\nenv = MyEnvironment()\n\ntemplate = env.from_string(\"\"\"\\\n{% for x in (1..1000000) %}\n{% for y in (1..1000000) %}\n    {{ x }},{{ y }}\n{% endfor %}\n{% endfor %}\n\"\"\")\n\ntemplate.render()\n# liquid2.exceptions.LoopIterationLimitError: loop iteration limit reached\n</code></pre>"},{"location":"environment/#context-depth-limit","title":"Context depth limit","text":"<p><code>context_depth_limit</code> is the maximum number of times a render context can be extended or wrapped before a <code>ContextDepthError</code> is raised. This helps us guard against recursive use of the <code>include</code> and <code>render</code> tags. The default context depth limit is 30.</p> <pre><code>from liquid2 import Environment\nfrom liquid2 import DictLoader\n\nenv = Environment(\n    loader=DictLoader(\n        {\n            \"foo\": \"{% render 'bar' %}\",\n            \"bar\": \"{% render 'foo' %}\",\n        }\n    )\n)\n\ntemplate = env.from_string(\"{% render 'foo' %}\")\ntemplate.render()\n# liquid2.exceptions.ContextDepthError: maximum context depth reached, possible recursive render\n#   -&gt; foo:1:0\n#   |\n# 1 | {% render 'bar' %}\n#   | ^^^^^^^^^^^^^^^^^^ maximum context depth reached, possible recursive render\n</code></pre>"},{"location":"environment/#local-namespace-limit","title":"Local Namespace Limit","text":"<p><code>local_namespace_limit</code> is the maximum number of bytes (according to <code>sys.getsizeof()</code>) allowed in a template's local namespace, per render, before a <code>LocalNamespaceLimitError</code> exception is raised. Note that we only count the size of the local namespace values, not its keys.</p> <p>The default <code>local_namespace_limit</code> is <code>None</code>, meaning there is no limit.</p> <pre><code>from liquid2 import Environment\n\nclass MyEnvironment(Environment):\n    local_namespace_limit = 50  # Very low, for demonstration purposes.\n\nenv = MyEnvironment()\n\ntemplate = env.from_string(\"\"\"\\\n{% assign x = \"Nunc est nulla, pellentesque ac dui id erat curae.\" %}\n\"\"\")\n\ntemplate.render()\n# liquid2.exceptions.LocalNamespaceLimitError: local namespace limit reached\n</code></pre> <p>Warning</p> <p>PyPy does not implement <code>sys.getsizeof</code>. Instead of a size in bytes, when run with PyPy, <code>local_namespace_limit</code> will degrade to being the number of distinct values in a template's local namespace.</p>"},{"location":"environment/#loop-iteration-limit","title":"Loop Iteration Limit","text":"<p><code>loop_iteration_limit</code> is the maximum number of loop iterations allowed before a <code>LoopIterationLimitError</code> is raised.</p> <p>The default <code>loop_iteration_limit</code> is <code>None</code>, meaning there is no limit.</p> <pre><code>from liquid2 import Environment\n\nclass MyEnvironment(Environment):\n    loop_iteration_limit = 999\n\n\nenv = MyEnvironment()\n\ntemplate = env.from_string(\"\"\"\\\n{% for x in (1..100) %}\n{% for y in (1..100) %}\n    {{ x }},{{ y }}\n{% endfor %}\n{% endfor %}\n\"\"\")\n\ntemplate.render()\n# liquid2.exceptions.LoopIterationLimitError: loop iteration limit reached\n</code></pre> <p>Other built in tags that contribute to the loop iteration counter are <code>render</code>, <code>include</code> (when using their <code>{% render 'thing' for some.thing %}</code> syntax) and <code>tablerow</code>. If a partial template is rendered within a <code>for</code> loop, the loop counter is carried over to the render context of the partial template.</p>"},{"location":"environment/#output-stream-limit","title":"Output Stream Limit","text":"<p>The maximum number of bytes that can be written to a template's output stream, per render, before an <code>OutputStreamLimitError</code> exception is raised. The default <code>output_stream_limit</code> is <code>None</code>, meaning there is no limit.</p> <pre><code>from liquid2 import Environment\n\nclass MyEnvironment(Environment):\n    output_stream_limit = 20  # Very low, for demonstration purposes.\n\n\nenv = MyEnvironment()\n\ntemplate = env.from_string(\"\"\"\\\n{% if false %}\nthis is never rendered, so will not contribute the the output byte counter\n{% endif %}\nHello, {{ you }}!\n\"\"\")\n\ntemplate.render(you=\"World\")\n# '\\nHello, World!\\n'\n\ntemplate.render(you=\"something longer that exceeds our limit\")\n# liquid2.exceptions.OutputStreamLimitError: output stream limit reached\n</code></pre>"},{"location":"environment/#whats-next","title":"What's next?","text":"<p>See loading templates for more information about configuring a template loader, undefined variables for information about managing undefined variables and whitespace control for information about customizing whitespace control behavior.</p>"},{"location":"filter_reference/","title":"Default filters","text":"<p>All the filters described here are enabled by default in Python Liquid2.</p>"},{"location":"filter_reference/#abs","title":"abs","text":"<p>0.1.0 </p> <pre><code>&lt;number&gt; | abs\n</code></pre> <p>Return the absolute value of a number. Works on integers, floats and string representations of integers or floats.</p> <pre><code>{{ -42 | abs }}\n{{ 7.5 | abs }}\n{{ '42.0' | abs }}\n</code></pre> output<pre><code>42\n7.5\n42.0\n</code></pre> <p>Given a value that can't be cast to an integer or float, <code>0</code> will be returned.</p> <pre><code>{{ 'hello' | abs }}\n{{ nosuchthing | abs }}\n</code></pre> output<pre><code>0\n0\n</code></pre>"},{"location":"filter_reference/#append","title":"append","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | append: &lt;string&gt;\n</code></pre> <p>Return the input value concatenated with the argument value.</p> <pre><code>{{ 'Hello, ' | append: 'World!' }}\n</code></pre> output<pre><code>Hello, World!\n</code></pre> <p>If either the input value or argument are not a string, they will be coerced to a string before concatenation.</p> <pre><code>{% assign a_number = 7.5 -%}\n{{ 42 | append: a_number }}\n{{ nosuchthing | append: 'World!' }}\n</code></pre> output<pre><code>427.5\nWorld!\n</code></pre>"},{"location":"filter_reference/#at_least","title":"at_least","text":"<p>0.1.0 </p> <pre><code>&lt;number&gt; | at_least: &lt;number&gt;\n</code></pre> <p>Return the maximum of the filter's input value and its argument. If either input value or argument are string representations of an integer or float, they will be cast to an integer or float prior to comparison.</p> <pre><code>{{ -5.1 | at_least: 8 }}\n{{ 8 | at_least: '5' }}\n</code></pre> output<pre><code>8\n8\n</code></pre> <p>If either input value or argument can not be cast to an integer or float, <code>0</code> will be used instead.</p> <pre><code>{{ \"hello\" | at_least: 2 }}\n{{ \"hello\" | at_least: -2 }}\n{{ -1 | at_least: \"abc\" }}\n</code></pre> output<pre><code>2\n0\n0\n</code></pre>"},{"location":"filter_reference/#at_most","title":"at_most","text":"<p>0.1.0 </p> <pre><code>&lt;number&gt; | at_most: &lt;number&gt;\n</code></pre> <p>Return the minimum of the filter's input value and its argument. If either input value or argument are string representations of an integer or float, they will be cast to an integer or float prior to comparison.</p> <pre><code>{{ 5 | at_most: 8 }}\n{{ '8' | at_most: 5 }}\n</code></pre> output<pre><code>5\n5\n</code></pre> <p>If either input value or argument can not be cast to an integer or float, <code>0</code> will be used instead.</p> <pre><code>{{ \"hello\" | at_most: 2 }}\n{{ \"hello\" | at_most: -2 }}\n{{ -1 | at_most: \"abc\" }}\n</code></pre> output<pre><code>0\n-2\n-1\n</code></pre>"},{"location":"filter_reference/#capitalize","title":"capitalize","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | capitalize\n</code></pre> <p>Return the input string with the first character in upper case and the rest lowercase.</p> <pre><code>{{ 'heLLO, World!' | capitalize }}\n</code></pre> output<pre><code>Hello, world!\n</code></pre> <p>If the input value is not a string, it will be converted to a string.</p> <pre><code>{{ 42 | capitalize }}\n</code></pre> output<pre><code>42\n</code></pre>"},{"location":"filter_reference/#ceil","title":"ceil","text":"<p>0.1.0 </p> <pre><code>&lt;number&gt; | ceil\n</code></pre> <p>Round the input value up to the nearest whole number. The input value will be converted to a number if it is not an integer or float.</p> <pre><code>{{ 5.1 | ceil }}\n{{ 5.0 | ceil }}\n{{ 5 | ceil }}\n{{ '5.4' | ceil }}\n</code></pre> output<pre><code>6\n5\n5\n5\n</code></pre> <p>If the input is undefined or can't be converted to a number, <code>0</code> is returned.</p> <pre><code>{{ 'hello' | ceil }}\n{{ nosuchthing | ceil }}\n</code></pre> output<pre><code>0\n0\n</code></pre>"},{"location":"filter_reference/#compact","title":"compact","text":"<p>0.1.0 </p> <pre><code>&lt;array&gt; | compact[: &lt;string&gt;]\n</code></pre> <p>Remove <code>nil</code>/<code>null</code> (or <code>None</code> in Python) values from an array-like object. If given, the argument should be the name of a property that exists on each item (hash, dict etc.) in the array-like sequence.</p> <p>For example, ff <code>pages</code> is an array of objects, some of which have a <code>category</code> property:</p> data<pre><code>{\n  \"pages\": [\n    { \"category\": \"business\" },\n    { \"category\": \"celebrities\" },\n    {},\n    { \"category\": \"lifestyle\" },\n    { \"category\": \"sports\" },\n    {},\n    { \"category\": \"technology\" }\n  ]\n}\n</code></pre> <p>Without <code>compact</code>, iterating those categories will include <code>nil</code>/<code>null</code> values.</p> <pre><code>{% assign categories = pages | map: \"category\" -%}\n\n{% for category in categories -%}\n- {{ category }}\n{%- endfor %}\n</code></pre> output<pre><code>- business\n- celebrities\n-\n- lifestyle\n- sports\n-\n- technology\n</code></pre> <p>With <code>compact</code>, we can remove those missing categories before the loop.</p> <pre><code>{% assign categories = pages | map: \"category\" | compact %}\n\n{% for category in categories %}\n- {{ category }}\n{% endfor %}\n</code></pre> output<pre><code>- business\n- celebrities\n- lifestyle\n- sports\n- technology\n</code></pre> <p>Using the optional argument to <code>compact</code>, we could avoid using <code>map</code> and create an array of pages with a <code>category</code> property, rather than an array of categories.</p> <pre><code>{% assign pages_with_category = pages | compact: \"category\" %}\n\n{% for page in pages_with_category %}\n- {{ page.category }}\n{% endfor %}\n</code></pre> output<pre><code>- business\n- celebrities\n- lifestyle\n- sports\n- technology\n</code></pre>"},{"location":"filter_reference/#concat","title":"concat","text":"<p>0.1.0 </p> <pre><code>&lt;array&gt; | concat: &lt;array&gt;\n</code></pre> <p>Create a new array by joining one array-like object with another.</p> <pre><code>{% assign fruits = \"apples, oranges, peaches\" | split: \", \" %}\n{% assign vegetables = \"carrots, turnips, potatoes\" | split: \", \" %}\n\n{% assign everything = fruits | concat: vegetables %}\n\n{% for item in everything %}\n- {{ item }}\n{% endfor %}\n</code></pre> output<pre><code>- apples\n- oranges\n- peaches\n- carrots\n- turnips\n- potatoes\n</code></pre> <p>If the input value is not array-like, it will be converted to an array. No conversion is attempted for the argument value.</p> <pre><code>{% assign fruits = \"apples, oranges, peaches\" | split: \", \" -%}\n{% assign things = \"hello\" | concat: fruits -%}\n\n{% for item in things -%}\n- {{ item }}\n{% endfor %}\n</code></pre> <p>Warning</p> <p> Python Liquid2 treats strings as sequences, implicitly converting <code>\"hello\"</code> to <code>[\"h\", \"e\", \"l\", \"l\", \"o\"]</code> in this example. Whereas Shopify/Liquid would convert <code>\"hello\"</code> to <code>[\"hello\"]</code>.</p> output<pre><code>- h\n- e\n- l\n- l\n- o\n- apples\n- oranges\n- peaches\n</code></pre> <p>If the input is a nested array, it will be flattened before concatenation. The argument is not flattened.</p> data<pre><code>{\n  \"a\": [\n    [\"a\", \"x\"],\n    [\"b\", [\"y\", [\"z\"]]]\n  ],\n  \"b\": [\"c\", \"d\"]\n}\n</code></pre> <pre><code>{{ a | concat: b | join: '#' }}\n</code></pre> output<pre><code>a#x#b#y#z#c#d\n</code></pre>"},{"location":"filter_reference/#currency","title":"currency","text":"<p>0.1.0 </p> <pre><code>&lt;number&gt; | currency[: group_separator: &lt;boolean&gt;] -&gt; &lt;string&gt;\n</code></pre> <p>Currency (aka money) formatting. Return the input number formatted as currency for the current locale. See also <code>money</code>.</p> <pre><code>{{ 100457.99 | currency }}\n</code></pre> output<pre><code>$100,457.99\n</code></pre> <p>Use the <code>group_separator</code> argument to control the output of the current locale's group separators.</p> <pre><code>{{ 100457.99 | currency: group_separator: false }}\n</code></pre> output<pre><code>$100457.99\n</code></pre> <p>If the input number is a string, it will be parsed to a decimal according to the current input locale.</p> <pre><code>{% with input_locale: \"de\", locale: \"en_CA\" %}\n  {{ \"100.457,99\" | currency }}\n{% endwith %}\n</code></pre> output<pre><code>US$100,457.99\n</code></pre>"},{"location":"filter_reference/#date","title":"date","text":"<p>0.1.0 </p> <pre><code>&lt;datetime&gt; | date: &lt;string&gt;\n</code></pre> <p>Format a date and/or time according the the given format string. The input can be a string, in which case the string will be parsed as a date/time before formatting.</p> <p>Warning</p> <p>Python Liquid uses dateutil for parsing strings to <code>datetimes</code>, and <code>strftime</code> for formatting. There are likely to be some inconsistencies between this and Ruby Liquid's Time.parse equivalent parsing and formatting of dates and times.</p> <p>In general, Python Liquid will raise an exception if the input value can not be converted to a date and/or time. Whereas Ruby Liquid will usually return something without erroring.</p> <pre><code>{{ \"March 14, 2016\" | date: \"%b %d, %y\" }}\n</code></pre> output<pre><code>Mar 14, 16\n</code></pre> <p>The special <code>'now'</code> or <code>'today'</code> input values can be used to get the current timestamp. <code>'today'</code> is an alias for <code>'now'</code>. Both include time information.</p> <pre><code>{{ \"now\" | date: \"%Y-%m-%d %H:%M\" }}\n</code></pre> output<pre><code>2021-12-02 10:17\n</code></pre> <p>If the input is undefined, an empty string is returned.</p> <pre><code>{{ nosuchthing | date: \"%Y-%m-%d %H:%M\" }}\n</code></pre> output<pre><code>\n</code></pre>"},{"location":"filter_reference/#datetime","title":"datetime","text":"<p>0.1.0 </p> <pre><code>&lt;datetime&gt; | datetime[: format: &lt;string&gt;] -&gt; &lt;string&gt;\n</code></pre> <p>Date and time formatting. Return the input datetime formatted according to the current locale. If <code>dt</code> is a <code>datetime.datetime</code> object <code>datetime.datetime(2007, 4, 1, 15, 30)</code>.</p> <pre><code>{{ dt | datetime }}\n</code></pre> output<pre><code>Apr 1, 2007, 3:30:00 PM\n</code></pre> <p>The optional <code>format</code> argument can be one of <code>'short'</code>, <code>'medium'</code>, <code>'long'</code>, <code>'full'</code> or a custom format string. <code>format</code> defaults to <code>'medium'</code>.</p> <pre><code>{% with timezone: 'America/New_York' %}\n  {{ dt | datetime: format: 'full' }}\n{% endwith %}\n</code></pre> output<pre><code>Sunday, April 1, 2007 at 11:30:00 AM Eastern Daylight Time\n</code></pre> <p>If the input datetime is a string, it will be parsed to a datetime object.</p> <pre><code>{% with locale: 'en_GB' %}\n  {{ \"Apr 1, 2007, 3:30:00 PM UTC+4\" | datetime: format: 'short' }}\n{% endwith %}\n</code></pre> output<pre><code>01/04/2007, 19:30\n</code></pre>"},{"location":"filter_reference/#decimal","title":"decimal","text":"<p>0.1.0 </p> <pre><code>&lt;number&gt; | decimal[: group_separator: &lt;boolean&gt;] -&gt; &lt;string&gt;\n</code></pre> <p>Decimal number formatting. Return the input number formatted as a decimal for the current locale.</p> <pre><code>{{ '10000.233' | decimal }}\n</code></pre> output<pre><code>10,000.233\n</code></pre> <p>Use the <code>group_separator</code> argument to control the output of the current locale's group separators.</p> <pre><code>{{ '10000.233' | decimal: group_separator: false }}\n</code></pre> output<pre><code>10000.233\n</code></pre> <p>If the input number is a string, it will be parsed to a decimal according to the current input locale.</p> <pre><code>{% with input_locale: \"de\" %}\n  {{ \"100.457,00\" | decimal }}\n{% endwith %}\n</code></pre> output<pre><code>100,457\n</code></pre>"},{"location":"filter_reference/#default","title":"default","text":"<p>0.1.0 </p> <pre><code>&lt;expression&gt; | default[: &lt;object&gt;[, allow_false:&lt;bool&gt;]]\n</code></pre> <p>Return a default value if the input is undefined, <code>nil</code>/<code>null</code>, <code>false</code> or empty, or return the input unchanged otherwise.</p> <pre><code>{{ product_price | default: 2.99 }}\n\n{%- assign product_price = \"\" %}\n{{ product_price | default: 2.99 }}\n\n{%- assign product_price = 4.99 %}\n{{ product_price | default: 2.99 }}\n</code></pre> output<pre><code>2.99\n2.99\n4.99\n</code></pre> <p>If the optional <code>allow_false</code> argument is <code>true</code>, an input of <code>false</code> will not return the default. <code>allow_false</code> defaults to <code>false</code>.</p> <pre><code>{% assign product_reduced = false -%}\n{{ product_reduced | default: true, allow_false: true }}\n</code></pre> output<pre><code>false\n</code></pre> <p>If no argument is given, the default value will be an empty string.</p> <pre><code>{{ product_price | default }}\n</code></pre> output<pre><code>\n</code></pre> <p>Empty strings, arrays and objects all cause the default value to be returned. <code>0</code> does not.</p> <pre><code>{{ \"\" | default: \"hello\" }}\n{{ 0 | default: 99 }}\n</code></pre> output<pre><code>hello\n0\n</code></pre>"},{"location":"filter_reference/#divided_by","title":"divided_by","text":"<p>0.1.0 </p> <pre><code>&lt;number&gt; | divided_by: &lt;number&gt;\n</code></pre> <p>Divide a number by another number. The result is rounded down to the nearest integer if the divisor is an integer.</p> <pre><code>{{ 16 | divided_by: 4 }}\n{{ 5 | divided_by: 3 }}\n</code></pre> output<pre><code>4\n1\n</code></pre> <p>If you divide by a float, the result will be a float.</p> <pre><code>{{ 20 | divided_by: 7 }}\n{{ 20 | divided_by: 7.0 }}\n</code></pre> output<pre><code>2\n2.857142857142857\n</code></pre> <p>If either the input or argument are not an integer or float, Liquid will try to convert them to an integer or float. If the input can't be converted, <code>0</code> will be used instead. If the argument can't be converted, an exception is raised.</p> <pre><code>{{ \"20\" | divided_by: \"7\" }}\n{{ \"hello\" | divided_by: 2 }}\n</code></pre> output<pre><code>2\n0\n</code></pre>"},{"location":"filter_reference/#downcase","title":"downcase","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | downcase\n</code></pre> <p>Return the input string with all characters in lowercase.</p> <pre><code>{{ 'Hello, World!' | downcase }}\n</code></pre> output<pre><code>hello, world!\n</code></pre> <p>If the input is not a string, Liquid will convert it to a string before forcing characters to lowercase.</p> <pre><code>{{ 5 | downcase }}\n</code></pre> output<pre><code>5\n</code></pre> <p>If the input is undefined, an empty string is returned.</p>"},{"location":"filter_reference/#escape","title":"escape","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | escape\n</code></pre> <p>Return the input string with characters <code>&amp;</code>, <code>&lt;</code> and <code>&gt;</code> converted to HTML-safe sequences.</p> <pre><code>{{ \"Have you read 'James &amp; the Giant Peach'?\" | escape }}\n</code></pre> output<pre><code>Have you read &amp;#39;James &amp;amp; the Giant Peach&amp;#39;?\n</code></pre>"},{"location":"filter_reference/#escape_once","title":"escape_once","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | escape_once\n</code></pre> <p>Return the input string with characters <code>&amp;</code>, <code>&lt;</code> and <code>&gt;</code> converted to HTML-safe sequences while preserving existing HTML escape sequences.</p> <pre><code>{{ \"Have you read 'James &amp;amp; the Giant Peach'?\" | escape_once }}\n</code></pre> output<pre><code>Have you read &amp;#39;James &amp;amp; the Giant Peach&amp;#39;?\n</code></pre>"},{"location":"filter_reference/#first","title":"first","text":"<p>0.1.0 </p> <pre><code>&lt;sequence&gt; | first\n</code></pre> <p>Return the first item of the input sequence. The input could be array-like or a mapping, but not a string.</p> <pre><code>{{ \"Ground control to Major Tom.\" | split: \" \" | first }}\n</code></pre> output<pre><code>Ground\n</code></pre> <p>If the input sequence is undefined, empty or not a sequence, <code>nil</code> is returned.</p>"},{"location":"filter_reference/#floor","title":"floor","text":"<p>0.1.0 </p> <pre><code>&lt;number&gt; | floor\n</code></pre> <p>Return the input down to the nearest whole number. Liquid tries to convert the input to a number before the filter is applied.</p> <pre><code>{{ 1.2 | floor }}\n{{ 2.0 | floor }}\n{{ 183.357 | floor }}\n{{ -5.4 | floor }}\n{{ \"3.5\" | floor }}\n</code></pre> output<pre><code>1\n2\n183\n-6\n3\n</code></pre> <p>If the input can't be converted to a number, <code>0</code> is returned.</p>"},{"location":"filter_reference/#gettext","title":"gettext","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | gettext[: &lt;identifier&gt;: &lt;object&gt; ... ]\n</code></pre> <p>Return the localized translation of the input message without pluralization or message context.</p> <pre><code>{{ \"Hello, World!\" | gettext }}\n</code></pre> output<pre><code>Hallo Welt!\n</code></pre> <p>Any keyword arguments are used to populate message variables. If <code>user.name</code> is <code>\"Sue\"</code>:</p> <pre><code>{{ \"Hello, %(you)s\" | gettext: you: user.name }}\n</code></pre> output<pre><code>Hallo Sue!\n</code></pre>"},{"location":"filter_reference/#join","title":"join","text":"<p>0.1.0 </p> <pre><code>&lt;array&gt; | join[: &lt;string&gt;]\n</code></pre> <p>Return the items in the input array as a single string, separated by the argument string. If the input is not an array, Liquid will convert it to one. If input array items are not strings, they will be converted to strings before joining.</p> <pre><code>{% assign beatles = \"John, Paul, George, Ringo\" | split: \", \" -%}\n\n{{ beatles | join: \" and \" }}\n</code></pre> output<pre><code>John and Paul and George and Ringo\n</code></pre> <p>If an argument string is not given, it defaults to a single space.</p> <pre><code>{% assign beatles = \"John, Paul, George, Ringo\" | split: \", \" -%}\n\n{{ beatles | join }}\n</code></pre> output<pre><code>John Paul George Ringo\n</code></pre>"},{"location":"filter_reference/#json","title":"json","text":"<p>0.1.0 </p> <pre><code>&lt;object&gt; | json\n</code></pre> <p>Return the input object serialized to a JSON (JavaScript Object Notation) string.</p> data<pre><code>{\n  \"product\": {\n    \"id\": 1234,\n    \"name\": \"Football\"\n  }\n}\n</code></pre> <pre><code>{{ product | json }}\n</code></pre> output<pre><code>{ \"id\": 1234, \"name\": \"Football\" }\n</code></pre>"},{"location":"filter_reference/#last","title":"last","text":"<p>0.1.0 </p> <pre><code>&lt;array&gt; | last\n</code></pre> <p>Return the last item in the array-like input.</p> <pre><code>{{ \"Ground control to Major Tom.\" | split: \" \" | last }}\n</code></pre> output<pre><code>Tom.\n</code></pre> <p>If the input is undefined, empty, string or a number, <code>nil</code> will be returned.</p>"},{"location":"filter_reference/#lstrip","title":"lstrip","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | lstrip\n</code></pre> <p>Return the input string with all leading whitespace removed. If the input is not a string, it will be converted to a string before stripping whitespace.</p> <pre><code>{{ \"          So much room for activities          \" | lstrip }}!\n</code></pre> output<pre><code>So much room for activities          !\n</code></pre>"},{"location":"filter_reference/#map","title":"map","text":"<p>0.1.0 </p> <pre><code>&lt;array&gt; | map: &lt;string&gt;\n</code></pre> <p>Extract properties from an array of objects into a new array.</p> <p>For example, if <code>pages</code> is an array of objects with a <code>category</code> property:</p> data<pre><code>{\n  \"pages\": [\n    { \"category\": \"business\" },\n    { \"category\": \"celebrities\" },\n    { \"category\": \"lifestyle\" },\n    { \"category\": \"sports\" },\n    { \"category\": \"technology\" }\n  ]\n}\n</code></pre> <pre><code>{% assign categories = pages | map: \"category\" -%}\n\n{% for category in categories -%}\n- {{ category }}\n{%- endfor %}\n</code></pre> output<pre><code>- business\n- celebrities\n- lifestyle\n- sports\n- technology\n</code></pre>"},{"location":"filter_reference/#minus","title":"minus","text":"<p>0.1.0 </p> <pre><code>&lt;number&gt; | minus: &lt;number&gt;\n```\n\nReturn the result of subtracting one number from another. If either the input or argument are not a number, Liquid will try to convert them to a number. If that conversion fails, `0` is used instead.\n\n```liquid2\n{{ 4 | minus: 2 }}\n{{ \"16\" | minus: 4 }}\n{{ 183.357 | minus: 12.2 }}\n{{ \"hello\" | minus: 10 }}\n</code></pre> output<pre><code>2\n12\n171.157\n-10\n</code></pre>"},{"location":"filter_reference/#modulo","title":"modulo","text":"<p>0.1.0 </p> <pre><code>&lt;number&gt; | modulo: &lt;number&gt;\n</code></pre> <p>Return the remainder from the division of the input by the argument.</p> <pre><code>{{ 3 | modulo: 2 }}\n{{ \"24\" | modulo: \"7\" }}\n{{ 183.357 | modulo: 12 }}\n</code></pre> output<pre><code>1\n3\n3.357\n</code></pre> <p>If either the input or argument are not an integer or float, Liquid will try to convert them to an integer or float. If the input can't be converted, <code>0</code> will be used instead. If the argument can't be converted, an exception is raised.</p>"},{"location":"filter_reference/#money","title":"money","text":"<p>0.1.0 </p> <p><code>money</code> is an alias for <code>currency</code>.</p>"},{"location":"filter_reference/#money_with_currency","title":"money_with_currency","text":"<p>0.1.0 </p> <p><code>money_with_currency</code> is an alias for <code>currency</code> with the default format set to <code>\"\u00a4#,##0.00 \u00a4\u00a4\"</code>.</p>"},{"location":"filter_reference/#money_without_currency","title":"money_without_currency","text":"<p>0.1.0 </p> <p><code>money_without_currency</code> is an alias for <code>currency</code> with the default format set to <code>\"#,##0.00\u00a4\"</code>.</p>"},{"location":"filter_reference/#money_without_trailing_zeros","title":"money_without_trailing_zeros","text":"<p>0.1.0 </p> <p><code>money_without_trailing_zeros</code> is an alias for <code>currency</code> with the default format set to <code>\"\u00a4#,###\"</code> and <code>currency_digits</code> set to <code>False</code>.</p>"},{"location":"filter_reference/#newline_to_br","title":"newline_to_br","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | newline_to_br\n</code></pre> <p>Return the input string with <code>\\n</code> and <code>\\r\\n</code> replaced with <code>&lt;br /&gt;\\n</code>.</p> <pre><code>{% capture string_with_newlines %}\nHello\nthere\n{% endcapture %}\n\n{{ string_with_newlines | newline_to_br }}\n</code></pre> output<pre><code>&lt;br /&gt;\nHello&lt;br /&gt;\nthere&lt;br /&gt;\n</code></pre>"},{"location":"filter_reference/#ngettext","title":"ngettext","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | ngettext: &lt;string&gt;, &lt;number&gt; [, &lt;identifier&gt;: &lt;object&gt; ... ]\n</code></pre> <p>Return the localized translation of the input message with pluralization. The first positional argument is the plural form of the message. The second is a number used to determine if the singular or plural message should be used.</p> <pre><code>{% assign count = \"Earth,Tatooine\" | split: \",\" | size %}\n{{ \"Hello, World!\" | ngetetxt: \"Hello, Worlds!\", count }}\n</code></pre> output<pre><code>Hallo Welten!\n</code></pre> <p>Any keyword arguments are used to populate message variables. If <code>user.name</code> is <code>\"Sue\"</code> and <code>count</code> is <code>1</code>:</p> <pre><code>{{ \"Hello, %(you)s\" | ngetetxt: \"Hello, everyone!\", count, you: user.name }}\n</code></pre> output<pre><code>Hallo Sue!\n</code></pre>"},{"location":"filter_reference/#npgettext","title":"npgettext","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | npgettext: &lt;string&gt;, &lt;string&gt;, &lt;number&gt; [, &lt;identifier&gt;: &lt;object&gt; ... ]\n``\n\nReturn the localized translation of the input message with pluralization and a message context. The first positional argument is the message context string, the second is the plural form of the message, and the third is a number used to determine if the singular or plural message should be used.\n\n```liquid2\n{% assign count = \"Earth,Tatooine\" | split: \",\" | size %}\n{{ \"Hello, World!\" | ngetetxt: \"extra special greeting\", \"Hello, Worlds!\", count }}\n</code></pre> output<pre><code>Hallo Welten!\n</code></pre> <p>Any keyword arguments are used to populate message variables. If <code>user.name</code> is <code>\"Sue\"</code> and <code>count</code> is <code>1</code>:</p> <pre><code>{{ \"Hello, %(you)s\" | ngetetxt: \"extra special greeting\", \"Hello, everyone!\", count, you: user.name }}\n</code></pre> output<pre><code>Hallo Sue!\n</code></pre>"},{"location":"filter_reference/#pgettext","title":"pgettext","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | pgettext: &lt;string&gt; [, &lt;identifier&gt;: &lt;object&gt; ... ]\n</code></pre> <p>Return the localized translation of the input message with additional message context. Message context is used to give translators extra information about where the messages is to be used.</p> <pre><code>{{ \"Hello, World!\" | pgettext: \"extra special greeting\" }}\n</code></pre> output<pre><code>Hallo Welt!\n</code></pre> <p>Any keyword arguments are used to populate message variables. If <code>user.name</code> is <code>\"Sue\"</code>:</p> <pre><code>{{ \"Hello, %(you)s\" | pgettext: \"extra special greeting\", you: user.name }}\n</code></pre> output<pre><code>Hallo Sue!\n</code></pre>"},{"location":"filter_reference/#plus","title":"plus","text":"<p>0.1.0 </p> <pre><code>&lt;number&gt; | plus: &lt;number&gt;\n</code></pre> <p>Return the result of adding one number to another. If either the input or argument are not a number, Liquid will try to convert them to a number. If that conversion fails, <code>0</code> is used instead.</p> <pre><code>{{ 4 | plus: 2 }}\n{{ \"16\" | plus: \"4\" }}\n{{ 183.357 | plus: 12 }}\n</code></pre> output<pre><code>6\n20\n195.357\n</code></pre>"},{"location":"filter_reference/#prepend","title":"prepend","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | prepend: &lt;string&gt;\n</code></pre> <p>Return the argument concatenated with the filter input.</p> <pre><code>{{ \"apples, oranges, and bananas\" | prepend: \"Some fruit: \" }}\n</code></pre> output<pre><code>Some fruit: apples, oranges, and bananas\n</code></pre> <p>If either the input value or argument are not a string, they will be coerced to a string before concatenation.</p> <pre><code>{% assign a_number = 7.5 -%}\n{{ 42 | prepend: a_number }}\n{{ nosuchthing | prepend: 'World!' }}\n</code></pre> output<pre><code>7.542\nWorld!\n</code></pre>"},{"location":"filter_reference/#remove","title":"remove","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | remove: &lt;string&gt;\n</code></pre> <p>Return the input with all occurrences of the argument string removed.</p> <pre><code>{{ \"I strained to see the train through the rain\" | remove: \"rain\" }}\n</code></pre> output<pre><code>I sted to see the t through the\n</code></pre> <p>If either the filter input or argument are not a string, they will be coerced to a string before substring removal.</p>"},{"location":"filter_reference/#remove_first","title":"remove_first","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | remove_first: &lt;string&gt;\n</code></pre> <p>Return a copy of the input string with the first occurrence of the argument string removed.</p> <pre><code>{{ \"I strained to see the train through the rain\" | remove_first: \"rain\" }}\n</code></pre> output<pre><code>I sted to see the train through the rain\n</code></pre> <p>If either the filter input or argument are not a string, they will be coerced to a string before substring removal.</p>"},{"location":"filter_reference/#remove_last","title":"remove_last","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | remove_last: &lt;string&gt;\n</code></pre> <p>Return a copy of the input string with the last occurrence of the argument string removed.</p> <pre><code>{{ \"I strained to see the train through the rain\" | remove_last: \"rain\" }}\n</code></pre> output<pre><code>I strained to see the train through the\n</code></pre> <p>If either the filter input or argument are not a string, they will be coerced to a string before substring removal.</p>"},{"location":"filter_reference/#replace","title":"replace","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | replace: &lt;string&gt;[, &lt;string&gt;]\n</code></pre> <p>Return the input with all occurrences of the first argument replaced with the second argument. If the second argument is omitted, it will default to an empty string, making <code>replace</code> behave like <code>remove</code>.</p> <pre><code>{{ \"Take my protein pills and put my helmet on\" | replace: \"my\", \"your\" }}\n</code></pre> output<pre><code>Take your protein pills and put your helmet on\n</code></pre> <p>If either the filter input or argument are not a string, they will be coerced to a string before replacement.</p>"},{"location":"filter_reference/#replace_first","title":"replace_first","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | replace_first: &lt;string&gt;[, &lt;string&gt;]\n</code></pre> <p>Return a copy of the input string with the first occurrence of the first argument replaced with the second argument. If the second argument is omitted, it will default to an empty string, making <code>replace_first</code> behave like <code>remove_first</code>.</p> <pre><code>{{ \"Take my protein pills and put my helmet on\" | replace_first: \"my\", \"your\" }}\n</code></pre> output<pre><code>Take your protein pills and put my helmet on\n</code></pre> <p>If either the filter input or argument are not a string, they will be coerced to a string before replacement.</p>"},{"location":"filter_reference/#replace_last","title":"replace_last","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | replace_last: &lt;string&gt;, &lt;string&gt;\n</code></pre> <p>Return a copy of the input string with the last occurrence of the first argument replaced with the second argument.</p> <pre><code>{{ \"Take my protein pills and put my helmet on\" | replace_first: \"my\", \"your\" }}\n</code></pre> output<pre><code>Take my protein pills and put your helmet on\n</code></pre> <p>If either the filter input or argument are not a string, they will be coerced to a string before replacement.</p>"},{"location":"filter_reference/#reverse","title":"reverse","text":"<p>0.1.0 </p> <pre><code>&lt;array&gt; | reverse\n</code></pre> <p>Return a copy of the input array with the items in reverse order. If the filter input is a string, <code>reverse</code> will return the string unchanged.</p> <pre><code>{% assign my_array = \"apples, oranges, peaches, plums\" | split: \", \" -%}\n\n{{ my_array | reverse | join: \", \" }}\n</code></pre> output<pre><code>plums, peaches, oranges, apples\n</code></pre>"},{"location":"filter_reference/#round","title":"round","text":"<p>0.1.0 </p> <pre><code>&lt;number&gt; | round[: &lt;number&gt;]\n</code></pre> <p>Return the input number rounded to the given number of decimal places. The number of digits defaults to <code>0</code>.</p> <pre><code>{{ 1.2 | round }}\n{{ 2.7 | round }}\n{{ 183.357 | round: 2 }}\n</code></pre> output<pre><code>1\n3\n183.36\n</code></pre> <p>If either the filter input or its optional argument are not an integer or float, they will be converted to an integer or float before rounding.</p>"},{"location":"filter_reference/#rstrip","title":"rstrip","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | rstrip\n</code></pre> <p>Return the input string with all trailing whitespace removed. If the input is not a string, it will be converted to a string before stripping whitespace.</p> <pre><code>{{ \"          So much room for activities          \" | rstrip }}!\n</code></pre> output<pre><code>          So much room for activities!\n</code></pre>"},{"location":"filter_reference/#safe","title":"safe","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | safe\n</code></pre> <p>Return the input string marked as safe to use in an HTML or XML document. If the filter input is not a string, it will be converted to an HTML-safe string.</p> <p>With auto-escape enabled and the following global variables:</p> data<pre><code>{\n  \"username\": \"Sally\",\n  \"greeting\": \"&lt;/p&gt;&lt;script&gt;alert('XSS!');&lt;/script&gt;\"\n}\n</code></pre> template<pre><code>&lt;p&gt;{{ greeting }}, {{ username }}&lt;/p&gt;\n&lt;p&gt;{{ greeting | safe }}, {{ username }}&lt;/p&gt;\n</code></pre> output<pre><code>&lt;p&gt;&amp;lt;/p&amp;gt;&amp;lt;script&amp;gt;alert(&amp;#34;XSS!&amp;#34;);&amp;lt;/script&amp;gt;, Sally&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;&lt;script&gt;alert('XSS!');&lt;/script&gt;, Sally&lt;/p&gt;\n</code></pre>"},{"location":"filter_reference/#size","title":"size","text":"<p>0.1.0 </p> <pre><code>&lt;object&gt; | size\n</code></pre> <p>Return the size of the input object. Works on strings, arrays and hashes.</p> <pre><code>{{ \"Ground control to Major Tom.\" | size }}\n{{ \"apples, oranges, peaches, plums\" | split: \", \" | size }}\n</code></pre> output<pre><code>28\n4\n</code></pre>"},{"location":"filter_reference/#slice","title":"slice","text":"<p>0.1.0 </p> <pre><code>&lt;sequence&gt; | slice: &lt;int&gt;[, &lt;int&gt;]\n</code></pre> <p>Return a substring or subsequence of the input string or array. The first argument is the zero-based start index. The second, optional argument is the length of the substring or sequence, which defaults to <code>1</code>.</p> <pre><code>{{ \"Liquid\" | slice: 0 }}\n{{ \"Liquid\" | slice: 2 }}\n{{ \"Liquid\" | slice: 2, 5 }}\n{% assign beatles = \"John, Paul, George, Ringo\" | split: \", \" -%}\n{{ beatles | slice: 1, 2 | join: \" \" }}\n</code></pre> output<pre><code>L\nq\nquid\nPaul George\n</code></pre> <p>If the first argument is negative, the start index is counted from the end of the sequence.</p> <pre><code>{{ \"Liquid\" | slice: -3 }}\n{{ \"Liquid\" | slice: -3, 2 }}\n{% assign beatles = \"John, Paul, George, Ringo\" | split: \", \" -%}\n{{ beatles | slice: -2, 2 | join: \" \" }}\n</code></pre> output<pre><code>u\nui\nGeorge Ringo\n</code></pre>"},{"location":"filter_reference/#sort","title":"sort","text":"<p>0.1.0 </p> <pre><code>&lt;array&gt; | sort[: &lt;string&gt;]\n``\n\nReturn a copy of the input array with its elements sorted.\n\n```liquid\n{% assign my_array = \"zebra, octopus, giraffe, Sally Snake\" | split: \", \" -%}\n{{ my_array | sort | join: \", \" }}\n</code></pre> output<pre><code>Sally Snake, giraffe, octopus, zebra\n</code></pre> <p>The optional argument is a sort key. If given, it should be the name of a property and the filter's input should be an array of objects.</p> data<pre><code>{\n  \"collection\": {\n    \"products\": [\n      { \"title\": \"A Shoe\", \"price\": \"9.95\" },\n      { \"title\": \"A Tie\", \"price\": \"0.50\" },\n      { \"title\": \"A Hat\", \"price\": \"2.50\" }\n    ]\n  }\n}\n</code></pre> template<pre><code>{% assign products_by_price = collection.products | sort: \"price\" -%}\n{% for product in products_by_price %}\n  &lt;h4&gt;{{ product.title }}&lt;/h4&gt;\n{% endfor %}\n</code></pre> output<pre><code>&lt;h4&gt;A Tie&lt;/h4&gt;\n&lt;h4&gt;A Hat&lt;/h4&gt;\n&lt;h4&gt;A Shoe&lt;/h4&gt;\n</code></pre>"},{"location":"filter_reference/#sort_natural","title":"sort_natural","text":"<p>0.1.0 </p> <pre><code>&lt;array&gt; | sort_natural[: &lt;string&gt;]\n</code></pre> <p>Return a copy of the input array with its elements sorted case-insensitively. Array items will be compared by their string representations, forced to lowercase.</p> <pre><code>{% assign my_array = \"zebra, octopus, giraffe, Sally Snake\" | split: \", \" -%}\n{{ my_array | sort_natural | join: \", \" }}\n</code></pre> output<pre><code>giraffe, octopus, Sally Snake, zebra\n</code></pre> <p>The optional argument is a sort key. If given, it should be the name of a property and the filter's input should be an array of objects. Array elements are compared using the lowercase string representation of that property.</p> data<pre><code>{\n  \"collection\": {\n    \"products\": [\n      { \"title\": \"A Shoe\", \"company\": \"Cool Shoes\" },\n      { \"title\": \"A Tie\", \"company\": \"alpha Ties\" },\n      { \"title\": \"A Hat\", \"company\": \"Beta Hats\" }\n    ]\n  }\n}\n</code></pre> template<pre><code>{% assign products_by_company = collection.products | sort_natural: \"company\" %}\n{% for product in products_by_company %}\n  &lt;h4&gt;{{ product.title }}&lt;/h4&gt;\n{% endfor %}\n</code></pre> output<pre><code>&lt;h4&gt;A Tie&lt;/h4&gt;\n&lt;h4&gt;A Hat&lt;/h4&gt;\n&lt;h4&gt;A Shoe&lt;/h4&gt;\n</code></pre>"},{"location":"filter_reference/#sort_numeric","title":"sort_numeric","text":"<p>0.1.0 </p> <pre><code>&lt;sequence&gt; | sort_numeric[: &lt;string&gt;]\n</code></pre> <p>Return a new array/list with items from the input sequence sorted by any integers and/or floats found in the string representation of each item. Note the difference between <code>sort_numeric</code> and <code>sort</code> in this example.</p> <pre><code>{% assign foo = '1.2.1, v1.10.0, v1.1.0, v1.2.2' | split: ', ' -%}\n{{ foo | sort_numeric | join: ', ' }}\n{{ foo | sort | join: ', ' }}\n\n{% assign bar = '107, 12, 0001' | split: ', ' -%}\n{{ bar | sort_numeric | join: ', ' }}\n{{ bar | sort | join: ', ' }}\n</code></pre> output<pre><code>v1.1.0, 1.2.1, v1.2.2, v1.10.0\n1.2.1, v1.1.0, v1.10.0, v1.2.2\n\n0001, 12, 107\n0001, 107, 12\n</code></pre> <p>The optional string argument is the name of a key/property to use as the sort key. In which case each item in the input sequence should be a dict/hash/mapping, each with said key/property.</p> <p><code>sort_numeric</code> will work as expected when given arrays/lists/tuples of integers, floats and/or Decimals, but will be slower than using standard <code>sort</code>.</p> <p>If an input sequence contains strings (or arbitrary objects that get stringified) that do not have numeric characters, they will be pushed to the end of the resulting list, probably in the same order as in the input sequence.</p>"},{"location":"filter_reference/#split","title":"split","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | split: &lt;string&gt;\n</code></pre> <p>Return an array of strings that are the input string split on the filter's argument string.</p> <pre><code>{% assign beatles = \"John, Paul, George, Ringo\" | split: \", \" -%}\n\n{% for member in beatles %}\n  {{- member }}\n{% endfor %}\n</code></pre> output<pre><code>John\nPaul\nGeorge\nRingo\n</code></pre> <p>If the argument is undefined or an empty string, the input will be split at every character.</p> <pre><code>{{ \"Hello there\" | split: nosuchthing | join: \"#\" }}\n</code></pre> output<pre><code>H#e#l#l#o# #t#h#e#r#e\n</code></pre>"},{"location":"filter_reference/#strip","title":"strip","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | strip\n</code></pre> <p>Return the input string with all leading and trailing whitespace removed. If the input is not a string, it will be converted to a string before stripping whitespace.</p> <pre><code>{{ \"          So much room for activities          \" | strip }}!\n</code></pre> output<pre><code>So much room for activities!\n</code></pre>"},{"location":"filter_reference/#strip_html","title":"strip_html","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | strip_html\n</code></pre> <p>Return the input string with all HTML tags removed.</p> <pre><code>{{ \"Have &lt;em&gt;you&lt;/em&gt; read &lt;strong&gt;Ulysses&lt;/strong&gt;?\" | strip_html }}\n</code></pre> output<pre><code>Have you read Ulysses?\n</code></pre>"},{"location":"filter_reference/#strip_newlines","title":"strip_newlines","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | strip_newlines\n</code></pre> <p>Return the input string with <code>\\n</code> and <code>\\r\\n</code> removed.</p> <pre><code>{% capture string_with_newlines %}\nHello\nthere\n{% endcapture -%}\n\n{{ string_with_newlines | strip_newlines }}\n</code></pre> output<pre><code>Hellothere\n</code></pre>"},{"location":"filter_reference/#sum","title":"sum","text":"<p>0.1.0 </p> <pre><code>&lt;array&gt; | sum[: &lt;string&gt;]\n</code></pre> <p>Return the sum of all numeric elements in an array.</p> <pre><code>{% assign array = '1,2,3' | split: ',' -%}\n{{ array | sum }}\n</code></pre> output<pre><code>6\n</code></pre> <p>If the optional string argument is given, it is assumed that array items are hash/dict/mapping-like, and the argument should be the name of a property/key. The values at <code>array[property]</code> will be summed.</p>"},{"location":"filter_reference/#t","title":"t","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | t[: &lt;string&gt;[, &lt;identifier&gt;: &lt;object&gt; ... ]] -&gt; &lt;string&gt;\n</code></pre> <p>Return the localized translation of the input message. For example, if a German Translations object is found in the current render context:</p> <pre><code>{{ \"Hello, World!\" | t }}\n</code></pre> output<pre><code>Hallo Welt!\n</code></pre> <p>If given, the first and only positional argument is a message context string. It will be used to give translators extra information about where the message is to be used. With the default configuration, keyword arguments <code>plural</code> and <code>count</code> are reserved for specifying a pluralizable message.</p> <pre><code>{{ \"Hello, World!\" | t: plural: 'Hello, Worlds!', count: 2 }}\n</code></pre> output<pre><code>Hallo Welten!\n</code></pre> <p>The remaining keyword arguments are used to populate translatable message variables. If <code>user.name</code> is <code>\"Sue\"</code>:</p> <pre><code>{{ \"Hello, %(you)s\" | t: you: user.name }}\n</code></pre> output<pre><code>Hallo Sue!\n</code></pre>"},{"location":"filter_reference/#times","title":"times","text":"<p>0.1.0 </p> <pre><code>&lt;number&gt; | times: &lt;number&gt;\n</code></pre> <p>Return the product of the input number and the argument. If either the input or argument are not a number, Liquid will try to convert them to a number. If that conversion fails, <code>0</code> is used instead.</p> <pre><code>{{ 3 | times: 2 }}\n{{ \"24\" | times: \"7\" }}\n{{ 183.357 | times: 12 }}\n</code></pre> output<pre><code>6\n168\n2200.284\n</code></pre>"},{"location":"filter_reference/#truncate","title":"truncate","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | truncate[: &lt;integer&gt;[, &lt;string&gt;]]\n</code></pre> <p>Return a truncated version of the input string. The first argument, length, defaults to <code>50</code>. The second argument defaults to an ellipsis (<code>...</code>).</p> <p>If the length of the input string is less than the given length (first argument), the input string will be truncated to <code>length</code> minus the length of the second argument, with the second argument appended.</p> <pre><code>{{ \"Ground control to Major Tom.\" | truncate: 20 }}\n{{ \"Ground control to Major Tom.\" | truncate: 25, \", and so on\" }}\n{{ \"Ground control to Major Tom.\" | truncate: 20, \"\" }}\n</code></pre> output<pre><code>Ground control to...\nGround control, and so on\nGround control to Ma\n</code></pre>"},{"location":"filter_reference/#truncatewords","title":"truncatewords","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | truncatewords[: &lt;integer&gt;[, &lt;string&gt;]]\n</code></pre> <p>Return the input string truncated to the specified number of words, with the second argument appended. The number of words (first argument) defaults to <code>15</code>. The second argument defaults to an ellipsis (<code>...</code>).</p> <p>If the input string already has fewer than the given number of words, it is returned unchanged.</p> <pre><code>{{ \"Ground control to Major Tom.\" | truncatewords: 3 }}\n{{ \"Ground control to Major Tom.\" | truncatewords: 3, \"--\" }}\n{{ \"Ground control to Major Tom.\" | truncatewords: 3, \"\" }}\n</code></pre> output<pre><code>Ground control to...\nGround control to--\nGround control to\n</code></pre>"},{"location":"filter_reference/#uniq","title":"uniq","text":"<p>0.1.0 </p> <pre><code>&lt;array&gt; | uniq[: &lt;string&gt;]\n</code></pre> <p>Return a copy of the input array with duplicate elements removed.</p> <pre><code>{% assign my_array = \"ants, bugs, bees, bugs, ants\" | split: \", \" -%}\n{{ my_array | uniq | join: \", \" }}\n</code></pre> output<pre><code>ants, bugs, bees\n</code></pre> <p>If an argument is given, it should be the name of a property and the filter's input should be an array of objects.</p> data<pre><code>{\n  \"collection\": {\n    \"products\": [\n      { \"title\": \"A Shoe\", \"company\": \"Cool Shoes\" },\n      { \"title\": \"A Tie\", \"company\": \"alpha Ties\" },\n      { \"title\": \"Another Tie\", \"company\": \"alpha Ties\" },\n      { \"title\": \"A Hat\", \"company\": \"Beta Hats\" }\n    ]\n  }\n}\n</code></pre> template<pre><code>{% assign one_product_from_each_company = collections.products | uniq: \"company\" -%}\n{% for product in one_product_from_each_company -%}\n  - product.title\n{% endfor %}\n</code></pre> output<pre><code>- A Shoe\n- A Tie\n- A Hat\n</code></pre>"},{"location":"filter_reference/#unit","title":"unit","text":"<p>0.1.0 </p> <pre><code>&lt;number&gt; | unit: &lt;string&gt;\n  [, denominator: &lt;number&gt;]\n  [, denominator_unit: &lt;string&gt;]\n  [, length: &lt;string&gt;]\n  [, format: &lt;string&gt;]\n</code></pre> <p>Return the input number formatted with the given units according to the current locale. The first, required positional argument is a CLDR measurement unit code.</p> <pre><code>{{ 12 | unit: 'length-meter' }}\n</code></pre> output<pre><code>12 meters\n</code></pre>"},{"location":"filter_reference/#length","title":"length","text":"<p><code>length</code> can be one of \"short\", \"long\" or \"narrow\", defaulting to \"long\".</p> <pre><code>{{ 12 | unit: 'length-meter' }}\n{{ 12 | unit: 'length-meter', length: 'short' }}\n{{ 12 | unit: 'length-meter', length: 'long' }}\n{{ 12 | unit: 'length-meter', length: 'narrow' }}\n</code></pre> output<pre><code>12 meters\n12 m\n12 meters\n12m\n</code></pre> <p>Or, if the current locale is set to <code>fr</code>.</p> <pre><code>{% with locale:\"fr\" %}\n  {{ 12 | unit: 'length-meter' }}\n  {{ 12 | unit: 'length-meter', length: 'short' }}\n  {{ 12 | unit: 'length-meter', length: 'long' }}\n  {{ 12 | unit: 'length-meter', length: 'narrow' }}\n{% endwith %}\n</code></pre> output<pre><code>12\u00a0m\u00e8tres\n12\u202fm\n12\u00a0m\u00e8tres\n12m\n</code></pre>"},{"location":"filter_reference/#format","title":"format","text":"<p><code>format</code> is an optional decimal format string, described in the Locale Data Markup Language specification (LDML).</p> <pre><code>{{ 12 | unit: 'length-meter', format: '#,##0.00' }}\n</code></pre> output<pre><code>12.00 meters\n</code></pre>"},{"location":"filter_reference/#compound-units","title":"Compound Units","text":"<p>If a <code>denominator</code> and/or <code>denominator_unit</code> is given, the value will be formatted as a compound unit.</p> <pre><code>{{ 150 | unit: 'kilowatt', denominator_unit: 'hour' }}\n{{ 32.5 | unit: 'ton', denominator: 15, denominator_unit: 'hour' }}\n</code></pre> output<pre><code>150 kilowatts per hour\n32.5 tons per 15 hours\n</code></pre> <p>Or, if the current locale is set to <code>fi</code>.</p> <pre><code>{% with locale:\"fi\" %}\n  {{ 150 | unit: 'kilowatt', denominator_unit: 'hour' }}\n  {{ 32.5 | unit: 'ton', denominator: 15, denominator_unit: 'hour' }}\n{% endwith %}\n</code></pre> output<pre><code>150 kilowattia / tunti\n32,5 am. tonnia/15 tuntia\n</code></pre>"},{"location":"filter_reference/#upcase","title":"upcase","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | upcase\n</code></pre> <p>Return the input string with all characters in uppercase.</p> <pre><code>{{ 'Hello, World!' | upcase }}\n</code></pre> output<pre><code>HELLO, WORLD!\n</code></pre>"},{"location":"filter_reference/#url_decode","title":"url_decode","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | url_decode\n</code></pre> <p>Return the input string with <code>%xx</code> escapes replaced with their single-character equivalents. Also replaces <code>'+'</code> with <code>' '</code>.</p> <pre><code>{{ \"My+email+address+is+bob%40example.com%21\" | url_decode }}\n</code></pre> output<pre><code>My email address is bob@example.com!\n</code></pre>"},{"location":"filter_reference/#url_encode","title":"url_encode","text":"<p>0.1.0 </p> <pre><code>&lt;string&gt; | url_encode\n</code></pre> <p>Return the input string with URL reserved characters %-escaped. Also replaces <code>' '</code> with <code>'+'</code>.</p> <pre><code>{{ My email address is bob@example.com! | url_encode }}\n</code></pre> output<pre><code>My+email+address+is+bob%40example.com%21\n</code></pre>"},{"location":"filter_reference/#where","title":"where","text":"<p>0.1.0 </p> <pre><code>&lt;array&gt; | where: &lt;string&gt;[, &lt;object&gt;]\n</code></pre> <p>Return a copy of the input array including only those objects that have a property, named with the first argument, equal to a value, given as the second argument. If a second argument is not given, only elements with the named property that are truthy will be included.</p> data<pre><code>{\n  \"products\": [\n    { \"title\": \"Vacuum\", \"type\": \"house\", \"available\": true },\n    { \"title\": \"Spatula\", \"type\": \"kitchen\", \"available\": false },\n    { \"title\": \"Television\", \"type\": \"lounge\", \"available\": true },\n    { \"title\": \"Garlic press\", \"type\": \"kitchen\", \"available\": true }\n  ]\n}\n</code></pre> <pre><code>All products:\n{% for product in products -%}\n- {{ product.title }}\n{% endfor %}\n\n{%- assign kitchen_products = products | where: \"type\", \"kitchen\" -%}\n\nKitchen products:\n{% for product in kitchen_products -%}\n- {{ product.title }}\n{% endfor %}\n\n{%- assign available_products = products | where: \"available\" -%}\n\nAvailable products:\n{% for product in available_products -%}\n- {{ product.title }}\n{% endfor %}\n</code></pre> output<pre><code>All products:\n- Vacuum\n- Spatula\n- Television\n- Garlic press\n\nKitchen products:\n- Spatula\n- Garlic press\n\nAvailable product:\n- Vacuum\n- Television\n- Garlic press\n</code></pre>"},{"location":"loading_templates/","title":"Loading templates","text":"<p>A template loader is a class inheriting from <code>BaseLoader</code>. It is responsible for finding template source text given a name or identifier, and will be called upon whenever you or a tag call <code>Environment.get_template()</code> or await <code>Environment.get_template_async()</code>.</p> <p>To use one of the template loaders described here, pass an instance of your chosen loader as the <code>loader</code> argument when constructing a Liquid <code>Environment</code>.</p>"},{"location":"loading_templates/#built-in-loaders","title":"Built-in loaders","text":""},{"location":"loading_templates/#dictionary-loader","title":"Dictionary loader","text":"<p><code>DictLoader</code> is a template loader that stores template source text in memory using a dictionary. If you're experimenting with Liquid or if all your templates are known at application startup time and they all fit in RAM, then <code>DictLoader</code> is a good choice.</p> <p>Simply pass a dictionary mapping template names to template source text to the <code>DictLoader</code> constructor.</p> <pre><code>from liquid2 import DictLoader\nfrom liquid2 import Environment\n\nenv = Environment(\n    loader=DictLoader(\n        {\n            \"index\": \"{% render 'header' %}\\nbody\\n{% render 'footer' %}\",\n            \"header\": \"some header\",\n            \"footer\": \"a footer\",\n        }\n    )\n)\n\ntemplate = env.get_template(\"index\")\nprint(template.render())\n</code></pre> output<pre><code>some header\nbody\na footer\n</code></pre>"},{"location":"loading_templates/#caching-dictionary-loader","title":"Caching dictionary loader","text":"<p><code>CachingDictLoader</code> is a dictionary loader that maintains an in-memory LRU cache of parsed templates, so as to avoid parsing the same source text multiple times unnecessarily.</p> <p>As well as a dictionary mapping template names to template source text, the <code>CachingDictLoader</code> constructor takes an optional <code>capacity</code> argument to control the maximum size of the cache. The default capacity is 300 templates.</p> <pre><code>from liquid2 import CachingDictLoader\nfrom liquid2 import Environment\n\nenv = Environment(\n    loader=CachingDictLoader(\n        {\n            \"index\": \"{% render 'header' %}\\nbody\\n{% render 'footer' %}\",\n            \"header\": \"some header\",\n            \"footer\": \"a footer\",\n        }\n    )\n)\n\ntemplate = env.get_template(\"index\")\nassert env.get_template(\"index\") is template\n</code></pre>"},{"location":"loading_templates/#file-system-loader","title":"File system loader","text":"<p><code>FileSystemLoader</code> is a template loader that reads source text from files on a file system. Its first argument, <code>search_path</code>, is a path to a folder containing Liquid templates, either as a string or <code>pathlib.Path</code>. <code>search_path</code> can also be a list of paths to search in order.</p> <p>In this example, calls to <code>Environment.get_template()</code> will look for templates in a folder called <code>templates</code> relative to the current directory.</p> <pre><code>from liquid2 import Environment\nfrom liquid2 import FileSystemLoader\n\nenv = Environment(loader=FileSystemLoader(\"templates/\"))\n</code></pre> <p>If a file called <code>index.html</code> exists in <code>./templates</code>, we could render it with <code>{% render 'index.html' %}</code>. To avoid having to include <code>.html</code> in every <code>render</code> tag, we can give <code>FileSystemLoader</code> a default file extension. It should include a leading <code>.</code>.</p> <pre><code>from liquid2 import Environment\nfrom liquid2 import FileSystemLoader\n\nenv = Environment(loader=FileSystemLoader(\"templates/\", ext=\".html\"))\n</code></pre> <p>If your templates are organized in sub folders of <code>./templates</code>, you can include the relative path to a template in a <code>render</code> tag, <code>{% render 'snippets/footer' %}</code>, but you won't be allowed to escape out of <code>./templates</code>. This would raise a <code>TemplateNotFoundError</code>.</p> <pre><code>{% render '../../path/to/private/file' %}\n</code></pre>"},{"location":"loading_templates/#caching-file-system-loader","title":"Caching file system loader","text":"<p><code>CachingFileSystemLoader</code> is a file system loader that maintains an in-memory LRU cache of parsed templates, so as to avoid reading and parsing the same source text multiple times unnecessarily.</p> <p>As well as <code>search_path</code> and <code>ext</code> arguments covered in the file system loader section above, <code>CachingFileSystemLoader</code> takes optional <code>auto_reload</code> and <code>capacity</code> arguments.</p> <p><code>capacity</code> is the maximum number of templates that can fit in the cache and defaults to <code>300</code> templates.</p> <p><code>auto_reload</code> is a flag to indicate if the template loader should check to see if each cached template has been modified since it was last loaded. If <code>True</code> and template source text has been modified on-disk, that source text will automatically be read and parsed again. <code>auto_reload</code> defaults to <code>True</code>.</p> <pre><code>from liquid2 import Environment\nfrom liquid2 import CachingFileSystemLoader\n\nloader = CachingFileSystemLoader(\n    \"/var/www/templates/\",\n    ext=\".liquid\",\n    auto_reload=True,\n    capacity=1000,\n)\n\nenv = Environment(loader=loader)\n</code></pre>"},{"location":"loading_templates/#package-loader","title":"Package loader","text":"<p><code>PackageLoader</code> is a template loader that reads template source text from Python packages installed in your Python environment. You should pass the name of the package and, optionally, one or more paths to directories containing template source text within the package. The default <code>package_path</code> is <code>templates</code>.</p> <p>Just like <code>FileSystemLoader</code>, <code>PackageLoader</code> accepts a default file extension, <code>ext</code>. This time it defaults to <code>.liquid</code>.</p> <pre><code>from liquid2 import Environment\nfrom liquid2 import PackageLoader\n\nloader = PackageLoader(\n    \"awesome_templates\",\n    package_path=\"path/to/templates\",\n    ext=\".liquid\",\n)\n\nenv = Environment(loader=loader)\n</code></pre>"},{"location":"loading_templates/#choice-loader","title":"Choice loader","text":"<p><code>ChoiceLoader</code> and <code>CachingChoiceLoader</code> are template loaders that delegate to a list of other template loaders. Each one is tried in turn until a template is found.</p> <p>When using <code>CachingChoiceLoader</code>, you should probably avoid delegating to other caching loaders.</p> <pre><code>from liquid2 import CachingFileSystemLoader\nfrom liquid2 import ChoiceLoader\nfrom liquid2 import DictLoader\nfrom liquid2 import Environment\n\nbase_loader = DictLoader({\"foo\": \"some template source text\"})\noverlay_loader = CachingFileSystemLoader(\"templates/\")\nloader = ChoiceLoader([overlay_loader, base_loader])\n\nenv = Environment(loader=loader)\n</code></pre>"},{"location":"loading_templates/#custom-loaders","title":"Custom loaders","text":"<p>If you want to load templates from a database or over a network, you'll need to write your own template loader. Simply inherit from <code>BaseLoader</code> and implement <code>get_source()</code> and, possibly, <code>get_source_async()</code>.</p> <p><code>get_source()</code> should return an instance of <code>TemplateSource</code>, which is a named tuple containing source text, the template's name, an optional <code>uptodate</code> callable and any extra data you want bound to the template.</p> <p>Take a look at source code for the built-in loaders for examples.</p>"},{"location":"loading_templates/#load-context","title":"Load context","text":"<p><code>get_source()</code> takes an optional <code>context</code> argument. When <code>Environment.get_template()</code> is called from a tag, like <code>render</code>, the active render context will be passed along to <code>get_source()</code>. Loaders can then choose to use render context data to dynamically refine template names and loader search paths.</p> <p>Arbitrary keyword arguments can also be passed to <code>Environment.get_template()</code>. These too are passed along to <code>get_source()</code>, and can also be used by custom template loaders to refine the template source search space.</p> <p>For example, all built-in tags that call <code>Environment.get_template()</code> pass a keyword argument called <code>tag</code> set to the name of the calling tag. We can use the tag name to mimic Shopify's <code>snippets</code> convention, where <code>{% include %}</code> and <code>{% render %}</code> automatically load templates from a subfolder call <code>snippets</code>.</p> <pre><code>from pathlib import Path\n\nfrom liquid2 import CachingFileSystemLoader\nfrom liquid2 import Environment\nfrom liquid2 import RenderContext\nfrom liquid2 import TemplateSource\n\n\nclass SnippetsFileSystemLoader(CachingFileSystemLoader):\n    def get_source(\n        self,\n        env: Environment,\n        template_name: str,\n        *,\n        context: RenderContext | None = None,\n        **kwargs: object,\n    ) -&gt; TemplateSource:\n        if kwargs.get(\"tag\") in (\"include\", \"render\"):\n            snippet = Path(\"snippets\").joinpath(template_name)\n            return super().get_source(\n                env, template_name=str(snippet), context=context, **kwargs\n            )\n        return super().get_source(\n            env, template_name=template_name, context=context, **kwargs\n        )\n</code></pre>"},{"location":"loading_templates/#matter","title":"Matter","text":"<p>Sometimes template source text comes with associated data. This could be meta data read from a database or front matter read from the top of the file containing template source text. The <code>TemplateSource</code> object returned from <code>get_source()</code> facilitates these cases with <code>matter</code>, a dictionary mapping strings to arbitrary objects that will be merged with environment and template globals and bound to the resulting <code>Template</code> instance.</p> <p>Here's an example of a template loader that reads front matter in YAML format.</p> <pre><code>import re\n\nimport yaml\n\nfrom liquid2 import CachingFileSystemLoader\nfrom liquid2 import Environment\nfrom liquid2 import RenderContext\nfrom liquid2 import TemplateSource\n\nRE_FRONT_MATTER = re.compile(r\"\\s*---\\s*(.*?)\\s*---\\s*\", re.MULTILINE | re.DOTALL)\n\n\nclass FrontMatterLoader(CachingFileSystemLoader):\n    def get_source(\n        self,\n        env: Environment,\n        template_name: str,\n        *,\n        context: RenderContext | None = None,\n        **kwargs: object,\n    ) -&gt; TemplateSource:\n        source, filename, uptodate, matter = super().get_source(env, template_name)\n        match = RE_FRONT_MATTER.search(source)\n\n        if match:\n            # TODO: add some yaml error handling here.\n            matter = yaml.load(match.group(1), Loader=yaml.SafeLoader)\n            source = source[match.end() :]\n\n        return TemplateSource(\n            source,\n            filename,\n            uptodate,\n            matter,\n        )\n</code></pre>"},{"location":"loading_templates/#caching-mixin","title":"Caching mixin","text":"<p>Use <code>CachingLoaderMixin</code> to add in-memory LRU caching to your custom template loaders. For example, here's the definition of <code>CachingDictLoader</code>.</p> <pre><code>from liquid2 import CachingLoaderMixin\nfrom liquid2 import DictLoader\n\nclass CachingDictLoader(CachingLoaderMixin, DictLoader):\n    \"\"\"A `DictLoader` that caches parsed templates in memory.\"\"\"\n\n    def __init__(\n        self,\n        templates: dict[str, str],\n        *,\n        auto_reload: bool = True,\n        namespace_key: str = \"\",\n        capacity: int = 300,\n    ):\n        super().__init__(\n            auto_reload=auto_reload,\n            namespace_key=namespace_key,\n            capacity=capacity,\n        )\n\n        DictLoader.__init__(self, templates)\n</code></pre>"},{"location":"migration/","title":"Migration guide","text":"<p>When compared to Python Liquid and Shopify/Liquid, Liquid2 adds features, subtly changes the syntax of Liquid templates and changes the template engine's Python API. This is not \"Python Liquid version 2\", but a Python implementation of \"Liquid2\", which is mostly backwards compatible with other implementations.</p>"},{"location":"migration/#approach-to-compatibility-and-stability","title":"Approach to compatibility and stability","text":"<p>With Python Liquid, our primary objectives are render behavior stability and Shopify/Liquid compatibility, in that order. We also have <code>liquid.future.Environment</code>, which sacrificed some stability for greater Shopify/Liquid compatibility as Shopify/Liquid and our understanding of it changed.</p> <p>Now, with Python Liquid2, render behavior stability is still the top priority, but the default environment deliberately deviates from Shopify/Liquid in several ways, \"fixing\" and adding often requested features that Shopify can't due to their large user base and the technical debt that comes with it.</p> <p>In most cases these fixes and features are backwards compatible with Shopify/Liquid, requiring little or no modification to legacy Liquid templates. To ease transition from legacy templates to Liquid2 templates, we include a <code>liquid2.shopify.Environment</code>, which is configured to include some legacy tags that didn't make it in to the default environment.</p>"},{"location":"migration/#why-is-render-stability-so-important","title":"Why is render stability so important?","text":"<p>When developing a conventional website, for example, templates are developed along side application code. Template authors and application developers might be different people or different teams, but templates are known at deployment time, and all templates can probably be parsed upfront and held in memory. In this scenario it's a pain if your template render engine introduces behavioral changes, but it's manageable.</p> <p>Python Liquid2 caters for situations where templates change and grow with an application's user base. Not only can templates change after the application is deployed, but the number of templates could be huge, far more than can be expected to fit in memory all at once.</p> <p>Behavioral stability is essential when application users are responsible for maintaining templates. It is impractical or unreasonable to expect authors to update their templates on demand.</p> <p>Whether shopify/Liquid compatibility is important to you or not, if you're developing a multi-tenant application where users are responsible for maintaining templates, you should seriously consider building in an opt-in upgrade path for template authors to transition to updated syntax and features.</p>"},{"location":"migration/#new-features","title":"New features","text":""},{"location":"migration/#more-whitespace-control","title":"More whitespace control","text":"<p>(docs)</p> <p>Along with a <code>default_trim</code> configuration option, tags and the output statement now support <code>+</code>, <code>-</code> and <code>~</code> for controlling whitespace in templates. By default, <code>~</code> will remove newlines but retain space and tab characters.</p> <p>Here we use <code>~</code> to remove the newline after the opening <code>for</code> tag, but preserve indentation before <code>&lt;li&gt;</code>.</p> <pre><code>&lt;ul&gt;\n{% for x in (1..4) ~%}\n  &lt;li&gt;{{ x }}&lt;/li&gt;\n{% endfor -%}\n&lt;/ul&gt;\n</code></pre> output<pre><code>&lt;ul&gt;\n  &lt;li&gt;1&lt;/li&gt;\n  &lt;li&gt;2&lt;/li&gt;\n  &lt;li&gt;3&lt;/li&gt;\n  &lt;li&gt;4&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>"},{"location":"migration/#array-construction-syntax","title":"Array construction syntax","text":"<p>Filtered expression (those found in output statements, the <code>assign</code> tag and the <code>echo</code> tag) and <code>for</code> tag expressions support array literal syntax. We don't use the traditional <code>[item1, item2, ...]</code> syntax with square brackets because square brackets are already used for variables (<code>[\"some variable with spaces\"]</code> is a valid variable).</p> <pre><code>{% assign my_array = a, b, '42', false -%}\n{% for item in my_array -%}\n    - {{ item }}\n{% endfor %}\n</code></pre> <p>or, using a <code>{% liquid %}</code> tag:</p> <pre><code>{% liquid\n    for item in a, b, '42', false\n        echo \"- ${item}\\n\"\n    endfor %}\n</code></pre> <p>With <code>a</code> set to <code>\"Hello\"</code> and <code>b</code> set to <code>\"World\"</code>, both of the examples above produce the following output.</p> output<pre><code>- Hello\n- World\n- 42\n- false\n</code></pre>"},{"location":"migration/#string-interpolation","title":"String interpolation","text":"<p>String literals support interpolation using JavaScript-style <code>${</code> and <code>}</code> delimiters. Liquid template strings don't use backticks like JavaScript. Any single or double quoted string can use <code>${variable_name}</code> placeholders for automatic variable substitution.</p> <p><code>${</code> can be escaped with <code>\\${</code> to prevent variable substitution.</p> <p>Liquid template strings are effectively a shorthand alternative to <code>capture</code> tags or chains of <code>append</code> filters. These two tags are equivalent.</p> <pre><code>{% capture greeting %}\nHello, {{ you | capitalize }}!\n{% endcapture %}\n\n{% assign greeting = 'Hello, ${you | capitalize}!' %}\n</code></pre>"},{"location":"migration/#logical-not","title":"Logical <code>not</code>","text":"<p>Logical expressions now support negation with the <code>not</code> operator and grouping terms with parentheses by default. Previously this was an opt-in feature.</p> <p>In this example, <code>{% if not user %}</code> is equivalent to <code>{% unless user %}</code>, however, <code>not</code> can also be used after <code>and</code> and <code>or</code>, like <code>{% if user.active and not user.title %}</code>, potentially saving nested <code>if</code> and <code>unless</code> tags.</p> <pre><code>{% if not user %}\n  please log in\n{% else %}\n  hello user\n{% endif %}\n</code></pre>"},{"location":"migration/#ternary-expressions","title":"Ternary expressions","text":"<p>Inline conditional expression are now supported by default. Previously this was an opt-in feature. If omitted, the <code>else</code> branch defaults to an instance of <code>Undefined</code>.</p> <pre><code>{{ a if b else c }}\n{{ a | upcase if b == 'foo' else c || split }}\n</code></pre>"},{"location":"migration/#dedicated-comment-syntax","title":"Dedicated comment syntax","text":"<p>Comments surrounded by <code>{#</code> and <code>#}</code> are enabled by default. Additional <code>#</code>'s can be added to comment out blocks of markup that already contain comments, as long as hashes are balanced.</p> <pre><code>{## comment this out for now\n{% for x in y %}\n    {# x could be empty #}\n    {{ x | default: TODO}}\n{% endfor %}\n##}\n</code></pre>"},{"location":"migration/#better-string-literal-parsing","title":"Better string literal parsing","text":"<p>String literals are now allowed to contain markup delimiters (<code>{{</code>, <code>}}</code>, <code>{%</code>, <code>%}</code>, <code>{#</code> and <code>#}</code>) and support c-like escape sequence to allow for including quote characters, literal newline characters and <code>\\uXXXX</code> Unicode code points.</p> <pre><code>{% assign x = \"Hi \\uD83D\\uDE00!\" %}\n{{ x }}\n</code></pre> output<pre><code>Hi \ud83d\ude00!\n</code></pre>"},{"location":"migration/#unicode-identifiers","title":"Unicode identifiers","text":"<p>Identifiers and paths resolving to variables can contain Unicode characters (templates are assumed to be UTF-8 encoded). For example:</p> <pre><code>{% assign \ud83d\ude00 = 'smiley' %}\n{{ \ud83d\ude00 }}\n</code></pre>"},{"location":"migration/#scientific-notation","title":"Scientific notation","text":"<p>Integer and float literals can use scientific notation, like <code>1.2e3</code> or <code>1e-2</code>.</p>"},{"location":"migration/#common-argument-delimiters","title":"Common argument delimiters","text":"<p>Filter and tag named arguments can be separated by a <code>:</code> or <code>=</code>. Previously only <code>:</code> was allowed.</p>"},{"location":"migration/#template-inheritance","title":"Template inheritance","text":"<p>(docs)</p> <p>Template inheritance is now built in. Previously <code>{% extends %}</code> and <code>{% block %}</code> tags were available from a separate package.</p>"},{"location":"migration/#macros","title":"Macros","text":"<p><code>macro and call</code> tags are enabled by default.</p>"},{"location":"migration/#i18n-and-l10n","title":"i18n and l10n","text":"<p>(docs)</p> <p>Internationalization and localization tags and filters are now built in and enabled by default. Previously these were in a separate package.</p> <p>See currency, datetime, money, decimal, unit, gettext, t and translate.</p>"},{"location":"migration/#serializable-templates","title":"Serializable templates","text":"<p>Instances of <code>Template</code> are now serializable. Use <code>str(template)</code> or <code>pickle.dump(template)</code>.</p>"},{"location":"migration/#better-exceptions","title":"Better exceptions","text":"<p>(docs)</p> <p>Error messages have been improved and exceptions inheriting from <code>LiquidError</code> expose line and column numbers, and have <code>detailed_message()</code> and error <code>context()</code> methods.</p> <pre><code>{% assign foo = (0..3) %}\n{% for x foo %}\n    {{ x }}\n{% endfor %}\n</code></pre> error message<pre><code>liquid2.exceptions.LiquidSyntaxError: expected IN, found WORD\n  -&gt; '{% for x foo %}' 2:9\n  |\n2 | {% for x foo %}\n  |          ^^^ expected IN, found WORD\n</code></pre>"},{"location":"migration/#features-that-have-been-removed","title":"Features that have been removed","text":"<ul> <li>We no longer offer \"lax\" or \"warn\" modes, previously controlled by the <code>tolerance</code> argument to <code>Environment</code>. The assertion is that errors should be loud and we should be made aware as early as possible, whether you're an experienced developer or not.</li> <li>It's not currently possible to change Liquid markup delimiters (<code>{{</code>, <code>}}</code>, <code>{%</code> and <code>%}</code>).</li> <li>Async filters have not been implemented, but can be if there is a demand.</li> <li>Contextual template analysis has not been implemented, but can be if there is a demand.</li> <li>Template tag analysis (analyzing tokens instead of a syntax tree) has not been implemented, but can be if there is a demand.</li> <li>Liquid Babel used to allow simple, zero-argument filters in the arguments to the <code>translate</code> tag. The <code>translate</code> tag bundled in to Liquid2 does not allow the use of filters here.</li> <li>There's no Django template backend or Flask extension for Python Liquid2. Open an issue if these are things that would be useful to you.</li> <li>The Liquid JSONPath project has not yet been ported to Python Liquid2. Open an issue if you'd like to see JSONPath syntax added to Liquid2.</li> </ul>"},{"location":"migration/#api-changes","title":"API changes","text":"<p>These are the most notable changes. Please raise an issue or start a discussion if I've missed anything or you need help with migration.</p> <ul> <li>Package level <code>Template</code> can no longer be used as a convenience function for creating a template from a string. Use <code>parse()</code>, <code>render()</code> or <code>DEFAULT_ENVIRONMENT.from_string()</code> instead.</li> <li><code>StrictUndefined</code> now plays nicely with the <code>default</code> filter. Previously we had a separate <code>StrictDefaultUndefined</code> class.</li> <li><code>FileSystemLoader</code> now takes an optional default file extension to use when looking for files that don't already have an extension. Previously there was a separate <code>FileExtensionLoader</code>.</li> <li><code>AwareBoundTemplate</code> (a template with a built-in <code>template</code> drop) has been removed, but can be added as a feature later if there is a demand.</li> <li>The <code>auto_reload</code> and <code>cache_size</code> arguments to <code>Environment</code> have been removed. Now caching is handle by template loaders, not the environment. For example, pass a <code>CachingFileSystemLoader</code> as the <code>loader</code> argument to <code>Environment</code> instead of a <code>FileSystemLoader</code>.</li> <li>The <code>strict_filters</code> argument to <code>Environment</code> has been removed. Unknown filters now always raise an <code>UnknownFilterError</code>.</li> <li><code>TemplateNotFound</code> has been renamed to <code>TemplateNotFoundError</code>.</li> <li><code>Context</code> has been renamed to <code>RenderContext</code> and now takes a mandatory <code>template</code> argument instead of <code>env</code>. All other arguments to <code>RenderContext</code> are now keyword only.</li> <li><code>FilterValueError</code> and <code>FilterArgumentError</code> have been removed. <code>LiquidValueError</code> and <code>LiquidTypeError</code> should be used instead. In some cases where <code>FilterValueError</code> was deliberately ignored before, <code>LiquidValueError</code> is now raised.</li> <li>The exception <code>NoSuchFilterFunc</code>, raised when rendering a template that uses a filter that is not defined in <code>Environment.filters</code>, has been renamed to <code>UnknownFilterError</code>.</li> <li>The <code>@liquid_filter</code> decorator has been removed. Now filter implementations are expected to raise a <code>LiquidTypeError</code> in the event of an argument with an unacceptable type.</li> <li><code>Environment.tags</code> is now a mapping of tag names to <code>Tag</code> instances. It used to be a mapping of names to <code>Tag</code> classes.</li> </ul>"},{"location":"migration/#custom-tags","title":"Custom tags","text":"<p>docs</p> <p>The lexer has been completely rewritten and the tokens it produces bear little resemblance to those produced by any of the several parsing functions from Python Liquid. Now we have a single lexer that scans source text content, tags, statements and expressions in a single pass, and a parser that delegates the parsing of those tokens to classes implementing <code>Tag</code>.</p> <p>These changes were necessary to support \"proper\" string literals with escaping, Unicode support and interpolation.</p> <p>As before, <code>Tag</code> instances are responsible for returning <code>Node</code>s from <code>Tag.parse()</code>. And nodes still have the familiar <code>render_to_output()</code> abstract method.</p> <p>As a result of these changes, custom tags are now limited to using tokens recognized by the lexer. Previously, custom tags would be passed their expression as a string to be parsed however you see fit, now tags are passed a sequence of tokens.</p> <p>For now I recommend familiarizing yourself with the different tokens generated by the lexer and have a look at the custom tags docs. Note that the <code>TokenStream</code> interface has changed too.</p> <p>As always, open an issue or start a discussion if you need any help with migration.</p>"},{"location":"migration/#package-dependencies","title":"Package dependencies","text":"<p>The following packages are dependencies of Python Liquid2.</p> <ul> <li>Markupsafe&gt;=3</li> <li>Babel&gt;=2</li> <li>python-dateutil</li> <li>pytz</li> <li>typing-extensions</li> </ul>"},{"location":"optional_filters/","title":"Optional filters","text":""},{"location":"optional_filters/#base64_decode","title":"base64_decode","text":"<p>0.1.0 </p> <p><code>&lt;string&gt; | base64_decode</code></p> <p>Decode a base64 encoded string. The decoded value is assumed to be UTF-8 and will be decoded as UTF-8.</p> <p>Warning</p> <p>While Python Liquid assumes UTF-8 character encoding, Ruby Liquid does not seem to do so, potentially introducing byte strings into the render context.</p> <pre><code>{{ 'SGVsbG8sIFdvcmxkIQ==' | base64_decode }}\n</code></pre> output<pre><code>Hello, World!\n</code></pre> <p>If the input value is not a valid base64 encoded string, an exception will be raised.</p> <pre><code>{{ 'notbase64' | base64_decode }}\n</code></pre> output<pre><code>FilterError: invalid base64-encoded string, on line 1\n</code></pre>"},{"location":"optional_filters/#base64_encode","title":"base64_encode","text":"<p>0.1.0 </p> <p><code>&lt;string&gt; | base64_encode</code></p> <p>Encode a string using base64.</p> <p>Note</p> <p>Python Liquid returns a <code>str</code> from <code>base64_encode</code>, not <code>bytes</code>.</p> <pre><code>{{ 'Hello, World!' | base64_encode }}\n</code></pre> output<pre><code>SGVsbG8sIFdvcmxkIQ==\n</code></pre> <p>If the input value is not a string, it will be converted to a string before base64 encoding.</p> <pre><code>{{ 5 | base64_encode }}\n</code></pre> output<pre><code>NQ==\n</code></pre>"},{"location":"optional_filters/#base64_url_safe_decode","title":"base64_url_safe_decode","text":"<p>0.1.0 </p> <p><code>&lt;string&gt; | base64_url_safe_decode</code></p> <p>Decode a URL safe base64 encoded string. Substitutes <code>-</code> instead of <code>+</code> and <code>_</code> instead of <code>/</code> in the standard base64 alphabet. The decoded value is assumed to be UTF-8 and will be decoded as UTF-8.</p> <p>Warning</p> <p>While Python Liquid assumes UTF-8 character encoding, Ruby Liquid does not seem to do so, potentially introducing byte strings into the render context.</p> <pre><code>{{ 'SGVsbG8sIFdvcmxkIQ==' | base64_url_safe_decode }}\n</code></pre> output<pre><code>Hello, World!\n</code></pre> <p>If the input value is not a valid base64 encoded string, an exception will be raised.</p> <pre><code>{{ 'notbase64' | base64_url_safe_decode }}\n</code></pre> output<pre><code>FilterError: invalid base64-encoded string, on line 1\n</code></pre>"},{"location":"optional_filters/#base64_url_safe_encode","title":"base64_url_safe_encode","text":"<p>0.1.0 </p> <p><code>&lt;string&gt; | base64_url_safe_encode</code></p> <p>Encode a string using URL safe base64. Substitutes <code>-</code> instead of <code>+</code> and <code>_</code> instead of <code>/</code> in the standard base64 alphabet.</p> <p>Note</p> <p>Python Liquid returns a <code>str</code> from <code>base64_url_safe_encode</code>, not <code>bytes</code>.</p> <pre><code>{{ 'Hello, World!' | base64_url_safe_encode }}\n</code></pre> output<pre><code>SGVsbG8sIFdvcmxkIQ==\n</code></pre> <p>If the input value is not a string, it will be converted to a string before base64 encoding.</p> <pre><code>{{ 5 | base64_url_safe_encode }}\n</code></pre> output<pre><code>NQ==\n</code></pre>"},{"location":"optional_tags/","title":"Optional tags","text":"<p>The tags described here are not enabled by default in Python Liquid2.</p>"},{"location":"optional_tags/#tablerow","title":"tablerow","text":"<p>0.1.0 </p> <pre><code>{% tablerow &lt;identifier&gt; in &lt;expression&gt;\n    [ cols: &lt;expression&gt; ] [ limit: &lt;expression&gt; ] [ offset: &lt;expression&gt; ] %}\n  &lt;liquid markup&gt;\n{% endtablerow %}\n</code></pre> <p>The <code>tablerow</code> tag renders HTML <code>&lt;tr&gt;</code> and <code>&lt;td&gt;</code> elements for each item in an iterable. Text inside <code>&lt;td&gt;</code> elements will be the result of rendering the tag's block.</p> data<pre><code>{\n  \"collection\": {\n    \"products\": [\n      { \"title\": \"Cool Shirt\" },\n      { \"title\": \"Alien Poster\" },\n      { \"title\": \"Batman Poster\" },\n      { \"title\": \"Bullseye Shirt\" },\n      { \"title\": \"Another Classic Vinyl\" },\n      { \"title\": \"Awesome Jeans\" }\n    ]\n  }\n}\n</code></pre> template<pre><code>&lt;table&gt;\n{% tablerow product in collection.products %}\n  {{ product.title }}\n{% endtablerow %}\n&lt;/table&gt;\n</code></pre> output<pre><code>&lt;table&gt;\n  &lt;tr class=\"row1\"&gt;\n    &lt;td class=\"col1\"&gt;Cool Shirt&lt;/td&gt;\n    &lt;td class=\"col2\"&gt;Alien Poster&lt;/td&gt;\n    &lt;td class=\"col3\"&gt;Batman Poster&lt;/td&gt;\n    &lt;td class=\"col4\"&gt;Bullseye Shirt&lt;/td&gt;\n    &lt;td class=\"col5\"&gt;Another Classic Vinyl&lt;/td&gt;\n    &lt;td class=\"col6\"&gt;Awesome Jeans&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>"},{"location":"optional_tags/#cols","title":"cols","text":"<p>By default, <code>tablerow</code> will output one row with one column for each item in the sequence. Use the <code>cols</code> parameter to set the number of columns.</p> template<pre><code>{% tablerow product in collection.products cols:2 %}\n  {{ product.title }}\n{% endtablerow %}\n</code></pre> output<pre><code>&lt;table&gt;\n  &lt;tr class=\"row1\"&gt;\n    &lt;td class=\"col1\"&gt;Cool Shirt&lt;/td&gt;\n    &lt;td class=\"col2\"&gt;Alien Poster&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr class=\"row2\"&gt;\n    &lt;td class=\"col1\"&gt;Batman Poster&lt;/td&gt;\n    &lt;td class=\"col2\"&gt;Bullseye Shirt&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr class=\"row3\"&gt;\n    &lt;td class=\"col1\"&gt;Another Classic Vinyl&lt;/td&gt;\n    &lt;td class=\"col2\"&gt;Awesome Jeans&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>"},{"location":"optional_tags/#limit","title":"limit","text":"<p>If <code>limit</code> is specified, the <code>tablerow</code> loop will stop after the given number of iterations.</p> template<pre><code>&lt;table&gt;\n{% tablerow product in collection.products limit:2 %}\n  {{ product.title }}\n{% endtablerow %}\n&lt;/table&gt;\n</code></pre> output<pre><code>&lt;table&gt;\n  &lt;tr class=\"row1\"&gt;\n    &lt;td class=\"col1\"&gt;Cool Shirt&lt;/td&gt;\n    &lt;td class=\"col2\"&gt;Alien Poster&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>"},{"location":"optional_tags/#offset","title":"offset","text":"<p>If <code>offset</code> is specified, the <code>tablerow</code> loop will start at the given index in the sequence.</p> template<pre><code>&lt;table&gt;\n{% tablerow product in collection.products offset:4 %}\n  {{ product.title }}\n{% endtablerow %}\n&lt;/table&gt;\n</code></pre> output<pre><code>&lt;table&gt;\n  &lt;tr class=\"row1\"&gt;\n    &lt;td class=\"col1\"&gt;Another Classic Vinyl&lt;/td&gt;\n    &lt;td class=\"col2\"&gt;Awesome Jeans&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>"},{"location":"optional_tags/#tablerowloop","title":"tablerowloop","text":"<p>A <code>tablerowloop</code> object is available inside every <code>tablerow</code> block.</p> Property Description Type <code>length</code> The length of the sequence being iterated integer <code>index</code> The 1-base index of the current iteration integer <code>index0</code> The 0-base index of the current iteration integer <code>rindex</code> The 1-base index of the current iteration counting from the end integer <code>rindex0</code> The 0-base index of the current iteration counting from the end integer <code>first</code> <code>true</code> if the current iteration is the first, <code>false</code> otherwise bool <code>last</code> <code>true</code> is the current iteration is the last, <code>false</code> otherwise bool <code>col</code> The 1-based column number integer <code>col0</code> The 0-based column number integer <code>col_first</code> <code>true</code> if the current column is the first column, <code>false</code> otherwise integer <code>col_last</code> <code>true</code> if the current column is the last column, <code>false</code> otherwise integer <code>row</code> The current row number of the table integer template<pre><code>{% tablerow product in collection.products cols:2 %}\n  {{ product.title }} - {{ tablerowloop.col0 }}\n{% endtablerow %}\n</code></pre> output<pre><code>&lt;table&gt;\n  &lt;tr class=\"row1\"&gt;\n    &lt;td class=\"col1\"&gt;Cool Shirt - 0&lt;/td&gt;\n    &lt;td class=\"col2\"&gt;Alien Poster - 1&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr class=\"row2\"&gt;\n    &lt;td class=\"col1\"&gt;Batman Poster - 0&lt;/td&gt;\n    &lt;td class=\"col2\"&gt;Bullseye Shirt&lt; - 1/td&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr class=\"row3\"&gt;\n    &lt;td class=\"col1\"&gt;Another Classic Vinyl - 0&lt;/td&gt;\n    &lt;td class=\"col2\"&gt;Awesome Jeans - 1&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>"},{"location":"quick_start/","title":"Quick start","text":"<p>This page gets you started using Liquid with Python. See Liquid syntax for an introduction to writing Liquid templates.</p>"},{"location":"quick_start/#install","title":"Install","text":"<p>Install Python Liquid2 from PyPi using pip:</p> <pre><code>python -m pip install python-liquid2\n</code></pre> <p>Or Pipenv:</p> <pre><code>pipenv install python-liquid2\n</code></pre> <p>Or Poetry:</p> <pre><code>poetry add python-liquid2\n</code></pre>"},{"location":"quick_start/#render","title":"<code>render()</code>","text":"<p>Here's a very simple example that renders a template from a string of text with the package-level <code>render()</code> function. The template has just one placeholder variable <code>you</code>, which we've given the value <code>\"World\"</code>.</p> <pre><code>from liquid2 import render\n\nprint(render(\"Hello, {{ you }}!\", you=\"World\"))\n# Hello, World!\n</code></pre>"},{"location":"quick_start/#parse","title":"<code>parse()</code>","text":"<p>Often you'll want to render the same template several times with different variables. We can parse source text without immediately rendering it using the <code>parse()</code> function. <code>parse()</code> returns a <code>Template</code> instance with a <code>render()</code> method.</p> <pre><code>from liquid2 import parse\n\ntemplate = parse(\"Hello, {{ you }}!\")\nprint(template.render(you=\"World\"))  # Hello, World!\nprint(template.render(you=\"Liquid\"))  # Hello, Liquid!\n</code></pre>"},{"location":"quick_start/#configure","title":"Configure","text":"<p>Both <code>parse()</code> and <code>render()</code> are convenience functions that use the default Liquid environment. For all but the simplest cases you'll want to configure an instance of <code>Environment</code>, then load and render templates from that.</p> <pre><code>from liquid2 import CachingFileSystemLoader\nfrom liquid2 import Environment\n\nenv = Environment(\n    auto_escape=True,\n    loader=CachingFileSystemLoader(\"./templates\"),\n)\n</code></pre> <p>Then, using <code>env.from_string()</code> or <code>env.get_template()</code>, we can create a <code>Template</code> from a string or read from the file system, respectively.</p> <pre><code># ... continued from above\ntemplate = env.from_string(\"Hello, {{ you }}!\")\nprint(template.render(you=\"World\"))  # Hello, World!\n\n# Try to load \"./templates/index.html\"\nanother_template = env.get_template(\"index.html\")\ndata = {\"some\": {\"thing\": [1, 2, 3]}}\nresult = another_template.render(**data)\n</code></pre> <p>Unless you happen to have a relative folder called <code>templates</code> with a file called <code>index.html</code> within it, we would expect a <code>TemplateNotFoundError</code> to be raised when running the example above.</p>"},{"location":"quick_start/#whats-next","title":"What's next?","text":"<p>Read more about configuring Liquid environments, template loaders and managing render context data.</p>"},{"location":"render_context/","title":"Render context data","text":"<p>The result of rendering a template depends on the context in which it is rendered. That is, available variables and their values, and options set on the bound Environment.</p> <p>Template global variables are those added to a render context by application developers. From a template author's perspective, globals are read-only and are available to all templates, including those rendered with the <code>{% render %}</code> tag.</p> <p>Template local variables are those defined by template authors using <code>{% assign %}</code> and <code>{% capture %}</code>. Local variables can mask names defined in the global namespace, but never change them.</p> <p>Named counters created with <code>{% increment %}</code> and <code>{% decrement %}</code> have their own namespace. Outside of <code>increment</code> or <code>decrement</code>, Liquid will look in the counters namespace last, after locals and globals.</p>"},{"location":"render_context/#environment-globals","title":"Environment globals","text":"<p>The <code>Environment</code> constructor accepts an optional <code>globals</code> argument, which should be a dictionary mapping variable names to their values. These variables get pinned to the environment and will be automatically merged with other variables for every template rendered from that environment.</p> <pre><code>from liquid2 import Environment\n\nenv = Environment(globals={\"site_name\": \"MySite\"})\n\ntemplate = env.from_string(\"\"\"\\\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;{{ site_name }}&lt;/title&gt;\n&lt;/head&gt;\n&lt;/html&gt;\n\"\"\")\n\nprint(template.render())\n</code></pre> output<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;MySite&lt;/title&gt;\n&lt;/head&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"render_context/#template-globals","title":"Template globals","text":"<p>Similar to Environment globals, you can pin global variables to a template when calling <code>from_string()</code> or <code>get_template()</code>. Global variables set on a template will be merged with any set on its environment and added to each render context automatically.</p> <p>If environment and template globals have conflicting names, template variables take priority over environment variables.</p> <pre><code>from liquid2 import Environment\n\nenv = Environment(globals={\"site_name\": \"MySite\"})\n\nsource = \"\"\"\\\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;{{ site_name }} - {{ page.name }}&lt;/title&gt;\n&lt;/head&gt;\n&lt;/html&gt;\n\"\"\"\n\ntemplate = env.from_string(source, globals={\"page\": {\"name\": \"Blog\"}})\nprint(template.render())\n</code></pre> output<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;MySite - Blog&lt;/title&gt;\n&lt;/head&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"render_context/#render-arguments","title":"Render arguments","text":"<p>Keyword arguments passed to <code>Template.render()</code> are also added to the global namespace, although, unlike environment and template globals, they do not persist between calls to <code>render()</code>.</p> <p><code>render()</code> keyword arguments take priority over environment and template globals.</p> <pre><code>from liquid import Environment\n\nenv = Environment(globals={\"site_name\": \"MySite\"})\n\nsource = \"\"\"\\\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;{{ site_name }} - {{ page.name }}&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;p&gt;Hello, {{ user.name }}&lt;/p&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n\"\"\"\n\ntemplate = env.from_string(source, globals={\"page\": {\"name\": \"Blog\"}})\nprint(template.render(user = {\"name\": \"Sally\"}))\n</code></pre> output<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;MySite - Blog&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;p&gt;Hello, Sally&lt;/p&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"render_context/#matter","title":"Matter","text":"<p>Matter variables are those pinned to a <code>Template</code> by a template loader. They could be from a front matter loader or extra meta data from a database loader.</p> <p>These, too, are merged into the global namespace, taking priority over template globals, but not <code>render()</code> keyword arguments.</p>"},{"location":"rendering_templates/","title":"Rendering templates","text":""},{"location":"rendering_templates/#as-simple-as-possible","title":"As simple as possible","text":"<p>For one-off templates using nothing but the default tags and filters, and without the possibility of including, rendering or extending other templates, use the package-level <code>render()</code> function.</p> <p>It takes template source text as a string and any number of keyword arguments that will be available to templates as variables. <code>render()</code> returns a string.</p> <pre><code>from liquid2 import render\n\nresult = render(\"Hello, {{ you }}!\", you=\"World\")\n</code></pre> <p>If you want to render the same template multiple times with different data, use the package-level <code>parse()</code> function. It takes template source text as a string, an optional name for the template and an optional dictionary of variables to attach to the template. An instance of <code>Template</code> with a <code>render()</code> method is returned.</p> <pre><code>from liquid2 import parse\n\ntemplate = parse(\"Hello, {{ you }}!\")\nresult = template.render(you=\"World\")\nanother_result = template.render(you=\"Liquid\")\n</code></pre>"},{"location":"rendering_templates/#common-configuration","title":"Common configuration","text":"<p>Often, at a minimum, you'll want to configure a template loader that reads template source text from a file system. Doing this will tell the template engine where to look for templates when including, rendering or extending other templates.</p> <pre><code>from liquid2 import Environment\nfrom liquid2 import CachingFileSystemLoader\n\nenv = Environment(\n    loader=CachingFileSystemLoader(\"path/to/templates\", ext=\".html\"),\n)\n</code></pre> <p>Now, if there's a file called \"main.html\" in \"/path/to/templates/\", we can use <code>env.get_template()</code> to load and parse it, along with any templates it includes, renders or extends.</p> <pre><code># ... continued from above\ntemplate = env.get_template(\"main.html\")\ndata = {\"foo\": 42, \"bar\": \"hello\"}\nresult = render(**data)\n</code></pre> <p>See Liquid environments for more information about configuring an <code>Environment</code> and loading templates for details of the built-in template loaders.</p>"},{"location":"static_analysis/","title":"Static template analysis","text":"<p>Instances of <code>Template</code>, as returned by <code>parse()</code>, <code>from_string()</code> and <code>get_template()</code>, include several methods for inspecting a template's variable, tag a filter usage, without rendering the template.</p> <p>By default, all of these methods will try to load and analyze included, rendered and extended templates too. Set the <code>include_partials</code> keyword only argument to <code>False</code> to disable automatic loading and analysis of partial/parent templates.</p>"},{"location":"static_analysis/#variables","title":"Variables","text":"<p><code>variables()</code> and <code>variables_async()</code> return a list of distinct variables used in the template, without path segments. The list will include variables that are local to the template, like those crated with <code>{% assign %}</code> and <code>{% capture %}</code>, or are in scope from <code>{% for %}</code> tags.</p> <pre><code>from liquid2 import parse\n\nsource = \"\"\"\\\nHello, {{ you }}!\n{% assign x = 'foo' | upcase %}\n\n{% for ch in x %}\n    - {{ ch }}\n{% endfor %}\n\nGoodbye, {{ you.first_name | capitalize }} {{ you.last_name }}\nGoodbye, {{ you.first_name }} {{ you.last_name }}\n\"\"\"\n\ntemplate = parse(source)\nprint(template.variables())\n</code></pre> output<pre><code>['you', 'x', 'ch']\n</code></pre>"},{"location":"static_analysis/#variable-paths","title":"Variable paths","text":"<p><code>variable_paths()</code> and <code>variable_paths_async()</code> return a list of variables used in the template, including all path segments. The list will include variables that are local to the template, like those crated with <code>{% assign %}</code> and <code>{% capture %}</code>, or are in scope from <code>{% for %}</code> tags.</p> <pre><code># ... continued from above\n\nprint(template.variable_paths())\n</code></pre> output<pre><code>['you.first_name', 'you', 'you.last_name', 'x', 'ch']\n</code></pre>"},{"location":"static_analysis/#variable-segments","title":"Variable segments","text":"<p><code>variable_segments()</code> and <code>variable_segments_async()</code> return a list of variables used in the template, each as a list of segments. The list will include variables that are local to the template, like those crated with <code>{% assign %}</code> and <code>{% capture %}</code>, or are in scope from <code>{% for %}</code> tags.</p> <pre><code># ... continued from above\n\nprint(template.variable_segments())\n</code></pre> output<pre><code>[\n    [\"you\", \"last_name\"],\n    [\"you\"],\n    [\"you\", \"first_name\"],\n    [\"ch\"],\n    [\"x\"],\n]\n</code></pre>"},{"location":"static_analysis/#global-variables","title":"Global variables","text":"<p><code>global_variables()</code> and <code>global_variables_async()</code> return a list of variables used in the template, without path segments and excluding variables that are local to the template.</p> <pre><code># ... continued from above\n\nprint(template.global_variables())\n</code></pre> output<pre><code>['you']\n</code></pre>"},{"location":"static_analysis/#global-variable-paths","title":"Global variable paths","text":"<p><code>global_variable_paths()</code> and <code>global_variable_paths_async()</code> return a list of variables used in the template, with path segments and excluding variables that are local to the template.</p> <pre><code># ... continued from above\n\nprint(template.global_variable_paths())\n</code></pre> output<pre><code>['you', 'you.first_name', 'you.last_name']\n</code></pre>"},{"location":"static_analysis/#global-variable-segments","title":"Global variable segments","text":"<p><code>global_variable_segments()</code> and <code>global_variable_segments_async()</code> return a list of variables used in the template, each as a list of segments, excluding variables that are local to the template.</p> <pre><code># ... continued from above\n\nprint(template.global_variable_segments())\n</code></pre> output<pre><code>[\n    ['you', 'last_name'],\n    ['you', 'first_name'],\n    ['you'],\n]\n</code></pre>"},{"location":"static_analysis/#filter-names","title":"Filter names","text":"<p><code>filter_names()</code> and <code>filter_names_async()</code> return names of filters used in the template.</p> <pre><code># ... continued from above\n\nprint(template.filter_names())\n</code></pre> output<pre><code>['upcase', 'capitalize']\n</code></pre>"},{"location":"static_analysis/#tag-names","title":"Tag names","text":"<p><code>tag_names()</code> and <code>tag_names_async()</code> return the names of tags used in the template.</p> <pre><code># ... continued from above\n\nprint(template.tag_names())\n</code></pre> output<pre><code>['assign', 'for']\n</code></pre>"},{"location":"static_analysis/#variable-tag-and-filter-locations","title":"Variable, tag and filter locations","text":"<p><code>analyze()</code> and <code>analyze_async()</code> return an instance of <code>TemplateAnalysis</code>. It contains all of the information provided by the methods described above, but includes the location of each variable, tag and filter, each of which can appear many times across many templates.</p> <p>Using the same example template show at the top of this page, pretty printing <code>template.analyze()</code> gives us the following output.</p> <pre><code>TemplateAnalysis(variables={'ch': [Variable(segments=['ch'],\n                                            span=Span(template_name='',\n                                                      start=78,\n                                                      end=80))],\n                            'x': [Variable(segments=['x'],\n                                           span=Span(template_name='',\n                                                     start=64,\n                                                     end=65))],\n                            'you': [Variable(segments=['you'],\n                                             span=Span(template_name='',\n                                                       start=10,\n                                                       end=13)),\n                                    Variable(segments=['you', 'first_name'],\n                                             span=Span(template_name='',\n                                                       start=110,\n                                                       end=124)),\n                                    Variable(segments=['you', 'last_name'],\n                                             span=Span(template_name='',\n                                                       start=144,\n                                                       end=157)),\n                                    Variable(segments=['you', 'first_name'],\n                                             span=Span(template_name='',\n                                                       start=173,\n                                                       end=187)),\n                                    Variable(segments=['you', 'last_name'],\n                                             span=Span(template_name='',\n                                                       start=194,\n                                                       end=207))]},\n                 globals={'you': [Variable(segments=['you'],\n                                           span=Span(template_name='',\n                                                     start=10,\n                                                     end=13)),\n                                  Variable(segments=['you', 'first_name'],\n                                           span=Span(template_name='',\n                                                     start=110,\n                                                     end=124)),\n                                  Variable(segments=['you', 'last_name'],\n                                           span=Span(template_name='',\n                                                     start=144,\n                                                     end=157)),\n                                  Variable(segments=['you', 'first_name'],\n                                           span=Span(template_name='',\n                                                     start=173,\n                                                     end=187)),\n                                  Variable(segments=['you', 'last_name'],\n                                           span=Span(template_name='',\n                                                     start=194,\n                                                     end=207))]},\n                 locals={'x': [Variable(segments=['x'],\n                                        span=Span(template_name='',\n                                                  start=28,\n                                                  end=29))]},\n                 filters={'capitalize': [Span(template_name='',\n                                              start=127,\n                                              end=137)],\n                          'upcase': [Span(template_name='', start=40, end=46)]},\n                 tags={'assign': [Span(template_name='', start=18, end=49)],\n                       'for': [Span(template_name='', start=51, end=68)]})\n</code></pre>"},{"location":"syntax/","title":"Liquid Syntax","text":"<p>Liquid is a template language, where source text (the template) contains placeholders for variables, conditional expressions for including or excluding blocks of text, and loops for repeating blocks of text. Plus other syntax for manipulating variables and combining multiple templates into a single output.</p> <p>Output text is the result of rendering a template given some data model. It is that data model that provides the variables and objects referenced in a template's expressions.</p> <p>Liquid is most commonly used with HTML or Markdown, but can be used with any text-based content. Consider this example template.</p> <pre><code>&lt;main&gt;\n  &lt;h2&gt;{{ page_heading | default: \"Welcome to Our Benchmark Test\" }}&lt;/h2&gt;\n  &lt;p&gt;{{ intro_text | default: \"This is a dynamically generated page.\" }}&lt;/p&gt;\n\n  {# About us section #}\n  &lt;section&gt;\n    &lt;h3&gt;About Us&lt;/h3&gt;\n    {% if site_description %}\n      &lt;p&gt;{{ site_description }}&lt;/p&gt;\n    {% endif %}\n  &lt;section&gt;\n\n  &lt;section&gt;\n    &lt;h3&gt;Items List&lt;/h3&gt;\n    {% assign items_size = items | size %}\n    {% if items_size &gt; 0 %}\n      {% for item in items %}\n        &lt;div class=\"item\"&gt;\n          &lt;h4&gt;{{ item.title | capitalize }}&lt;/h4&gt;\n          &lt;p&gt;{{ item.description | escape }}&lt;/p&gt;\n          &lt;p&gt;Price: {{ item.price | ceil }} USD&lt;/p&gt;\n\n          {% if item.price &gt; 50 %}\n            &lt;p&gt;This is a premium item.&lt;/p&gt;\n            {% else %}\n            &lt;p&gt;This is a budget-friendly item.&lt;/p&gt;\n          {% endif %}\n        &lt;/div&gt;\n      {% endfor %}\n    {% else %}\n      &lt;p&gt;No items are available at the moment.&lt;/p&gt;\n    {% endif %}\n  &lt;/section&gt;\n&lt;/main&gt;\n</code></pre>"},{"location":"syntax/#output","title":"Output","text":"<p><code>{{ site_description }}</code> and <code>{{ item.title | capitalize }}</code> are examples of output statements. Expressions surrounded by double curly braces, <code>{{</code> and <code>}}</code>, will be evaluated and the result inserted into the output text.</p>"},{"location":"syntax/#filters","title":"Filters","text":"<p><code>capitalize</code> in <code>{{ item.title | capitalize }}</code> and <code>ceil</code> in <code>{{ item.price | ceil }}</code> are examples of filters. Filters modify the expression to their left prior to output or assignment.</p>"},{"location":"syntax/#tags","title":"Tags","text":"<p><code>{% if site_description %}</code>, <code>{% endif %}</code> and <code>{% assign items_size = items | size %}</code> are examples of tags. After the start tag delimiter (<code>{%</code>) there must be a tag name. Everything up to the closing tag delimiter (<code>%}</code>) is the tags's expression.</p> <p>Not all tags accept an expression, but all tag must have a name.</p> <p>Together <code>{% if site_description %}</code> and <code>{% endif %}</code> form a block tag. Block tags have an opening tag, some Liquid in between, and an end tag. In the case of the <code>if tag</code>, the block is only rendered if the tag's expression evaluates to true.</p> <p><code>{% assign items_size = items | size %}</code> is an inline tag. It does not have an end tag and it does not output anything, although some inline tags do produce an output.</p>"},{"location":"syntax/#comments","title":"Comments","text":"<p><code>{# About us section #}</code> is an example of a comment. Text between <code>{#</code> and <code>#}</code> will not be parsed or rendered.</p>"},{"location":"syntax/#content","title":"Content","text":"<p><code>&lt;main&gt;</code> and <code>\\n    &lt;h3&gt;About Us&lt;/h3&gt;</code> are examples of template content. That's anything not inside <code>{%</code> and <code>%}</code> or <code>{#</code> and <code>#}</code> or <code>{{</code> and <code>}}</code>. With the exception of whitespace control, template content is output unchanged.</p>"},{"location":"tag_reference/","title":"Default tags","text":"<p>All the tags described here are enabled by default in Python Liquid2.</p>"},{"location":"tag_reference/#comments","title":"Comments","text":"<p>0.1.0 </p> <p>Comments can be used to add documentation to your templates or \"comment out\" chunks of Liquid markup and text so that it wont be rendered. The recommended comment syntax is to surround comment text with <code>{#</code> and <code>#}</code>.</p> <pre><code>{# This is a comment #}\n{#\n    Comments can\n    span\n    multiple lines\n#}\n</code></pre> <p>We can safely comment-out Liquid markup, and add hashes so as not to conflict with existing comments.</p> <pre><code>{## comment this out for now\n{% for x in y %}\n    {# x could be empty #}\n    {{ x | default: TODO}}\n{% endfor %}\n##}\n</code></pre> <p>Inside liquid tags, any line starting with a hash will be considered a comment.</p> <pre><code>{% liquid\n  # This is a comment\n  echo \"Hello\"\n%}\n</code></pre>"},{"location":"tag_reference/#block-comments","title":"Block comments","text":"<p>0.1.0 </p> <pre><code>{% comment %} ... {% endcomment %}\n</code></pre> <p>Block comments start with the <code>comment</code> tag and end with the <code>endcomment</code> tag. It is OK for comment text to contain matching <code>comment</code>/<code>endcomment</code> or <code>raw</code>/<code>endraw</code> pairs, but is a syntax error if <code>comment</code> or <code>raw</code> tags are unbalanced.</p> <pre><code>{% comment %}This is a comment{% endcomment %}\n{% comment %}\n    Comments can\n    span\n    multiple lines\n{% endcomment %}\n</code></pre>"},{"location":"tag_reference/#inline-comments","title":"Inline comments","text":"<p>0.1.0 </p> <pre><code>{% # ... %}\n</code></pre> <p>An inline comment is a tag called <code>#</code>. Everything after the hash up to the end tag delimiter (<code>%}</code>) is comment text. Text can span multiple lines, but each line must start with a <code>#</code>.</p> <pre><code>{% # This is a comment %}\n{%-\n  # Comments can span multiple lines,\n  # but every line must start with a hash.\n-%}\n</code></pre>"},{"location":"tag_reference/#output","title":"Output","text":"<p>0.1.0 </p> <pre><code>{{ &lt;expression&gt; }}\n</code></pre> <p>An expression surrounded by double curly braces, <code>{{</code> and <code>}}</code>, is an output statement. When rendered, the expression will be evaluated and the result inserted into the output text.</p> <p>In this example the expression is a variable, which will be resolved to a value and the value's string representation will output, but output statements can contain any primitive expression.</p> <pre><code>Hello, {{ you }}!\n</code></pre>"},{"location":"tag_reference/#primitive-expressions","title":"Primitive expressions","text":"Primitive expression Examples Boolean literal <code>true</code> or <code>false</code> Null literal <code>null</code> or <code>nil</code> Integer literal <code>123</code> or <code>1e2</code> Float literal <code>1.23</code> or <code>1.2e3</code> String literal <code>\"Hello\"</code> or <code>'g\\'day'</code>  or <code>'Hello, ${you}'</code> Range <code>(1..5)</code> or <code>(x..y)</code> A path to a variable <code>foo</code> or <code>foo.bar</code> or <code>foo.bar[0]</code> or <code>foo[\"some thing\"].bar</code>"},{"location":"tag_reference/#filters","title":"Filters","text":"<p>0.1.0 </p> <pre><code>{{ &lt;expression&gt; | &lt;filter&gt; [| &lt;filter&gt; ...] }}\n</code></pre> <p>Values can be modified prior to output using filters. Filters are applied to an expression using the pipe symbol (<code>|</code>), followed by the filter's name and, possibly, some filter arguments. Filter arguments appear after a colon (<code>:</code>) and are separated by commas (<code>,</code>).</p> <p>Multiple filters can be chained together, effectively piping the output of one filter into the input of another.</p> <pre><code>{{ user_name | upcase }}\n{{ 42 | plus: 7 | modulo: 3 }}\n</code></pre>"},{"location":"tag_reference/#ternary-expressions","title":"Ternary expressions","text":"<p>0.1.0 </p> <pre><code>{{ &lt;expression&gt; if &lt;expression&gt; else &lt;expression&gt; }}\n</code></pre> <p>Inline conditional expressions can be used as an alternative to the longer form <code>{% if %}</code> tag.</p> <pre><code>{{ \"bar\" if x.y == z else \"baz\" }}\n</code></pre> <p>Filters can be applied to either branch.</p> <pre><code>{{ \"bar\" | upcase if x else \"baz\" | capitalize }}\n</code></pre> <p>Or applied to the result of the conditional expression as a whole using tail filters. Notice the double pipe symbol (<code>||</code>).</p> <pre><code>{{ \"bar\" if x else \"baz\" || upcase | append: \"!\" }}\n</code></pre>"},{"location":"tag_reference/#assign","title":"assign","text":"<p>0.1.0 </p> <pre><code>{% assign &lt;identifier&gt; = &lt;expression&gt; %}\n</code></pre> <p>The <code>assign</code> tag is used to define and initialize new variables or reassign existing variables.</p> <pre><code>{% assign foo = \"bar\" %}\nfoo is equal to {{ foo }}.\n\n{% assign foo = 42 %}\nfoo is now equal to {{ foo }}.\n</code></pre> <p>The expression on the right-hand side of the assignment operator (<code>=</code>) follows the syntax described in Output above. It can be any primitive expression, it can include filters or be a ternary expression.</p>"},{"location":"tag_reference/#array-literals","title":"Array literals","text":"<p>0.1.0 </p> <pre><code>{% assign &lt;identifier&gt; = &lt;expression&gt;[, &lt;expression&gt; ...] %}\n</code></pre> <p>If a comma separated list of primitive expressions is given after the assignment operator (<code>=</code>), identifier will be set to an array-like object containing the result of evaluating each expression.</p> <pre><code>{% assign my_array = \"foo\", \"bar\", 42, some.variable %}\n</code></pre>"},{"location":"tag_reference/#capture","title":"capture","text":"<p>0.1.0 </p> <pre><code>{% capture &lt;identifier&gt; %} &lt;liquid markup&gt; {% endcapture %}\n</code></pre> <p>The <code>capture</code> tag evaluates the contents of its block and saves the resulting string as a new variable, or reassigns an existing variable, without immediately rendering it.</p> <pre><code>{% capture welcome_message %}\n  Hello, {{ customer.name }}! Welcome to our store.\n{% endcapture %}\n\n{{ welcome_message }}\n</code></pre> <p>In some cases, it can be easier to use a template string .</p> <pre><code>{% assign welcome_message = \"Hello, ${ customer.name }! Welcome to our store.\" %}\n</code></pre>"},{"location":"tag_reference/#case","title":"case","text":"<p>0.1.0 </p> <pre><code>{% case &lt;expression&gt; %}\n  [ {% when &lt;expression&gt; %} &lt;liquid markup&gt; ] ...\n  [ {% else %} &lt;liquid markup&gt; ]\n{% endcase %}\n</code></pre> <p>The <code>case</code> tag evaluates an expression, matching the result against one or more <code>when</code> clauses. In the event of a match, the <code>when</code> block is rendered. The <code>else</code> clause is rendered if no <code>when</code> clauses match the <code>case</code> expression.</p> <pre><code>{% assign day = \"Monday\" %}\n\n{% case day %}\n  {% when \"Monday\" %}\n    Start of the work week!\n  {% when \"Friday\" %}\n    It's almost the weekend!\n  {% when \"Saturday\" or \"Sunday\" %}\n    Enjoy your weekend!\n  {% else %}\n    Just another weekday.\n{% endcase %}\n</code></pre>"},{"location":"tag_reference/#cycle","title":"cycle","text":"<p>0.1.0 </p> <pre><code>{% cycle [ &lt;string or identifier&gt;: ] &lt;expression&gt; [, &lt;expression&gt; ... ] %}\n</code></pre> <p>Render the next item in an iterator, initializing it and rendering the first value if it does not yet exist. When the items are exhausted, the iterator starts again from the beginning.</p> <pre><code>{% cycle 'odd', 'even' %}\n{% cycle 'odd', 'even' %}\n{% cycle 'odd', 'even' %}\n</code></pre> <p>You can give <code>cycle</code> a name to further distinguish multiple iterators with the same items.</p> <pre><code>{% cycle 'odd', 'even' %}\n{% cycle 'odd', 'even' %}\n{% cycle inner: 'odd', 'even' %}\n</code></pre>"},{"location":"tag_reference/#decrement","title":"decrement","text":"<p>0.1.0 </p> <pre><code>{% decrement &lt;identifier&gt; %}\n</code></pre> <p>The <code>decrement</code> tag renders the next value in a named counter, reducing the count by one each time. If a counter with the given name does not already exist, it is created automatically and initialized to zero, before subtracting 1 and outputting <code>-1</code>.</p> <pre><code>{% decrement some %}\n{% decrement thing %}\n{% decrement thing %}\n</code></pre>"},{"location":"tag_reference/#echo","title":"echo","text":"<p>0.1.0 </p> <pre><code>{% echo &lt;expression&gt; %}\n</code></pre> <p>The <code>echo</code> tag is equivalent to output statements, an expression surrounded by <code>{{</code> and <code>}}</code>, just in tag form. It is mostly used inside <code>{% liquid %}</code> tags where plain output statements are not allowed.</p> <pre><code>Hello, {% echo you %}!\nHello, {{ you }}!\n\n{% liquid\n  for product in collection.products\n    echo product.title | capitalize\n  endfor\n%}\n</code></pre> <p>Just like output statements and the <code>assign</code> tag, the expression can be any primitive expression, it can include filters or be a ternary expression.</p> <p></p> <pre><code>{% echo \"bar\" | upcase if x else \"baz\" | capitalize %}\n\n{% liquid\n  for product in collection.products\n    echo product.title | capitalize if \"foo\" in product.tags\n  endfor\n%}\n</code></pre>"},{"location":"tag_reference/#extends","title":"extends","text":"<p>0.1.0 </p> <pre><code>{% extends &lt;template name&gt; %}\n</code></pre> <p>Together with the <code>block</code> tag, the <code>extends</code> tag allows you to inherit content and Liquid markup from parent templates and define blocks that can be overridden by child templates.</p> <p>In this example <code>page.html</code> inherits from <code>base.html</code> and overrides the <code>content</code> block. As <code>page.html</code> does not define a <code>footer</code> block, the footer from <code>base.html</code> is used.</p> base.html<pre><code>&lt;body&gt;\n  &lt;div id=\"content\"&gt;{% block content required %}{% endblock %}&lt;/div&gt;\n  &lt;div id=\"footer\"&gt;{% block footer %}Default footer{% endblock %}&lt;/div&gt;\n&lt;/body&gt;\n</code></pre> page.html<pre><code>{% extends 'base.html' %}\n{% block content %}Hello, {{ you }}!{% endblock %}\n</code></pre>"},{"location":"tag_reference/#block","title":"block","text":"<p>0.1.0 </p> <pre><code>{% block &lt;name&gt; [required] %} &lt;Liquid markup&gt; {% endblock [&lt;name&gt;] %}\n</code></pre> <p>Every <code>block</code> tag must have a name that is unique to the template. <code>endblock</code> tags can include a name too. If given, the <code>endblock</code> name must match the name given at the start of the block.</p> <p>If the optional <code>required</code> argument is given, the block must be overridden by a child template, otherwise a <code>RequiredBlockError</code> will be raised.</p> <pre><code>&lt;body&gt;\n  &lt;div id=\"content\"&gt;\n    {% block content %}\n      {% block title %}\n        &lt;h1&gt;Some Title&lt;/h1&gt;\n      {% endblock title %}\n    {% endblock content %}\n  &lt;/div&gt;\n  &lt;div id=\"footer\"&gt;\n    {% block footer %}\n      Default footer\n    {% endblock footer %}\n  &lt;/div&gt;\n&lt;/body&gt;\n</code></pre>"},{"location":"tag_reference/#super-blocks","title":"Super blocks","text":"<p>A <code>block</code> object is available inside every <code>{% block %}</code> tag. It has just one property, <code>super</code>. If a <code>{% block %}</code> is overriding a parent block, <code>{{ block.super }}</code> will render the parent's implementation of that block.</p> <p>In this example we use <code>{{ block.super }}</code> in the <code>footer</code> block to output the base template's footer with a year appended to it.</p> base<pre><code>&lt;head&gt;\n  {% block head %}{% endblock %}\n&lt;head&gt;\n&lt;body&gt;\n  &lt;div id=\"content\"&gt;{% block content required %}{% endblock %}&lt;/div&gt;\n  &lt;div id=\"footer\"&gt;{% block footer %}Default footer{% endblock %}&lt;/div&gt;\n&lt;/body&gt;\n</code></pre> child<pre><code>{% extends \"base\" %}\n{% block content %}Hello, World!{% endblock %}\n{% block footer %}{{ block.super }} - 2025{% endblock %}\n</code></pre> output<pre><code>&lt;body&gt;\n  &lt;div id=\"content\"&gt;Hello, World!&lt;/div&gt;\n  &lt;div id=\"footer\"&gt;Default footer - 2025&lt;/div&gt;\n&lt;/body&gt;\n</code></pre>"},{"location":"tag_reference/#for","title":"for","text":"<p>0.1.0 </p> <pre><code>{% for &lt;identifier&gt; in &lt;expression&gt;\n    [ limit: &lt;expression&gt; ] [ offset: &lt;expression&gt; ] [ reversed ] %}\n  &lt;liquid markup&gt;\n  [ {% else %} &lt;liquid markup&gt; ]\n{% endfor %}\n</code></pre> <p>The <code>for</code> tag renders its block once for each item in an iterable object, like an array/list or mapping/dict/hash. If the iterable is empty and an <code>else</code> block given, it will be rendered instead.</p> <pre><code>{% for product in collection %}\n    - {{ product.title }}\n{% else %}\n    No products available\n{% endfor %}\n</code></pre> <p>Range expression are often used with the <code>for</code> tag to loop over increasing integers.</p> <pre><code>{% for i in (1..4) %}\n    {{ i }}\n{% endfor %}\n</code></pre>"},{"location":"tag_reference/#limit","title":"limit","text":"<p>If a <code>limit</code> argument is given, the loop will stop after the specified number of iterations.</p> <pre><code>{% for product in collection.products limit: 2 %}\n    - {{ product.title }}\n{% endfor %}\n</code></pre>"},{"location":"tag_reference/#offset","title":"offset","text":"<p>If an <code>offset</code> argument is given, it should be an integer specifying how many items to skip before starting the loop.</p> <pre><code>{% for product in collection.products limit: 2 %}\n    - {{ product.title }}\n{% endfor %}\n</code></pre> <p><code>offset</code> can also be given the special value <code>\"continue\"</code>, in which case the loop will start from where a previous loop with the same iterable left off.</p> <pre><code>{% for product in collection.products limit: 2 %}\n    - {{ product.title }}\n{% endfor %}\n\n{% for product in collection.products offset: continue %}\n    - {{ product.title }}!\n{% endfor %}\n</code></pre>"},{"location":"tag_reference/#reversed","title":"reversed","text":"<p>If the reversed flag is given, the target iterable will be iterated in reverse order.</p> <pre><code>{% for product in collection.products reversed %}\n    - {{ product.title }}\n{% endfor %}\n</code></pre>"},{"location":"tag_reference/#break","title":"break","text":"<p>You can exit a loop early using the <code>break</code> tag.</p> <pre><code>{% for product in collection.products %}\n    {% if product.title == \"Shirt\" %}\n        {% break %}\n    {% endif %}\n    - {{ product.title }}\n{% endfor %}\n</code></pre>"},{"location":"tag_reference/#continue","title":"continue","text":"<p>You can skip all or part of a loop iteration with the <code>continue</code> tag.</p> <pre><code>{% for product in collection.products %}\n    {% if product.title == \"Shirt\" %}\n        {% continue %}\n    {% endif %}\n    - {{ product.title }}\n{% endfor %}\n</code></pre>"},{"location":"tag_reference/#forloop","title":"forloop","text":"<p>A <code>forloop</code> object is available inside every <code>for</code> tag block.</p> Property Description Type <code>name</code> The loop variable name and target identifier, separated by a hyphen. string <code>length</code> The length of the sequence being iterated. integer <code>index</code> The 1-base index of the current iteration. integer <code>index0</code> The 0-base index of the current iteration. integer <code>rindex</code> The 1-base index of the current iteration counting from the end. integer <code>rindex0</code> The 0-base index of the current iteration counting from the end. integer <code>first</code> <code>true</code> if the current iteration is the first, <code>false</code> otherwise. bool <code>last</code> <code>true</code> is the current iteration is the last, <code>false</code> otherwise. bool <code>parentloop</code> the <code>forloop</code> object of an enclosing <code>for</code> loop. forloop <pre><code>{% for product in collection.products %}\n    {% if forloop.first %}\n      &lt;b&gt;{{ product.title }}&lt;/b&gt; - {{ forloop.index0 }}\n    {% else %}\n      {{ product.title }} - {{ forloop.index0 }}\n    {% endif %}\n{% endfor %}\n</code></pre>"},{"location":"tag_reference/#array-literals_1","title":"Array literals","text":"<p>0.2.0 </p> <pre><code>{% for &lt;identifier&gt; in &lt;expression&gt;, [&lt;expression&gt;, ...] %}\n  &lt;liquid markup&gt;\n  [ {% else %} &lt;liquid markup&gt; ]\n{% endfor %}\n</code></pre> <p>Use a comma separated list of primitive expressions after <code>in</code> to iterate over the result of evaluating each expression.</p> <pre><code>{% for thing in products[1], 42, true, \"something\" %}\n  - {{ thing }}\n{% endfor %}\n</code></pre> <p>Arguments <code>limit</code>, <code>offset</code> and <code>reversed</code> are not allowed after an array literal, but you can assign the array to a variable first, then use <code>limit</code>, <code>offset</code> and/or <code>reversed</code>.</p> <pre><code>{% assign my_array = products[1], 42, true, \"something\" %}\n{% for thing in my_array limit:2 %}\n  - {{ thing }}\n{% endfor %}\n</code></pre>"},{"location":"tag_reference/#if","title":"if","text":"<p>0.1.0 </p> <pre><code>{% if &lt;expression&gt; %}\n  &lt;liquid markup&gt;\n  [ {% elsif &lt;expression&gt; %} &lt;liquid markup&gt; [ {% elsif &lt;expression&gt; %} ... ]]\n  [ {% else %} &lt;liquid markup&gt; ... ]\n{% endif %}\n</code></pre> <p>The <code>if</code> tag conditionally renders its block if its expression evaluates to be truthy. Any number of <code>elsif</code> blocks can be given to add alternative conditions, and an <code>else</code> block is used as a default if no preceding conditions were truthy.</p> <pre><code>{% if product.title == \"OK Hat\" %}\n  This hat is OK.\n{% elsif product.title == \"Rubbish Tie\" %}\n  This tie is rubbish.\n{% else %}\n  Not sure what this is.\n{% endif %}\n</code></pre>"},{"location":"tag_reference/#conditional-expressions","title":"Conditional expressions","text":"<p>Any primitive expression can be tested for truthiness, like <code>{% if some_variable %}</code>, or you can use a combination of the following operators. Only <code>false</code>, <code>nil</code>/<code>null</code> and the special undefined object are falsy in Liquid.</p> Operator Description Example <code>==</code> Equals <code>product.title == \"Nice Shoes\"</code> <code>!=</code> Not equals <code>user.name != \"anonymous\"</code> <code>&gt;</code> Greater than <code>product.was_price &gt; product.price</code> <code>&lt;</code> Less than <code>collection.products.size &lt; 10</code> <code>&gt;=</code> Greater than or equal to <code>user.age &gt;= 18</code> <code>&lt;=</code> Less than or equal to <code>basket.size &lt;= 0</code> <code>and</code> Logical and <code>x and y</code> <code>and</code> Logical or <code>x or y</code> <code>not</code> Logical not <code>not x</code>"},{"location":"tag_reference/#operator-precedence","title":"Operator precedence","text":"<p><code>and</code> binds more tightly than <code>or</code>, just like in Python. Terms can be grouped with parentheses to explicitly control logical operator precedence.</p> <pre><code>{% if (user != empty and user.eligible and user.score &gt; 100) or exempt %}\n    user is special\n{% else %}\n    denied\n{% endif %}\n</code></pre>"},{"location":"tag_reference/#include","title":"include","text":"<p>0.1.0 </p> <pre><code>{% include &lt;template name&gt;\n    [ ( with | for ) &lt;expression&gt; [ as &lt;identifier&gt; ]]\n    [[,] &lt;identifier&gt;: &lt;expression&gt; [, [&lt;identifier&gt;: &lt;expression&gt; ... ]]]\n%}\n</code></pre> <p>The <code>include</code> tag loads and renders a named template, inserting the resulting text in its place. The name of the template to include can be a string literal or a variable resolving to a string. When rendered, the included template will share the same scope as the current template.</p> <pre><code>{% include \"snippets/header.html\" %}\n</code></pre>"},{"location":"tag_reference/#with","title":"with","text":"<p>Using the optional <code>with</code> syntax, we can bind a value to a variable that will be in scope for the included template. By default, that variable will be the name of the included template. Alternatively we can specify the variable to use with the <code>as</code> keyword followed by an identifier.</p> <p>Here, the template named <code>greeting</code> will have access to a variable called <code>greeting</code> with the value <code>\"Hello\"</code>.</p> <pre><code>{% assign greetings = \"Hello,Goodbye\" | split: \",\" %}\n{% include \"greeting\" with greetings.first %}\n</code></pre>"},{"location":"tag_reference/#for_1","title":"for","text":"<p>If an array-like object it given following the <code>for</code> keyword, the named template will be rendered once for each item in the sequence and, like <code>with</code> above, the item value will be bound to a variable named after the included template.</p> <p>In this example the template named <code>greeting</code> will be rendered once with the variable <code>greeting</code> set to <code>\"Hello\"</code> and once with the variable <code>greeting</code> set to <code>\"Goodbye\"</code>.</p> <pre><code>{% assign greetings = \"Hello, Goodbye\" | split: \", \" %}\n{% include \"greeting\" for greetings as greeting %}\n</code></pre>"},{"location":"tag_reference/#keyword-arguments","title":"Keyword arguments","text":"<p>Additional keyword arguments given to the <code>include</code> tag will be added to the included template's scope, then go out of scope after the included template has been rendered.</p> <pre><code>{% include \"partial_template\" greeting: \"Hello\", num: 3, skip: 2 %}\n</code></pre>"},{"location":"tag_reference/#increment","title":"increment","text":"<p>0.1.0 </p> <pre><code>{% increment &lt;identifier&gt; %}\n</code></pre> <p>The <code>increment</code> tag renders the next value in a named counter, increasing the count by one each time. If a counter with the given name does not already exist, it is created automatically and initialized to zero, which is output before adding <code>1</code>.</p> <pre><code>{% increment some %}\n{% increment thing %}\n{% increment thing %}\n</code></pre>"},{"location":"tag_reference/#liquid","title":"liquid","text":"<p>0.1.0 </p> <pre><code>{% liquid\n  &lt;tag name&gt; [&lt;expression&gt;]\n  [ &lt;tag name&gt; [&lt;expression&gt;]]\n  ...\n%}\n</code></pre> <p>The <code>liquid</code> tag encloses line statements, where each line starts with a tag name and is followed by the tag's expression. Expressions inside <code>liquid</code> tags must fit on one line as we use <code>\\n</code> as a delimiter indicating the end of the expression.</p> <p>Note that output statement syntax (<code>{{ &lt;expression&gt; }}</code>) is not allowed inside <code>liquid</code> tags, so you must use the <code>echo</code> tag instead.</p> <pre><code>{% liquid\n  assign username = \"Brian\"\n\n  if username\n    echo \"Hello, \" | append: username\n  else\n    echo \"Hello, user\"\n  endif\n\n  for i in (1..3)\n    echo i\n  endfor\n%}\n</code></pre> <p>Also, inside <code>liquid</code> tags, any line starting with a hash will be considered a comment.</p> <pre><code>{% liquid\n  # This is a comment\n  echo \"Hello\"\n%}\n</code></pre>"},{"location":"tag_reference/#macro-and-call","title":"macro and call","text":"<p>0.1.0 </p> <pre><code>{% macro &lt;name&gt; [[,] [ &lt;identifier&gt;[: &lt;expression&gt;]] ... ] %}\n  &lt;liquid markup&gt;\n{% endmacro %}\n</code></pre> <pre><code>{% call &lt;name&gt; [[,] [ &lt;identifier&gt;[: &lt;expression&gt;]] ... ] %}\n</code></pre> <p>The <code>macro</code> tag defines a parameterized block that can later be called using the <code>call</code> tag.</p> <p>A macro is like defining a function. You define a parameter list, possibly with default values, that are expected to be provided by a <code>call</code> tag. A macro tag's block has its own scope including its arguments and template global variables, just like the <code>render</code> tag.</p> <p>Note that argument defaults are bound late. They are evaluated when a call expression is evaluated, not when the macro is defined.</p> <pre><code>{% macro 'price' product, on_sale: false %}\n  &lt;div class=\"price-wrapper\"&gt;\n  {% if on_sale %}\n    &lt;p&gt;Was {{ product.regular_price | prepend: '$' }}&lt;/p&gt;\n    &lt;p&gt;Now {{ product.price | prepend: '$' }}&lt;/p&gt;\n  {% else %}\n    &lt;p&gt;{{ product.price | prepend: '$' }}&lt;/p&gt;\n  {% endif %}\n  &lt;/div&gt;\n{% endmacro %}\n\n{% call 'price' products[0], on_sale: true %}\n{% call 'price' products[1] %}\n</code></pre> <p>Excess arguments passed to <code>call</code> are collected into variables called <code>args</code> and <code>kwargs</code>, so variadic macros a possible too.</p> <pre><code>{% macro 'foo' %}\n  {% for arg in args %}\n    - {{ arg }}\n  {% endfor %}\n\n  {% for arg in kwargs %}\n    - {{ arg.0 }} =&gt; {{ arg.1 }}\n  {% endfor %}\n{% endmacro %}\n\n{% call 'foo' 42, 43, 99, a: 3.14, b: 2.71828 %}\n</code></pre>"},{"location":"tag_reference/#raw","title":"raw","text":"<p>0.1.0 </p> <pre><code>{% raw %} &lt;text&gt; {% endraw %}\n</code></pre> <p>Any text between <code>{% raw %}</code> and <code>{% endraw %}</code> will not be interpreted as Liquid markup, but output as plain text instead.</p> <pre><code>{% raw %}\n  This will be rendered {{verbatim}}, with the curly brackets.\n{% endraw %}\n</code></pre>"},{"location":"tag_reference/#render","title":"render","text":"<p>0.1.0 </p> <pre><code>{% render &lt;string&gt;\n    [ ( with | for ) &lt;expression&gt; [ as &lt;identifier&gt; ]]\n    [[,] &lt;identifier&gt;: &lt;expression&gt; [, [&lt;identifier&gt;: &lt;expression&gt; ... ]]]\n%}\n</code></pre> <p>The <code>render</code> tag loads and renders a named template, inserting the resulting text in its place. The name of the template to include must be a string literal. When rendered, the included template will have its onw scope, without variables define in the calling template.</p> <pre><code>{% render \"snippets/header.html\" %}\n</code></pre>"},{"location":"tag_reference/#with_1","title":"with","text":"<p>Using the optional <code>with</code> syntax, we can bind a value to a variable that will be in scope for the rendered template. By default, that variable will be the name of the rendered template. Alternatively we can specify the variable to use with the <code>as</code> keyword followed by an identifier.</p> <p>Here, the template named <code>greeting</code> will have access to a variable called <code>greeting</code> with the value <code>\"Hello\"</code>.</p> <pre><code>{% assign greetings = \"Hello,Goodbye\" | split: \",\" %}\n{% render \"greeting\" with greetings.first %}\n</code></pre>"},{"location":"tag_reference/#for_2","title":"for","text":"<p>If an array-like object it given following the <code>for</code> keyword, the named template will be rendered once for each item in the sequence and, like <code>with</code> above, the item value will be bound to a variable named after the rendered template.</p> <p>In this example the template named <code>greeting</code> will be rendered once with the variable <code>greeting</code> set to <code>\"Hello\"</code> and once with the variable <code>greeting</code> set to <code>\"Goodbye\"</code>.</p> <pre><code>{% assign greetings = \"Hello, Goodbye\" | split: \", \" %}\n{% render \"greeting\" for greetings as greeting %}\n</code></pre>"},{"location":"tag_reference/#keyword-arguments_1","title":"Keyword arguments","text":"<p>Additional keyword arguments given to the <code>render</code> tag will be added to the rendered template's scope, then go out of scope after the it has been rendered.</p> <pre><code>{% render \"partial_template\" greeting: \"Hello\", num: 3, skip: 2 %}\n</code></pre>"},{"location":"tag_reference/#translate","title":"translate","text":"<p>0.1.0 </p> <pre><code>{% translate\n    [context: &lt;string&gt;]\n    [, count: &lt;number&gt;]\n    [, &lt;identifier&gt;: &lt;object&gt; ] ... %}\n  &lt;text,variable&gt; ...\n[ {% plural %} &lt;text,variable&gt; ... ]\n{% endtranslate %}\n</code></pre> <p>The <code>translate</code> tag defines text to be translated into another language. Said text can contain placeholders for variables. These placeholders look like Liquid output statements, but can't use dotted or bracketed property syntax or filters.</p> <p>If a German translations object is found in the current render context, this example would output <code>Hallo Welt!</code>.</p> <pre><code>{% translate %}\n  Hello, World!\n{% endtranslate %}\n</code></pre> <p>If a <code>{% plural %}</code> block follows the message text and the special <code>count</code> argument is considered plural, the <code>{% plural %}</code> block will be rendered instead. Again, with a German translations object, this example would render <code>Hallo Welten!</code>.</p> <pre><code>{% translate count: 2 %}\n  Hello, World!\n{% plural %}\n  Hello, Worlds!\n{% endtranslate %}\n</code></pre> <p>Keyword arguments are used to add (or shadow existing) variables.</p> <pre><code>{% translate you: 'Sue' %}\n  Hello, {{ you }}!\n{% endtranslate %}\n</code></pre>"},{"location":"tag_reference/#unless","title":"unless","text":"<p>0.1.0 </p> <pre><code>{% unless &lt;expression&gt; %}\n  &lt;liquid markup&gt;\n  [ {% elsif &lt;expression&gt; %} &lt;liquid markup&gt; [ {% elsif &lt;expression&gt; %} ... ]]\n  [ {% else %} &lt;liquid markup&gt; ... ]\n{% endif %}\n</code></pre> <p>The <code>unless</code> tag conditionally renders its block if its expression evaluates to be falsy. Any number of elsif blocks can be given to add alternative conditions, and an else block is used as a default if none of preceding conditions were met.</p> <pre><code>{% unless product.title == \"OK Hat\" %}\n  This hat is OK.\n{% elsif product.title == \"Rubbish Tie\" %}\n  This tie is rubbish.\n{% else %}\n  Not sure what this is.\n{% endif %}\n</code></pre> <p>Otherwise <code>unless</code> behaves the same as <code>if</code>. See Conditional expressions.</p>"},{"location":"tag_reference/#with_2","title":"with","text":"<p>0.1.0 </p> <pre><code>{% with &lt;identifier&gt;: &lt;expression&gt; [, &lt;identifier&gt;: &lt;expression&gt; ... ] %}\n  &lt;liquid markup&gt;\n{% endwith %}\n</code></pre> <p>The <code>with</code> tag extends the template namespace with block scoped variables. These variables have the potential to shadow global variables or variables assigned with <code>{% assign %}</code> and <code>{% capture %}</code>.</p> <pre><code>{% with p: collection.products.first %}\n  {{ p.title }}\n{% endwith %}\n\n{% with a: 1, b: 3.4 %}\n  {{ a }} + {{ b }} = {{ a | plus: b }}\n{% endwith %}\n</code></pre>"},{"location":"variables_and_drops/","title":"Variables, types and drops","text":"<p>Liquid primitive types map to Python types according to the following table. You can, for example, compare a Liquid string to a Python string directly with <code>{% if var == \"thing\" %}</code>, where <code>var</code> is a global variable containing a Python string.</p> <p>Note that Liquid has weak typing. Anywhere a particular type is expected, Liquid will implicitly try to convert a value to that type if needed.</p> Primitive type Python type Example Liquid literal BooleanLiteral bool <code>true</code> or <code>false</code> NullLiteral None <code>null</code> or <code>nil</code> IntegerLiteral int <code>123</code> or <code>1e2</code> FloatLiteral float <code>1.23</code> or <code>1.2e3</code> StringLiteral str <code>\"Hello\"</code> or <code>'g\\'day'</code>  or <code>'Hello, ${you}'</code> RangeLiteral <code>(1..5)</code> or <code>(x..y)</code> ArrayLiteral <code>var, 1, 2, 3</code>"},{"location":"variables_and_drops/#sequences-and-mappings","title":"Sequences and mappings","text":"<p>Anywhere an array-like value is expected, like the left-hand side of the <code>join</code> filter, Liquid will accept any Python Sequence, not just a list.</p> <p>In the case of a Mapping, like a dict, a <code>{% for %}</code> loop will iterator over mapping items, whereas a sequence filter will add the mapping to a single element sequence and iterate over that.</p> <p></p> <pre><code>from collections.abc import Sequence\nfrom liquid2 import render\n\n\nclass MySequence(Sequence[int]):\n    def __init__(self, items: list[int]):\n        self.items = items\n\n    def __getitem__(self, key: int) -&gt; int:\n        return self.items[key] * 2\n\n    def __len__(self) -&gt; int:\n        return len(self.items)\n\n\ndata = {\n    \"s\": MySequence([1, 2, 3]),\n    \"l\": [\"a\", \"b\", \"c\"],\n    \"t\": (True, False),\n    \"d\": {\"x\": 4, \"y\": 5, \"z\": 6}\n}\n\nsource = \"\"\"\\\n{% assign sequences = s, l, t, d -%}\n{% for sequence in sequences -%}\n    {% for item in sequence ~%}\n        - {{ item -}}\n    {% endfor %}\n{% endfor %}\n\"\"\"\n\nprint(render(source, **data))\n</code></pre> output<pre><code>        - 2\n        - 4\n        - 6\n        - a\n        - b\n        - c\n        - true\n        - false\n        - x4\n        - y5\n        - z6\n</code></pre>"},{"location":"variables_and_drops/#paths-to-variables","title":"Paths to variables","text":"<p>When referenced in a template, a variable is best viewed as a path to a value, where each path has one or more segments. Segments can be property names separated by dots (<code>foo.bar</code>), array indexes using bracket notation (<code>store.products[1]</code>) or bracketed property names for situations where the property name is held in a variable or contains reserved characters (<code>product.variant[var]</code> or <code>products[\"something with spaces\"]</code>)</p> <p>Python Liquid uses <code>__getitem__</code> internally for resolving property names and accessing items in a sequence. So, if your data is some combination of dictionaries and lists, for example, templates can reference objects as follows.</p> data<pre><code>{\n  \"products\": [\n    {\n      \"title\": \"Some Shoes\",\n      \"available\": 5,\n      \"colors\": [\"blue\", \"red\"]\n    },\n    {\n      \"title\": \"A Hat\",\n      \"available\": 2,\n      \"colors\": [\"grey\", \"brown\"]\n    }\n  ]\n}\n</code></pre> template<pre><code>{{ products[0].title }}\n{{ products[-2]['available'] }}\n{{ products.last.title }}\n{{ products.first.colors | join: ', ' }}\n</code></pre> output<pre><code>Some Shoes\n5\nA Hat\nblue, red\n</code></pre> <p>Attempting to access properties from a Python class or class instance will not work.</p> <pre><code>from liquid import Template\n\nclass Product:\n    def __init__(self, title, colors):\n        self.title = title\n        self.colors = colors\n\nproducts = [\n    Product(title=\"Some Shoes\", colors=[\"blue\", \"red\"]),\n    Product(title=\"A Hat\", colors=[\"grey\", \"brown\"]),\n]\n\nTemplate(\"{{ products.first.title }}!\").render(products=products)\n</code></pre> output<pre><code>!\n</code></pre>"},{"location":"variables_and_drops/#drops","title":"Drops","text":"<p>A drop (as in \"drop of liquid\") is an instance of a Python class that implements the Sequence or Mapping interface, or other magic methods.</p> <p>We use the Mapping interface to force ourselves to be explicit about which properties are exposed to template authors.</p> <pre><code>from collections import abc\nfrom typing import Any\n\nfrom liquid2 import Environment\nfrom liquid2 import StrictUndefined\nfrom liquid2 import render\n\n\nclass User(abc.Mapping[str, Any]):\n    def __init__(\n        self,\n        first_name: str,\n        last_name: str,\n        perms: list[str],\n    ):\n        self.first_name = first_name\n        self.last_name = last_name\n        self.perms = perms or []\n\n        self._keys = [\n            \"first_name\",\n            \"last_name\",\n            \"is_admin\",\n            \"name\",\n        ]\n\n    def __getitem__(self, k):\n        if k in self._keys:\n            return getattr(self, k)\n        raise KeyError(k)\n\n    def __iter__(self):\n        return iter(self._keys)\n\n    def __len__(self):\n        return len(self._keys)\n\n    def __str__(self):\n        return f\"User(first_name='{self.first_name}', last_name='{self.last_name}')\"\n\n    @property\n    def is_admin(self):\n        return \"admin\" in self.perms\n\n    @property\n    def name(self):\n        return f\"{self.first_name} {self.last_name}\"\n\n\nuser = User(\"John\", \"Smith\", [\"admin\"])\n\nprint(render(\"{{ user.first_name }}\", user=user))  # John\nprint(render(\"{{ user.name }}\", user=user))  # John Smith\nprint(render(\"{{ user.is_admin }}\", user=user))  # true\n\n\nstrict_env = Environment(undefined=StrictUndefined)\nprint(strict_env.from_string(\"{{ user.perms[0] }}\").render(user=user))\n# liquid2.exceptions.UndefinedError: user.perms is undefined\n#   -&gt; '{{ user.perms[0] }}' 1:3\n#   |\n# 1 | {{ user.perms[0] }}\n#   |    ^^^^^^^^^^^^^ user.perms is undefined\n</code></pre>"},{"location":"variables_and_drops/#drop-wrapper","title":"Drop wrapper","text":"<p>For convenience, you could implement a drop wrapper for data access objects, while still being explicit about which properties to expose.</p> <pre><code>class Drop(abc.Mapping):\n    def __init__(obj, keys):\n        self.obj = obj\n        self.keys = keys\n\n    def __getitem__(self, k):\n        # Delegate attribute access to self.obj only if `k` is in `self.keys`.\n        if k in self.keys:\n            return getattr(obj, k)\n        raise KeyError(k)\n\n    def __iter__(self):\n        return iter(self.keys)\n\n    def __len__(self):\n        return len(self.keys)\n</code></pre>"},{"location":"variables_and_drops/#__liquid__","title":"<code>__liquid__</code>","text":"<p>If a drop implements the special <code>__liquid__()</code> method, Liquid will use the result of calling <code>__liquid__()</code> when resolving a variable path or segment. This is useful for situations where you need your Python object to act as an array index, or to be compared to a primitive data type, for example.</p> <pre><code>from liquid2 import parse\n\nclass IntDrop:\n    def __init__(self, val: int):\n        self.val = val\n\n    def __int__(self) -&gt; int:\n        return self.val\n\n    def __str__(self) -&gt; str:\n        return \"one\"\n\n    def __liquid__(self) -&gt; int:\n        return self.val\n\n\ntemplate = parse(\n    \"{% if my_drop &lt; 10 %}\"\n    \"{{ my_drop }} \"\n    \"{% endif %}\"\n    \"{{ some_array[my_drop] }}\"\n)\n\ncontext_data = {\n    \"my_drop\": IntDrop(1),\n    \"some_array\": [\"a\", \"b\", \"c\"],\n}\n\nprint(template.render(**context_data))  # one b\n</code></pre>"},{"location":"variables_and_drops/#__html__","title":"<code>__html__</code>","text":"<p>When HTML auto-escaping is enabled, an object can be output as an HTML-safe string by implementing the special <code>__html__()</code> method.</p> <pre><code>from liquid2 import Environment\n\n\nclass ListDrop:\n    def __init__(self, somelist):\n        self.items = somelist\n\n    def __str__(self):\n        return f\"ListDrop({self.items})\"\n\n    def __html__(self):\n        lis = \"\\n\".join(f\"  &lt;li&gt;{item}&lt;/li&gt;\" for item in self.items)\n        return f\"&lt;ul&gt;\\n{lis}\\n&lt;/ul&gt;\"\n\n\nenv = Environment(auto_escape=True)\ntemplate = env.from_string(r\"{{ products }}\")\nprint(template.render(products=ListDrop([\"Shoe\", \"Hat\", \"Ball\"])))\n</code></pre> output<pre><code>&lt;ul&gt;\n  &lt;li&gt;Shoe&lt;/li&gt;\n  &lt;li&gt;Hat&lt;/li&gt;\n  &lt;li&gt;Ball&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>"},{"location":"variables_and_drops/#__getitem_async__","title":"<code>__getitem_async__</code>","text":"<p>If an instance of a drop that implements <code>__getitem_async__()</code> appears in a <code>render_async()</code> context, <code>__getitem_async__()</code> will be awaited instead of calling <code>__getitem__()</code>.</p> <pre><code>class AsyncCollection(abc.Mapping):\n    def __init__(self, val):\n        self.keys = [\"products\"]\n        self.cached_products = []\n\n    def __len__(self):\n        return 1\n\n    def __iter__(self):\n        return iter(self[\"products\"])\n\n    async def __aiter__(self):\n        # Note that Liquid's built-in `for` loop does not yet support async iteration.\n        return iter(self.__getitem_async__(\"products\"))\n\n    def __getitem__(self, k):\n        if not self.cached_products:\n            # Blocking IO here\n            self.cached_products = get_stuff_from_database()\n        return self.cache_products\n\n    async def __getitem_async__(self, k):\n        if not self.cached_products:\n            # Do async IO here.\n            self.cached_products = await get_stuff_from_database_async()\n        return self.cache_products\n</code></pre>"},{"location":"variables_and_drops/#other-magic-methods","title":"Other magic methods","text":"<p>Other Python magic methods will work with Liquid filters and special properties too.</p> <pre><code>from liquid2 import Environment\n\nenv = Environment()\n\nclass Foo:\n    def __int__(self):\n        return 7\n\n    def __str__(self):\n        return \"Bar\"\n\n    def __len__(self):\n        return 5\n\n\ntemplate = env.from_string(\n    \"\"\"\\\n{{ foo }}\n{{ foo | plus: 2 }}\n{{ foo.size }}\n\"\"\"\n)\n\nprint(template.render(foo=Foo()))\n</code></pre> output<pre><code>Bar\n9\n5\n</code></pre>"},{"location":"variables_and_drops/#undefined-variables","title":"Undefined variables","text":"<p>At render time, if a variable can not be resolved, and instance of <code>Undefined</code> is used instead. We can customize template rendering behavior by implementing some of Python's \"magic\" methods on a subclass of <code>Undefined</code>.</p>"},{"location":"variables_and_drops/#default-undefined","title":"Default undefined","text":"<p>All operations on the default <code>Undefined</code> type are silently ignored and, when rendered, it produces an empty string. For example, you can access properties and iterate an undefined variable without error.</p> <pre><code>Hello {{ nosuchthing }}\n{% for thing in nosuchthing %}\n    {{ thing }}\n{% endfor %}\n</code></pre> output<pre><code>Hello\n</code></pre>"},{"location":"variables_and_drops/#strict-undefined","title":"Strict undefined","text":"<p>When <code>StrictUndefined</code> is passed as the <code>undefined</code> argument to an <code>Environment</code>, any operation on an undefined variable will raise an <code>UndefinedError</code>.</p> <pre><code>from liquid2 import Environment, StrictUndefined\n\nenv = Environment(undefined=StrictUndefined)\ntemplate = env.from_string(\"Hello {{ nosuchthing }}\")\ntemplate.render()\n# liquid2.exceptions.UndefinedError: 'nosuchthing' is undefined\n# -&gt; 'Hello {{ nosuchthing }}' 1:9\n# |\n# 1 | Hello {{ nosuchthing }}\n# |          ^^^^^^^^^^^ 'nosuchthing' is undefined\n</code></pre>"},{"location":"variables_and_drops/#falsy-strict-undefined","title":"Falsy strict undefined","text":"<p><code>FalsyStrictUndefined</code> is the same as <code>StrictUndefined</code>, but can be tested for truthiness and equality without raising an exception.</p> <pre><code>from liquid2 import Environment\nfrom liquid2 import FalsyStrictUndefined\n\nenv = Environment(undefined=FalsyStrictUndefined)\ntemplate = env.from_string(\"{% if nosuchthing %}foo{% else %}bar{% endif %}\")\nprint(template.render())  # bar\n</code></pre>"},{"location":"whitespace_control/","title":"Whitespace control","text":"<p>By default, all whitespace immediately before and after a tag is preserved. This can result in a lot of unwanted whitespace.</p> <pre><code>&lt;ul&gt;\n{% for x in (1..4) %}\n  &lt;li&gt;{{ x }}&lt;/li&gt;\n{% endfor %}\n&lt;/ul&gt;\n</code></pre> output<pre><code>&lt;ul&gt;\n\n  &lt;li&gt;1&lt;/li&gt;\n\n  &lt;li&gt;2&lt;/li&gt;\n\n  &lt;li&gt;3&lt;/li&gt;\n\n  &lt;li&gt;4&lt;/li&gt;\n\n&lt;/ul&gt;\n</code></pre> <p>By inserting special characters inside tags and output statements, template authors can choose what whitespace trimming rules to apply. <code>-</code> is used to remove all whitespace until the next printing character, and <code>~</code> will trim immediate carriage returns and newlines, leaving spaces and tabs.</p> <p>There's also <code>+</code>, which has no effect with the default trim mode.</p> <pre><code>&lt;ul&gt;\n{% for x in (1..4) ~%}\n  &lt;li&gt;{{ x }}&lt;/li&gt;\n{% endfor -%}\n&lt;/ul&gt;\n</code></pre> output<pre><code>&lt;ul&gt;\n  &lt;li&gt;1&lt;/li&gt;\n  &lt;li&gt;2&lt;/li&gt;\n  &lt;li&gt;3&lt;/li&gt;\n  &lt;li&gt;4&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>"},{"location":"whitespace_control/#default-trim","title":"Default trim","text":"<p>You can change the default whitespace trimming mode using the <code>default_trim</code> argument when constructing an <code>Environment</code>.</p> <p>Setting <code>default_trim</code> to <code>WhitespaceControl.MINUS</code> will automatically remove all whitespace unless it is explicitly overridden by the template author using <code>+</code> or <code>~</code>.</p> <p>Setting <code>default_trim</code> to <code>WhitespaceControl.TILDE</code> will automatically remove immediate carriage returns an newlines unless it is explicitly overridden by the template author using <code>+</code> or <code>-</code>.</p>"},{"location":"whitespace_control/#customizing-whitespace-control","title":"Customizing whitespace control","text":"<p><code>Environment.trim()</code> is called when stripping whitespace from template content. You can override <code>trim()</code> in an <code>Environment</code> subclass to define your own whitespace control behavior, interpreting <code>-</code>, <code>+</code> and <code>~</code> however you see fit.</p> <pre><code>from liquid2 import Environment\nfrom liquid2 import WhitespaceControl\n\nclass MyLiquidEnvironment(Environment):\n\n    def trim(\n        self,\n        text: str,\n        left_trim: WhitespaceControl,\n        right_trim: WhitespaceControl,\n    ) -&gt; str:\n        \"\"\"Return _text_ after applying whitespace control.\"\"\"\n        if left_trim == WhitespaceControl.DEFAULT:\n            left_trim = self.default_trim\n\n        if right_trim == WhitespaceControl.DEFAULT:\n            right_trim = self.default_trim\n\n        if left_trim == right_trim:\n            if left_trim == WhitespaceControl.MINUS:\n                return text.strip()\n            if left_trim == WhitespaceControl.TILDE:\n                return text.strip(\"\\r\\n\")\n            return text\n\n        if left_trim == WhitespaceControl.MINUS:\n            text = text.lstrip()\n        elif left_trim == WhitespaceControl.TILDE:\n            text = text.lstrip(\"\\r\\n\")\n\n        if right_trim == WhitespaceControl.MINUS:\n            text = text.rstrip()\n        elif right_trim == WhitespaceControl.TILDE:\n            text = text.rstrip(\"\\r\\n\")\n\n        return text\n</code></pre>"},{"location":"whitespace_control/#suppressing-blank-control-flow-blocks","title":"Suppressing blank control flow blocks","text":"<p>It is assumed that a conditional block containing no template content or output statements should not render its whitespace. For example, the newlines between the tags and spaces before <code>assign</code> here are automatically suppressed, regardless of the default trim mode.</p> <pre><code>{% if true %}\n    {% assign x = y %}\n{% endif %}\n</code></pre> <p>You can disable this feature by subclassing <code>Environment</code> and setting the <code>suppress_blank_control_flow_blocks</code> class attribute to <code>False</code>.</p> <pre><code>from liquid2 import Environment\n\nclass MyEnvironment(Environment):\n    suppress_blank_control_flow_blocks = False\n</code></pre>"},{"location":"api/ast/","title":"AST","text":""},{"location":"api/ast/#liquid2.Node","title":"liquid2.Node","text":"<p>               Bases: <code>ABC</code></p> <p>Base class for all template nodes.</p>"},{"location":"api/ast/#liquid2.Node.blank","title":"blank  <code>instance-attribute</code>","text":"<pre><code>blank = True\n</code></pre> <p>If True, indicates that the node, when rendered, produces no output text or only whitespace.</p> <p>The output node (<code>{{ something }}</code>) and echo tag are exception. Even if they evaluate to an empty or blank string, they are not considered \"blank\".</p>"},{"location":"api/ast/#liquid2.Node.block_scope","title":"block_scope","text":"<pre><code>block_scope() -&gt; Iterable[Identifier]\n</code></pre> <p>Return variables this node adds to the node's block scope.</p>"},{"location":"api/ast/#liquid2.Node.children","title":"children","text":"<pre><code>children(\n    static_context: RenderContext,\n    *,\n    include_partials: bool = True\n) -&gt; Iterable[Node]\n</code></pre> <p>Return this node's children.</p>"},{"location":"api/ast/#liquid2.Node.children_async","title":"children_async  <code>async</code>","text":"<pre><code>children_async(\n    static_context: RenderContext,\n    *,\n    include_partials: bool = True\n) -&gt; Iterable[Node]\n</code></pre> <p>An async version of <code>children()</code>.</p>"},{"location":"api/ast/#liquid2.Node.expressions","title":"expressions","text":"<pre><code>expressions() -&gt; Iterable[Expression]\n</code></pre> <p>Return this node's expressions.</p>"},{"location":"api/ast/#liquid2.Node.partial_scope","title":"partial_scope","text":"<pre><code>partial_scope() -&gt; Partial | None\n</code></pre> <p>Return information about a partial template loaded by this node.</p>"},{"location":"api/ast/#liquid2.Node.raise_for_disabled","title":"raise_for_disabled","text":"<pre><code>raise_for_disabled(disabled_tags: set[str]) -&gt; None\n</code></pre> <p>Raise a <code>DisabledTagError</code> if this node has a name in disabled_tags.</p>"},{"location":"api/ast/#liquid2.Node.render","title":"render","text":"<pre><code>render(context: RenderContext, buffer: TextIO) -&gt; int\n</code></pre> <p>Write this node's content to buffer.</p>"},{"location":"api/ast/#liquid2.Node.render_async","title":"render_async  <code>async</code>","text":"<pre><code>render_async(context: RenderContext, buffer: TextIO) -&gt; int\n</code></pre> <p>Write this node's content to buffer.</p>"},{"location":"api/ast/#liquid2.Node.render_to_output","title":"render_to_output  <code>abstractmethod</code>","text":"<pre><code>render_to_output(\n    context: RenderContext, buffer: TextIO\n) -&gt; int\n</code></pre> <p>Render the node to the output buffer.</p> Return <p>The number of \"characters\" written to the output buffer.</p>"},{"location":"api/ast/#liquid2.Node.render_to_output_async","title":"render_to_output_async  <code>async</code>","text":"<pre><code>render_to_output_async(\n    context: RenderContext, buffer: TextIO\n) -&gt; int\n</code></pre> <p>An async version of render_to_output.</p>"},{"location":"api/ast/#liquid2.Node.template_scope","title":"template_scope","text":"<pre><code>template_scope() -&gt; Iterable[Identifier]\n</code></pre> <p>Return variables this node adds to the template local scope.</p>"},{"location":"api/ast/#liquid2.BlockNode","title":"liquid2.BlockNode","text":"<p>               Bases: <code>Node</code></p> <p>A node containing a sequence of other nodes.</p>"},{"location":"api/ast/#liquid2.BlockNode.children","title":"children","text":"<pre><code>children(\n    static_context: RenderContext,\n    *,\n    include_partials: bool = True\n) -&gt; Iterable[Node]\n</code></pre> <p>Return this node's children.</p>"},{"location":"api/ast/#liquid2.BlockNode.render_to_output","title":"render_to_output","text":"<pre><code>render_to_output(\n    context: RenderContext, buffer: TextIO\n) -&gt; int\n</code></pre> <p>Render the node to the output buffer.</p>"},{"location":"api/ast/#liquid2.BlockNode.render_to_output_async","title":"render_to_output_async  <code>async</code>","text":"<pre><code>render_to_output_async(\n    context: RenderContext, buffer: TextIO\n) -&gt; int\n</code></pre> <p>Render the node to the output buffer.</p>"},{"location":"api/ast/#liquid2.ConditionalBlockNode","title":"liquid2.ConditionalBlockNode","text":"<p>               Bases: <code>Node</code></p> <p>A node containing a sequence of other nodes guarded by a Boolean expression.</p>"},{"location":"api/ast/#liquid2.ConditionalBlockNode.children","title":"children","text":"<pre><code>children(\n    static_context: RenderContext,\n    *,\n    include_partials: bool = True\n) -&gt; Iterable[Node]\n</code></pre> <p>Return this node's children.</p>"},{"location":"api/ast/#liquid2.ConditionalBlockNode.expressions","title":"expressions","text":"<pre><code>expressions() -&gt; Iterable[Expression]\n</code></pre> <p>Return this node's expressions.</p>"},{"location":"api/ast/#liquid2.ConditionalBlockNode.render_to_output","title":"render_to_output","text":"<pre><code>render_to_output(\n    context: RenderContext, buffer: TextIO\n) -&gt; int\n</code></pre> <p>Render the node to the output buffer.</p>"},{"location":"api/ast/#liquid2.ConditionalBlockNode.render_to_output_async","title":"render_to_output_async  <code>async</code>","text":"<pre><code>render_to_output_async(\n    context: RenderContext, buffer: TextIO\n) -&gt; int\n</code></pre> <p>Render the node to the output buffer.</p>"},{"location":"api/ast/#liquid2.ast.Partial","title":"liquid2.ast.Partial  <code>dataclass</code>","text":"<p>Partial template meta data.</p>"},{"location":"api/ast/#liquid2.ast.Partial.in_scope","title":"in_scope  <code>instance-attribute</code>","text":"<pre><code>in_scope: Iterable[Identifier]\n</code></pre> <p>Names that will be added to the partial template scope.</p>"},{"location":"api/ast/#liquid2.ast.Partial.name","title":"name  <code>instance-attribute</code>","text":"<pre><code>name: Expression\n</code></pre> <p>An expression resolving to the name associated with the partial template.</p>"},{"location":"api/ast/#liquid2.ast.Partial.scope","title":"scope  <code>instance-attribute</code>","text":"<pre><code>scope: PartialScope\n</code></pre> <p>The kind of scope the partial template should have when loaded.</p>"},{"location":"api/ast/#liquid2.ast.PartialScope","title":"liquid2.ast.PartialScope","text":"<p>               Bases: <code>Enum</code></p> <p>The kind of scope a partial template should have when loaded.</p>"},{"location":"api/babel/","title":"Babel","text":"<p>These are configurable class-based filters implementing internationalization and localization features.</p>"},{"location":"api/babel/#liquid2.builtin.filters.translate.BaseTranslateFilter","title":"liquid2.builtin.filters.translate.BaseTranslateFilter","text":"<p>Base class for the default translation filters.</p> PARAMETER DESCRIPTION <code>translations_var</code> <p>The name of a render context variable that resolves to a gettext <code>Translations</code> class. Defaults to <code>\"translations\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'translations'</code> </p> <code>default_translations</code> <p>A fallback translations class to use if <code>translations_var</code> can not be resolves. Defaults to <code>NullTranslations</code>.</p> <p> TYPE: <code>Translations | None</code> DEFAULT: <code>None</code> </p> <code>message_interpolation</code> <p>If <code>True</code> (default), perform printf-style string interpolation on the translated message, using keyword arguments passed to the filter function.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> <code>auto_escape_message</code> <p>If <code>True</code> and the current environment has <code>auto_escape</code> set to <code>True</code>, the filter's left value will be escaped before translation. Defaults to <code>False</code>.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p>"},{"location":"api/babel/#liquid2.builtin.filters.translate.BaseTranslateFilter.format_message","title":"format_message","text":"<pre><code>format_message(\n    context: RenderContext,\n    message_text: str,\n    message_vars: dict[str, Any],\n) -&gt; str\n</code></pre> <p>Return the message string formatted with the given message variables.</p>"},{"location":"api/babel/#liquid2.builtin.DateTime","title":"liquid2.builtin.DateTime","text":"<p>A Liquid filter for formatting datetime objects.</p> PARAMETER DESCRIPTION <code>timezone_var</code> <p>The name of a render context variable that resolves to a timezone. Defaults to <code>\"timezone\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'timezone'</code> </p> <code>default_timezone</code> <p>A fallback timezone to use if <code>timezone_var</code> can not be resolved. Defaults to <code>\"UTC\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'UTC'</code> </p> <code>locale_var</code> <p>The name of a render context variable that resolves to the current locale. Defaults to <code>\"locale\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'locale'</code> </p> <code>default_locale</code> <p>A fallback locale to use if <code>locale_var</code> can not be resolved. Defaults to <code>\"en_US\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'en_US'</code> </p> <code>format_var</code> <p>The name of a render context variable that resolves to the current datetime format string. Defaults to <code>\"datetime_format\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'datetime_format'</code> </p> <code>default_format</code> <p>A fallback datetime format that is used if <code>format_var</code> can not be resolved. Defaults to <code>\"medium\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'medium'</code> </p> <code>input_timezone_var</code> <p>The name of a render context variable that resolves to a timezone for parsing datetimes entered as strings. Defaults to <code>\"input_timezone\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'input_timezone'</code> </p> <code>default_input_timezone</code> <p>A fallback timezone to use if <code>input_timezone_var</code> can not be resolved. Defaults to <code>\"UTC\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'UTC'</code> </p>"},{"location":"api/babel/#liquid2.builtin.DateTime.__call__","title":"__call__","text":"<pre><code>__call__(\n    left: object,\n    *,\n    context: RenderContext,\n    format: str | None = None\n) -&gt; str\n</code></pre> <p>Apply the filter and return the result.</p>"},{"location":"api/babel/#liquid2.builtin.GetText","title":"liquid2.builtin.GetText","text":"<p>               Bases: <code>BaseTranslateFilter</code>, <code>TranslatableFilter</code></p> <p>A Liquid filter equivalent of <code>gettext.gettext</code>.</p>"},{"location":"api/babel/#liquid2.builtin.NGetText","title":"liquid2.builtin.NGetText","text":"<p>               Bases: <code>BaseTranslateFilter</code>, <code>TranslatableFilter</code></p> <p>A Liquid filter equivalent of <code>gettext.ngettext</code>.</p>"},{"location":"api/babel/#liquid2.builtin.NGetText.__call__","title":"__call__","text":"<pre><code>__call__(\n    __left: object,\n    __plural: str,\n    __count: object,\n    *,\n    context: RenderContext,\n    **kwargs: Any\n) -&gt; str\n</code></pre> <p>Apply the filter and return the result.</p>"},{"location":"api/babel/#liquid2.builtin.NPGetText","title":"liquid2.builtin.NPGetText","text":"<p>               Bases: <code>BaseTranslateFilter</code>, <code>TranslatableFilter</code></p> <p>A Liquid filter equivalent of <code>gettext.npgettext</code>.</p>"},{"location":"api/babel/#liquid2.builtin.Number","title":"liquid2.builtin.Number","text":"<p>A Liquid filter for formatting decimal values.</p> PARAMETER DESCRIPTION <code>decimal_quantization_var</code> <p>The name of a render context variable that resolves to the decimal quantization to be used. Defaults to <code>\"decimal_quantization\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'decimal_quantization'</code> </p> <code>default_decimal_quantization</code> <p>A fallback decimal quantization if <code>decimal_quantization_var</code> can not be resolved. Defaults to <code>False</code>.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>locale_var</code> <p>The name of a render context variable that resolves to the current locale. Defaults to <code>\"locale\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'locale'</code> </p> <code>default_locale</code> <p>A fallback locale to use if <code>locale_var</code> can not be resolved. Defaults to <code>\"en_US\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'en_US'</code> </p> <code>format_var</code> <p>The name of a render context variable that resolves to the current decimal format string. Defaults to <code>\"decimal_format\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'decimal_format'</code> </p> <code>default_format</code> <p>A fallback decimal format that is used if <code>format_var</code> can not be resolved. Defaults to <code>None</code>, which means the standard format for the current locale will be used.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>input_locale_var</code> <p>The name of a render context variable that resolves to a locale suitable for parsing input strings to decimals. Defaults to <code>\"input_locale\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'input_locale'</code> </p> <code>default_input_locale</code> <p>A fallback locale to use if <code>input_locale_var</code> can not be resolved. Defaults to <code>\"en_US\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'en_US'</code> </p>"},{"location":"api/babel/#liquid2.builtin.Number.__call__","title":"__call__","text":"<pre><code>__call__(\n    left: object,\n    *,\n    context: RenderContext,\n    group_separator: bool = True\n) -&gt; str\n</code></pre> <p>Apply the filter and return the result.</p>"},{"location":"api/babel/#liquid2.builtin.Translate","title":"liquid2.builtin.Translate","text":"<p>               Bases: <code>BaseTranslateFilter</code>, <code>TranslatableFilter</code></p> <p>A Liquid filter for translating strings to other languages.</p> <p>Depending on the keyword arguments provided when the resulting filter is called, it could behave like gettext, ngettext, pgettext or npgettext.</p>"},{"location":"api/babel/#liquid2.builtin.Translate.__call__","title":"__call__","text":"<pre><code>__call__(\n    __left: object,\n    __message_context: object = None,\n    *,\n    context: RenderContext,\n    **kwargs: Any\n) -&gt; str\n</code></pre> <p>Apply the filter and return the result.</p>"},{"location":"api/babel/#liquid2.builtin.Unit","title":"liquid2.builtin.Unit","text":"<p>A Liquid filter for formatting units of measurement.</p> PARAMETER DESCRIPTION <code>locale_var</code> <p>The name of a render context variable that resolves to the current locale. Defaults to <code>\"locale\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'locale'</code> </p> <code>default_locale</code> <p>A fallback locale to use if <code>locale_var</code> can not be resolved. Defaults to <code>\"en_US\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'en_US'</code> </p> <code>length_var</code> <p>The name of a render context variable that resolves to a unit format length. Should be one of \"short\", \"long\" or \"narrow\". Defaults to <code>\"long\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'unit_length'</code> </p> <code>default_length</code> <p>A fallback format length to use if <code>length_var</code> can not be resolved.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'long'</code> </p> <code>format_var</code> <p>The name of a render context variable that resolves to a decimal format string. Defaults to <code>\"unit_format\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'unit_format'</code> </p> <code>default_format</code> <p>A fallback decimal format to use if <code>format_var</code> can not be resolved. Defaults to <code>None</code>, meaning the locale's standard decimal format is used.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>input_locale_var</code> <p>The name of a render context variable that resolves to a locale suitable for parsing input strings to decimals. Defaults to <code>\"input_locale\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'input_locale'</code> </p> <code>default_input_locale</code> <p>A fallback locale to use if <code>input_locale_var</code> can not be resolved. Defaults to <code>\"en_US\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'en_US'</code> </p>"},{"location":"api/builtin/","title":"Builtin","text":""},{"location":"api/builtin/#liquid2.builtin.register_default_tags_and_filters","title":"liquid2.builtin.register_default_tags_and_filters","text":"<pre><code>register_default_tags_and_filters(env: Environment) -&gt; None\n</code></pre> <p>Register standard tags and filters with an environment.</p>"},{"location":"api/builtin/#liquid2.builtin.BaseTranslateFilter","title":"liquid2.builtin.BaseTranslateFilter","text":"<p>Base class for the default translation filters.</p> PARAMETER DESCRIPTION <code>translations_var</code> <p>The name of a render context variable that resolves to a gettext <code>Translations</code> class. Defaults to <code>\"translations\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'translations'</code> </p> <code>default_translations</code> <p>A fallback translations class to use if <code>translations_var</code> can not be resolves. Defaults to <code>NullTranslations</code>.</p> <p> TYPE: <code>Translations | None</code> DEFAULT: <code>None</code> </p> <code>message_interpolation</code> <p>If <code>True</code> (default), perform printf-style string interpolation on the translated message, using keyword arguments passed to the filter function.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> <code>auto_escape_message</code> <p>If <code>True</code> and the current environment has <code>auto_escape</code> set to <code>True</code>, the filter's left value will be escaped before translation. Defaults to <code>False</code>.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p>"},{"location":"api/builtin/#liquid2.builtin.BaseTranslateFilter.format_message","title":"format_message","text":"<pre><code>format_message(\n    context: RenderContext,\n    message_text: str,\n    message_vars: dict[str, Any],\n) -&gt; str\n</code></pre> <p>Return the message string formatted with the given message variables.</p>"},{"location":"api/builtin/#liquid2.builtin.Currency","title":"liquid2.builtin.Currency","text":"<p>A Liquid filter for formatting currency values.</p> PARAMETER DESCRIPTION <code>currency_code_var</code> <p>The name of a render context variable that resolves to the current currency code. Defaults to <code>\"currency_code\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'currency_code'</code> </p> <code>default_currency_code</code> <p>A fallback currency code if <code>currency_code_var</code> can not be resolved. Defaults to <code>\"USD\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'USD'</code> </p> <code>locale_var</code> <p>The name of a render context variable that resolves to the current locale. Defaults to <code>\"locale\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'locale'</code> </p> <code>default_locale</code> <p>A fallback locale to use if <code>locale_var</code> can not be resolved. Defaults to <code>\"en_US\"</code>.</p> <p> DEFAULT: <code>'en_US'</code> </p> <code>format_var</code> <p>The name of a render context variable that resolves to the current currency format string. Defaults to <code>\"currency_format\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'currency_format'</code> </p> <code>default_format</code> <p>A fallback currency format that is used if <code>format_var</code> can not be resolved. Defaults to <code>None</code>, which means the standard format for the current locale will be used.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>currency_digits</code> <p>Indicates if the format should override locale specific trailing digit behavior. Defaults to <code>False</code>.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> <code>input_locale_var</code> <p>The name of a render context variable that resolves to a locale suitable for parsing input strings to decimals. Defaults to <code>\"input_locale\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'input_locale'</code> </p> <code>default_input_locale</code> <p>A fallback locale to use if <code>input_locale_var</code> can not be resolved. Defaults to <code>\"en_US\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'en_US'</code> </p>"},{"location":"api/builtin/#liquid2.builtin.Currency.__call__","title":"__call__","text":"<pre><code>__call__(\n    left: object,\n    *,\n    context: RenderContext,\n    group_separator: bool = True\n) -&gt; str\n</code></pre> <p>Apply the filter and return the result.</p>"},{"location":"api/builtin/#liquid2.builtin.DateTime","title":"liquid2.builtin.DateTime","text":"<p>A Liquid filter for formatting datetime objects.</p> PARAMETER DESCRIPTION <code>timezone_var</code> <p>The name of a render context variable that resolves to a timezone. Defaults to <code>\"timezone\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'timezone'</code> </p> <code>default_timezone</code> <p>A fallback timezone to use if <code>timezone_var</code> can not be resolved. Defaults to <code>\"UTC\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'UTC'</code> </p> <code>locale_var</code> <p>The name of a render context variable that resolves to the current locale. Defaults to <code>\"locale\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'locale'</code> </p> <code>default_locale</code> <p>A fallback locale to use if <code>locale_var</code> can not be resolved. Defaults to <code>\"en_US\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'en_US'</code> </p> <code>format_var</code> <p>The name of a render context variable that resolves to the current datetime format string. Defaults to <code>\"datetime_format\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'datetime_format'</code> </p> <code>default_format</code> <p>A fallback datetime format that is used if <code>format_var</code> can not be resolved. Defaults to <code>\"medium\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'medium'</code> </p> <code>input_timezone_var</code> <p>The name of a render context variable that resolves to a timezone for parsing datetimes entered as strings. Defaults to <code>\"input_timezone\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'input_timezone'</code> </p> <code>default_input_timezone</code> <p>A fallback timezone to use if <code>input_timezone_var</code> can not be resolved. Defaults to <code>\"UTC\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'UTC'</code> </p>"},{"location":"api/builtin/#liquid2.builtin.DateTime.__call__","title":"__call__","text":"<pre><code>__call__(\n    left: object,\n    *,\n    context: RenderContext,\n    format: str | None = None\n) -&gt; str\n</code></pre> <p>Apply the filter and return the result.</p>"},{"location":"api/builtin/#liquid2.builtin.GetText","title":"liquid2.builtin.GetText","text":"<p>               Bases: <code>BaseTranslateFilter</code>, <code>TranslatableFilter</code></p> <p>A Liquid filter equivalent of <code>gettext.gettext</code>.</p>"},{"location":"api/builtin/#liquid2.builtin.JSON","title":"liquid2.builtin.JSON","text":"<p>Serialize an object to a JSON formatted string.</p> PARAMETER DESCRIPTION <code>default</code> <p>A function passed to <code>json.dumps</code>. This function is called in the event that the JSONEncoder does not know how to serialize an object. Defaults to <code>None</code>.</p> <p> TYPE: <code>Callable[[Any], Any] | None</code> DEFAULT: <code>None</code> </p>"},{"location":"api/builtin/#liquid2.builtin.JSON.__call__","title":"__call__","text":"<pre><code>__call__(left: object, indent: object | None = None) -&gt; str\n</code></pre> <p>Apply this filter to left and return the result.</p>"},{"location":"api/builtin/#liquid2.builtin.NGetText","title":"liquid2.builtin.NGetText","text":"<p>               Bases: <code>BaseTranslateFilter</code>, <code>TranslatableFilter</code></p> <p>A Liquid filter equivalent of <code>gettext.ngettext</code>.</p>"},{"location":"api/builtin/#liquid2.builtin.NGetText.__call__","title":"__call__","text":"<pre><code>__call__(\n    __left: object,\n    __plural: str,\n    __count: object,\n    *,\n    context: RenderContext,\n    **kwargs: Any\n) -&gt; str\n</code></pre> <p>Apply the filter and return the result.</p>"},{"location":"api/builtin/#liquid2.builtin.NPGetText","title":"liquid2.builtin.NPGetText","text":"<p>               Bases: <code>BaseTranslateFilter</code>, <code>TranslatableFilter</code></p> <p>A Liquid filter equivalent of <code>gettext.npgettext</code>.</p>"},{"location":"api/builtin/#liquid2.builtin.Number","title":"liquid2.builtin.Number","text":"<p>A Liquid filter for formatting decimal values.</p> PARAMETER DESCRIPTION <code>decimal_quantization_var</code> <p>The name of a render context variable that resolves to the decimal quantization to be used. Defaults to <code>\"decimal_quantization\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'decimal_quantization'</code> </p> <code>default_decimal_quantization</code> <p>A fallback decimal quantization if <code>decimal_quantization_var</code> can not be resolved. Defaults to <code>False</code>.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>locale_var</code> <p>The name of a render context variable that resolves to the current locale. Defaults to <code>\"locale\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'locale'</code> </p> <code>default_locale</code> <p>A fallback locale to use if <code>locale_var</code> can not be resolved. Defaults to <code>\"en_US\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'en_US'</code> </p> <code>format_var</code> <p>The name of a render context variable that resolves to the current decimal format string. Defaults to <code>\"decimal_format\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'decimal_format'</code> </p> <code>default_format</code> <p>A fallback decimal format that is used if <code>format_var</code> can not be resolved. Defaults to <code>None</code>, which means the standard format for the current locale will be used.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>input_locale_var</code> <p>The name of a render context variable that resolves to a locale suitable for parsing input strings to decimals. Defaults to <code>\"input_locale\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'input_locale'</code> </p> <code>default_input_locale</code> <p>A fallback locale to use if <code>input_locale_var</code> can not be resolved. Defaults to <code>\"en_US\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'en_US'</code> </p>"},{"location":"api/builtin/#liquid2.builtin.Number.__call__","title":"__call__","text":"<pre><code>__call__(\n    left: object,\n    *,\n    context: RenderContext,\n    group_separator: bool = True\n) -&gt; str\n</code></pre> <p>Apply the filter and return the result.</p>"},{"location":"api/builtin/#liquid2.builtin.PGetText","title":"liquid2.builtin.PGetText","text":"<p>               Bases: <code>BaseTranslateFilter</code>, <code>TranslatableFilter</code></p> <p>A Liquid filter equivalent of <code>gettext.pgettext</code>.</p>"},{"location":"api/builtin/#liquid2.builtin.Translate","title":"liquid2.builtin.Translate","text":"<p>               Bases: <code>BaseTranslateFilter</code>, <code>TranslatableFilter</code></p> <p>A Liquid filter for translating strings to other languages.</p> <p>Depending on the keyword arguments provided when the resulting filter is called, it could behave like gettext, ngettext, pgettext or npgettext.</p>"},{"location":"api/builtin/#liquid2.builtin.Translate.__call__","title":"__call__","text":"<pre><code>__call__(\n    __left: object,\n    __message_context: object = None,\n    *,\n    context: RenderContext,\n    **kwargs: Any\n) -&gt; str\n</code></pre> <p>Apply the filter and return the result.</p>"},{"location":"api/builtin/#liquid2.builtin.TranslateTag","title":"liquid2.builtin.TranslateTag","text":"<p>               Bases: <code>Tag</code></p> <p>The built-in \"translate\" tag.</p>"},{"location":"api/builtin/#liquid2.builtin.TranslateTag.parse","title":"parse","text":"<pre><code>parse(stream: TokenStream) -&gt; TranslateNode\n</code></pre> <p>Parse tokens from stream into an AST node.</p>"},{"location":"api/builtin/#liquid2.builtin.TranslateTag.validate_message_block","title":"validate_message_block","text":"<pre><code>validate_message_block(\n    block: BlockNode | None,\n) -&gt; MessageBlock | None\n</code></pre> <p>Check that a translation message block does not contain disallowed markup.</p>"},{"location":"api/builtin/#liquid2.builtin.Unit","title":"liquid2.builtin.Unit","text":"<p>A Liquid filter for formatting units of measurement.</p> PARAMETER DESCRIPTION <code>locale_var</code> <p>The name of a render context variable that resolves to the current locale. Defaults to <code>\"locale\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'locale'</code> </p> <code>default_locale</code> <p>A fallback locale to use if <code>locale_var</code> can not be resolved. Defaults to <code>\"en_US\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'en_US'</code> </p> <code>length_var</code> <p>The name of a render context variable that resolves to a unit format length. Should be one of \"short\", \"long\" or \"narrow\". Defaults to <code>\"long\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'unit_length'</code> </p> <code>default_length</code> <p>A fallback format length to use if <code>length_var</code> can not be resolved.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'long'</code> </p> <code>format_var</code> <p>The name of a render context variable that resolves to a decimal format string. Defaults to <code>\"unit_format\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'unit_format'</code> </p> <code>default_format</code> <p>A fallback decimal format to use if <code>format_var</code> can not be resolved. Defaults to <code>None</code>, meaning the locale's standard decimal format is used.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>input_locale_var</code> <p>The name of a render context variable that resolves to a locale suitable for parsing input strings to decimals. Defaults to <code>\"input_locale\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'input_locale'</code> </p> <code>default_input_locale</code> <p>A fallback locale to use if <code>input_locale_var</code> can not be resolved. Defaults to <code>\"en_US\"</code>.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'en_US'</code> </p>"},{"location":"api/convenience/","title":"Convenience functions","text":""},{"location":"api/convenience/#liquid2.parse","title":"liquid2.parse","text":"<pre><code>parse(\n    source: str,\n    *,\n    name: str = \"\",\n    globals: Mapping[str, object] | None = None\n) -&gt; Template\n</code></pre> <p>Parse source as a Liquid template using the default environment.</p> PARAMETER DESCRIPTION <code>source</code> <p>Liquid template source code.</p> <p> TYPE: <code>str</code> </p> <code>name</code> <p>An optional name for the template used in error messages.</p> <p> TYPE: <code>str</code> DEFAULT: <code>''</code> </p> <code>globals</code> <p>Variables that will be available to the resulting template.</p> <p> TYPE: <code>Mapping[str, object] | None</code> DEFAULT: <code>None</code> </p> Return <p>A new template bound to the default environment.</p>"},{"location":"api/convenience/#liquid2.render","title":"liquid2.render","text":"<pre><code>render(source: str, *args: Any, **kwargs: Any) -&gt; str\n</code></pre> <p>Parse and render source as a Liquid template using the default environment.</p> <p>Additional arguments are passed to <code>dict()</code> and will be available as template variables.</p> PARAMETER DESCRIPTION <code>source</code> <p>Liquid template source code.</p> <p> TYPE: <code>str</code> </p> <code>*args</code> <p>dict-like arguments added to the template render context.</p> <p> TYPE: <code>Any</code> DEFAULT: <code>()</code> </p> <code>**kwargs</code> <p>dict-like arguments added to the template render context.</p> <p> TYPE: <code>Any</code> DEFAULT: <code>{}</code> </p> Return <p>The result of rendering source as a Liquid template.</p>"},{"location":"api/convenience/#liquid2.render_async","title":"liquid2.render_async  <code>async</code>","text":"<pre><code>render_async(source: str, *args: Any, **kwargs: Any) -&gt; str\n</code></pre> <p>Parse and render source as a Liquid template using the default environment.</p> <p>Additional arguments are passed to <code>dict()</code> and will be available as template variables.</p> PARAMETER DESCRIPTION <code>source</code> <p>Liquid template source code.</p> <p> TYPE: <code>str</code> </p> <code>*args</code> <p>dict-like arguments added to the template render context.</p> <p> TYPE: <code>Any</code> DEFAULT: <code>()</code> </p> <code>**kwargs</code> <p>dict-like arguments added to the template render context.</p> <p> TYPE: <code>Any</code> DEFAULT: <code>{}</code> </p> Return <p>The result of rendering source as a Liquid template.</p>"},{"location":"api/convenience/#liquid2.extract_liquid","title":"liquid2.extract_liquid","text":"<pre><code>extract_liquid(\n    fileobj: TextIO,\n    keywords: list[str],\n    comment_tags: list[str] | None = None,\n    options: dict[object, object] | None = None,\n) -&gt; Iterator[MessageTuple]\n</code></pre> <p>A babel compatible translation message extraction method for Liquid templates.</p> <p>See https://babel.pocoo.org/en/latest/messages.html</p> <p>Keywords are the names of Liquid filters or tags operating on translatable strings. For a filter to contribute to message extraction, it must also appear as a child of a <code>FilteredExpression</code> and be a <code>TranslatableFilter</code>. Similarly, tags must produce a node that is a <code>TranslatableTag</code>.</p> <p>Where a Liquid comment contains a prefix in <code>comment_tags</code>, the comment will be attached to the translatable filter or tag immediately following the comment. Python Liquid's non-standard shorthand comments are not supported.</p> <p>Options are arguments passed to the <code>liquid.Template</code> constructor with the contents of <code>fileobj</code> as the template's source. Use <code>extract_from_template</code> to extract messages from an existing template bound to an existing environment.</p>"},{"location":"api/environment/","title":"Environment","text":""},{"location":"api/environment/#liquid2.Environment","title":"liquid2.Environment","text":"<p>Template parsing and rendering configuration.</p> <p>An <code>Environment</code> is where you might register custom tags and filters, or store global context variables that should be included with every template.</p> PARAMETER DESCRIPTION <code>loader</code> <p>A template loader from which template source text will be read when calling get_template or when rendering with the built-in <code>{% include %}</code> and <code>{% render %}</code>, among others. If <code>None</code>, the environment will be configured with an empty DictLoader.</p> <p> TYPE: <code>BaseLoader | None</code> DEFAULT: <code>None</code> </p> <code>globals</code> <p>An optional mapping of template variables that will be added to the render context of all templates rendered from the environment.</p> <p> TYPE: <code>Mapping[str, object] | None</code> DEFAULT: <code>None</code> </p> <code>auto_escape</code> <p>If <code>True</code>, automatically escape HTML text upon output, unless the text is explicitly marked as \"safe\".</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>undefined</code> <p>The Undefined type used to represent template variables that don't exist.</p> <p> TYPE: <code>Type[Undefined]</code> DEFAULT: <code>Undefined</code> </p> <code>default_trim</code> <p>The automatic whitespace stripping mode to use. This mode can then be overridden by template authors per Liquid tag using whitespace control symbols (<code>-</code>, <code>+</code>, <code>~</code>).</p> <p> TYPE: <code>WhitespaceControl</code> DEFAULT: <code>PLUS</code> </p>"},{"location":"api/environment/#liquid2.Environment.context_depth_limit","title":"context_depth_limit  <code>class-attribute</code>","text":"<pre><code>context_depth_limit: int = 30\n</code></pre> <p>Maximum number of times a render context can be extended or wrapped before raising a <code>ContextDepthError</code>.</p>"},{"location":"api/environment/#liquid2.Environment.default_trim","title":"default_trim  <code>instance-attribute</code>","text":"<pre><code>default_trim: WhitespaceControl = (\n    PLUS if default_trim == DEFAULT else default_trim\n)\n</code></pre> <p>The default whitespace trimming mode.</p>"},{"location":"api/environment/#liquid2.Environment.filters","title":"filters  <code>instance-attribute</code>","text":"<pre><code>filters: dict[str, Callable[..., Any]] = {}\n</code></pre> <p>The environment's filter register, mapping filter names to callables.</p>"},{"location":"api/environment/#liquid2.Environment.lexer_class","title":"lexer_class  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>lexer_class = Lexer\n</code></pre> <p>The lexer class to use when scanning template source text.</p>"},{"location":"api/environment/#liquid2.Environment.local_namespace_limit","title":"local_namespace_limit  <code>class-attribute</code>","text":"<pre><code>local_namespace_limit: int | None = None\n</code></pre> <p>Maximum number of bytes (according to sys.getsizeof) allowed in a template's local namespace before a <code>LocalNamespaceLimitError</code> is raised. We only count the size of the namespaces values, not the size of keys/names.</p>"},{"location":"api/environment/#liquid2.Environment.loop_iteration_limit","title":"loop_iteration_limit  <code>class-attribute</code>","text":"<pre><code>loop_iteration_limit: int | None = None\n</code></pre> <p>Maximum number of loop iterations allowed before a <code>LoopIterationLimitError</code> is raised.</p>"},{"location":"api/environment/#liquid2.Environment.output_stream_limit","title":"output_stream_limit  <code>class-attribute</code>","text":"<pre><code>output_stream_limit: int | None = None\n</code></pre> <p>Maximum number of bytes that can be written to a template's output stream before raising an <code>OutputStreamLimitError</code>.</p>"},{"location":"api/environment/#liquid2.Environment.suppress_blank_control_flow_blocks","title":"suppress_blank_control_flow_blocks  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>suppress_blank_control_flow_blocks: bool = True\n</code></pre> <p>If True (the default), indicates that blocks rendering to whitespace only will not be output.</p>"},{"location":"api/environment/#liquid2.Environment.tags","title":"tags  <code>instance-attribute</code>","text":"<pre><code>tags: dict[str, Tag] = {}\n</code></pre> <p>The environment's tag register, mapping tag names to instances of <code>Tag</code>.</p>"},{"location":"api/environment/#liquid2.Environment.template_class","title":"template_class  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>template_class = Template\n</code></pre> <p>The template class to use after parsing source text.</p>"},{"location":"api/environment/#liquid2.Environment.from_string","title":"from_string","text":"<pre><code>from_string(\n    source: str,\n    *,\n    name: str = \"\",\n    path: str | Path | None = None,\n    globals: Mapping[str, object] | None = None,\n    overlay_data: Mapping[str, object] | None = None\n) -&gt; Template\n</code></pre> <p>Create a template from a string.</p>"},{"location":"api/environment/#liquid2.Environment.get_template","title":"get_template","text":"<pre><code>get_template(\n    name: str,\n    *,\n    globals: Mapping[str, object] | None = None,\n    context: RenderContext | None = None,\n    **kwargs: object\n) -&gt; Template\n</code></pre> <p>Load and parse a template using the configured loader.</p> PARAMETER DESCRIPTION <code>name</code> <p>The template's name. The loader is responsible for interpreting the name. It could be the name of a file or some other identifier.</p> <p> TYPE: <code>str</code> </p> <code>globals</code> <p>A mapping of render context variables attached to the resulting template.</p> <p> TYPE: <code>Mapping[str, object] | None</code> DEFAULT: <code>None</code> </p> <code>context</code> <p>An optional render context that can be used to narrow the template source search space.</p> <p> TYPE: <code>RenderContext | None</code> DEFAULT: <code>None</code> </p> <code>kwargs</code> <p>Arbitrary arguments that can be used to narrow the template source search space.</p> <p> TYPE: <code>object</code> DEFAULT: <code>{}</code> </p> RAISES DESCRIPTION <code>TemplateNotFound</code> <p>If a template with the given name can not be found.</p>"},{"location":"api/environment/#liquid2.Environment.get_template_async","title":"get_template_async  <code>async</code>","text":"<pre><code>get_template_async(\n    name: str,\n    *,\n    globals: Mapping[str, object] | None = None,\n    context: RenderContext | None = None,\n    **kwargs: object\n) -&gt; Template\n</code></pre> <p>An async version of <code>get_template()</code>.</p>"},{"location":"api/environment/#liquid2.Environment.make_globals","title":"make_globals","text":"<pre><code>make_globals(\n    globals: Mapping[str, object] | None = None\n) -&gt; dict[str, object]\n</code></pre> <p>Combine environment globals with template globals.</p>"},{"location":"api/environment/#liquid2.Environment.parse","title":"parse","text":"<pre><code>parse(source: str) -&gt; list[Node]\n</code></pre> <p>Compile template source text and return an abstract syntax tree.</p>"},{"location":"api/environment/#liquid2.Environment.setup_tags_and_filters","title":"setup_tags_and_filters","text":"<pre><code>setup_tags_and_filters() -&gt; None\n</code></pre> <p>Add tags and filters to this environment.</p> <p>This is called once when initializing an environment. Override this method in your custom environments.</p>"},{"location":"api/environment/#liquid2.Environment.tokenize","title":"tokenize","text":"<pre><code>tokenize(source: str) -&gt; list[TokenT]\n</code></pre> <p>Scan Liquid template source and return a list of Markup objects.</p>"},{"location":"api/environment/#liquid2.Environment.trim","title":"trim","text":"<pre><code>trim(\n    text: str,\n    left_trim: WhitespaceControl,\n    right_trim: WhitespaceControl,\n) -&gt; str\n</code></pre> <p>Return text after applying whitespace control.</p>"},{"location":"api/exceptions/","title":"Exceptions","text":""},{"location":"api/exceptions/#liquid2.exceptions.LiquidError","title":"liquid2.exceptions.LiquidError","text":"<p>               Bases: <code>Exception</code></p> <p>Base class for all Liquid exceptions.</p>"},{"location":"api/exceptions/#liquid2.exceptions.LiquidError.message","title":"message  <code>property</code>","text":"<pre><code>message: object\n</code></pre> <p>The exception's error message if one was given.</p>"},{"location":"api/exceptions/#liquid2.exceptions.LiquidError.context","title":"context","text":"<pre><code>context() -&gt; tuple[int, int, str, str, str] | None\n</code></pre> <p>Return context information for this error.</p> <p>Returns (line, col, previous line, current line, next line) or None if no context information is available.</p>"},{"location":"api/exceptions/#liquid2.exceptions.LiquidError.detailed_message","title":"detailed_message","text":"<pre><code>detailed_message() -&gt; str\n</code></pre> <p>Return an error message formatted with extra context info.</p>"},{"location":"api/exceptions/#liquid2.exceptions.BreakLoop","title":"liquid2.exceptions.BreakLoop","text":"<p>               Bases: <code>LiquidInterrupt</code></p> <p>Exception raised when a BreakNode is rendered.</p>"},{"location":"api/exceptions/#liquid2.exceptions.ContextDepthError","title":"liquid2.exceptions.ContextDepthError","text":"<p>               Bases: <code>ResourceLimitError</code></p> <p>Exception raised when the maximum context depth is reached.</p> <p>Usually indicates recursive use of <code>render</code> or <code>include</code> tags.</p>"},{"location":"api/exceptions/#liquid2.exceptions.ContinueLoop","title":"liquid2.exceptions.ContinueLoop","text":"<p>               Bases: <code>LiquidInterrupt</code></p> <p>Exception raised when a ContinueNode is rendered.</p>"},{"location":"api/exceptions/#liquid2.exceptions.DisabledTagError","title":"liquid2.exceptions.DisabledTagError","text":"<p>               Bases: <code>LiquidError</code></p> <p>Exception raised when an attempt is made to render a disabled tag.</p>"},{"location":"api/exceptions/#liquid2.exceptions.LiquidEnvironmentError","title":"liquid2.exceptions.LiquidEnvironmentError","text":"<p>               Bases: <code>LiquidError</code></p> <p>An exception raised due to a misconfigured environment.</p>"},{"location":"api/exceptions/#liquid2.exceptions.LiquidIndexError","title":"liquid2.exceptions.LiquidIndexError","text":"<p>               Bases: <code>LiquidError</code></p> <p>An exception raised when a sequence index is out of range.</p>"},{"location":"api/exceptions/#liquid2.exceptions.LiquidInterrupt","title":"liquid2.exceptions.LiquidInterrupt","text":"<p>               Bases: <code>Exception</code></p> <p>Loop interrupt exception.</p>"},{"location":"api/exceptions/#liquid2.exceptions.LiquidNameError","title":"liquid2.exceptions.LiquidNameError","text":"<p>               Bases: <code>LiquidError</code></p> <p>An exception raised when an unknown function extension is called.</p>"},{"location":"api/exceptions/#liquid2.exceptions.LiquidSyntaxError","title":"liquid2.exceptions.LiquidSyntaxError","text":"<p>               Bases: <code>LiquidError</code></p> <p>Exception raised when there is a parser error.</p>"},{"location":"api/exceptions/#liquid2.exceptions.LiquidTypeError","title":"liquid2.exceptions.LiquidTypeError","text":"<p>               Bases: <code>LiquidError</code></p> <p>Exception raised when an error occurs at render time.</p>"},{"location":"api/exceptions/#liquid2.exceptions.LiquidValueError","title":"liquid2.exceptions.LiquidValueError","text":"<p>               Bases: <code>LiquidError</code></p> <p>Exception raised when a cast from str to int exceeds the length limit.</p>"},{"location":"api/exceptions/#liquid2.exceptions.LocalNamespaceLimitError","title":"liquid2.exceptions.LocalNamespaceLimitError","text":"<p>               Bases: <code>ResourceLimitError</code></p> <p>Exception raised when a local namespace limit has been exceeded.</p>"},{"location":"api/exceptions/#liquid2.exceptions.LoopIterationLimitError","title":"liquid2.exceptions.LoopIterationLimitError","text":"<p>               Bases: <code>ResourceLimitError</code></p> <p>Exception raised when the loop iteration limit has been exceeded.</p>"},{"location":"api/exceptions/#liquid2.exceptions.OutputStreamLimitError","title":"liquid2.exceptions.OutputStreamLimitError","text":"<p>               Bases: <code>ResourceLimitError</code></p> <p>Exception raised when an output stream limit has been exceeded.</p>"},{"location":"api/exceptions/#liquid2.exceptions.RequiredBlockError","title":"liquid2.exceptions.RequiredBlockError","text":"<p>               Bases: <code>TemplateInheritanceError</code></p> <p>An exception raised when a required block has not been overridden.</p>"},{"location":"api/exceptions/#liquid2.exceptions.ResourceLimitError","title":"liquid2.exceptions.ResourceLimitError","text":"<p>               Bases: <code>LiquidError</code></p> <p>Base class for exceptions relating to resource limits.</p>"},{"location":"api/exceptions/#liquid2.exceptions.StopRender","title":"liquid2.exceptions.StopRender","text":"<p>               Bases: <code>Exception</code></p> <p>Template inheritance interrupt.</p> <p>An interrupt used to signal that <code>BoundTemplate.render_with_context</code> should stop rendering more nodes. This is used by template inheritance tags and is not an error condition.</p>"},{"location":"api/exceptions/#liquid2.exceptions.TemplateInheritanceError","title":"liquid2.exceptions.TemplateInheritanceError","text":"<p>               Bases: <code>LiquidError</code></p> <p>An exceptions raised when template inheritance tags are used incorrectly.</p> <p>This could occur when parsing a template or at render time.</p>"},{"location":"api/exceptions/#liquid2.exceptions.TemplateNotFoundError","title":"liquid2.exceptions.TemplateNotFoundError","text":"<p>               Bases: <code>LiquidError</code></p> <p>Exception raised when a template could not be found.</p>"},{"location":"api/exceptions/#liquid2.exceptions.TranslationError","title":"liquid2.exceptions.TranslationError","text":"<p>               Bases: <code>LiquidError</code></p> <p>Base exception for translation errors.</p>"},{"location":"api/exceptions/#liquid2.exceptions.TranslationKeyError","title":"liquid2.exceptions.TranslationKeyError","text":"<p>               Bases: <code>TranslationError</code></p> <p>Exception raised when message interpolation fails with a KeyError.</p>"},{"location":"api/exceptions/#liquid2.exceptions.TranslationSyntaxError","title":"liquid2.exceptions.TranslationSyntaxError","text":"<p>               Bases: <code>LiquidSyntaxError</code></p> <p>Exception raised when a syntax error is found within a translation block.</p>"},{"location":"api/exceptions/#liquid2.exceptions.TranslationValueError","title":"liquid2.exceptions.TranslationValueError","text":"<p>               Bases: <code>TranslationError</code></p> <p>Exception raised when message interpolation fails with a ValueError.</p>"},{"location":"api/exceptions/#liquid2.exceptions.UndefinedError","title":"liquid2.exceptions.UndefinedError","text":"<p>               Bases: <code>LiquidError</code></p> <p>Exception raised by the StrictUndefined type.</p>"},{"location":"api/exceptions/#liquid2.exceptions.UnknownFilterError","title":"liquid2.exceptions.UnknownFilterError","text":"<p>               Bases: <code>LiquidError</code></p> <p>Exception raised when a filter lookup fails.</p>"},{"location":"api/filter/","title":"Filter helpers","text":""},{"location":"api/filter/#liquid2.filter.bool_arg","title":"liquid2.filter.bool_arg","text":"<pre><code>bool_arg(value: object) -&gt; bool\n</code></pre> <p>Return True if value is liquid truthy, or False otherwise.</p>"},{"location":"api/filter/#liquid2.filter.decimal_arg","title":"liquid2.filter.decimal_arg","text":"<pre><code>decimal_arg(\n    val: Any, default: int | Decimal | None = None\n) -&gt; int | Decimal\n</code></pre> <p>Return val as an int or decimal, or default is casting fails.</p>"},{"location":"api/filter/#liquid2.filter.int_arg","title":"liquid2.filter.int_arg","text":"<pre><code>int_arg(val: Any, default: int | None = None) -&gt; int\n</code></pre> <p>Return val as an int, or default if val can't be cast to an int.</p>"},{"location":"api/filter/#liquid2.filter.mapping_arg","title":"liquid2.filter.mapping_arg","text":"<pre><code>mapping_arg(value: object) -&gt; Mapping[Any, Any]\n</code></pre> <p>Make sure value is a mapping type.</p> RAISES DESCRIPTION <code>LiquidTypeError</code> <p>If value can't be coerced to a mapping.</p>"},{"location":"api/filter/#liquid2.filter.math_filter","title":"liquid2.filter.math_filter","text":"<pre><code>math_filter(\n    _filter: Callable[..., Any]\n) -&gt; Callable[..., Any]\n</code></pre> <p>Raise a <code>LiquidTypeError</code> if the filter value can not be cast to a number.</p>"},{"location":"api/filter/#liquid2.filter.num_arg","title":"liquid2.filter.num_arg","text":"<pre><code>num_arg(\n    val: Any, default: float | int | None = None\n) -&gt; float | int\n</code></pre> <p>Return val as an int or float, or default if casting fails.</p>"},{"location":"api/filter/#liquid2.filter.sequence_filter","title":"liquid2.filter.sequence_filter","text":"<pre><code>sequence_filter(\n    _filter: Callable[..., Any]\n) -&gt; Callable[..., Any]\n</code></pre> <p>Coerce the left value to sequence.</p> <p>This is intended to mimic the semantics of the reference implementation's <code>InputIterator</code> class.</p>"},{"location":"api/filter/#liquid2.filter.string_filter","title":"liquid2.filter.string_filter","text":"<pre><code>string_filter(\n    _filter: Callable[..., Any]\n) -&gt; Callable[..., Any]\n</code></pre> <p>A filter function decorator that converts the first argument to a string.</p>"},{"location":"api/filter/#liquid2.filter.with_context","title":"liquid2.filter.with_context","text":"<pre><code>with_context(\n    _filter: Callable[..., Any]\n) -&gt; Callable[..., Any]\n</code></pre> <p>Ensure the wrapped callable is passed a <code>context</code> keyword argument.</p>"},{"location":"api/filter/#liquid2.filter.with_environment","title":"liquid2.filter.with_environment","text":"<pre><code>with_environment(\n    _filter: Callable[..., Any]\n) -&gt; Callable[..., Any]\n</code></pre> <p>Ensure the wrapped callable is passed an <code>environment</code> keyword argument.</p>"},{"location":"api/loaders/","title":"Loaders","text":""},{"location":"api/loaders/#liquid2.loader.BaseLoader","title":"liquid2.loader.BaseLoader","text":"<p>               Bases: <code>ABC</code></p> <p>Base class for all template loaders.</p>"},{"location":"api/loaders/#liquid2.loader.BaseLoader.get_source","title":"get_source  <code>abstractmethod</code>","text":"<pre><code>get_source(\n    env: Environment,\n    template_name: str,\n    *,\n    context: RenderContext | None = None,\n    **kwargs: object\n) -&gt; TemplateSource\n</code></pre> <p>Get source information for a template.</p> PARAMETER DESCRIPTION <code>env</code> <p>The <code>Environment</code> attempting to load the template source text.</p> <p> TYPE: <code>Environment</code> </p> <code>template_name</code> <p>A name or identifier for a template's source text.</p> <p> TYPE: <code>str</code> </p> <code>context</code> <p>An optional render context that can be used to narrow the template source search space.</p> <p> TYPE: <code>RenderContext | None</code> DEFAULT: <code>None</code> </p> <code>kwargs</code> <p>Arbitrary arguments that can be used to narrow the template source search space.</p> <p> TYPE: <code>object</code> DEFAULT: <code>{}</code> </p>"},{"location":"api/loaders/#liquid2.loader.BaseLoader.get_source_async","title":"get_source_async  <code>async</code>","text":"<pre><code>get_source_async(\n    env: Environment,\n    template_name: str,\n    *,\n    context: RenderContext | None = None,\n    **kwargs: object\n) -&gt; TemplateSource\n</code></pre> <p>An async version of <code>get_source</code>.</p> <p>The default implementation delegates to <code>get_source()</code>.</p>"},{"location":"api/loaders/#liquid2.loader.BaseLoader.load","title":"load","text":"<pre><code>load(\n    env: Environment,\n    name: str,\n    *,\n    globals: Mapping[str, object] | None = None,\n    context: RenderContext | None = None,\n    **kwargs: object\n) -&gt; Template\n</code></pre> <p>Find and parse template source code.</p> PARAMETER DESCRIPTION <code>env</code> <p>The <code>Environment</code> attempting to load the template source text.</p> <p> TYPE: <code>Environment</code> </p> <code>name</code> <p>A name or identifier for a template's source text.</p> <p> TYPE: <code>str</code> </p> <code>globals</code> <p>A mapping of render context variables attached to the resulting template.</p> <p> TYPE: <code>Mapping[str, object] | None</code> DEFAULT: <code>None</code> </p> <code>context</code> <p>An optional render context that can be used to narrow the template source search space.</p> <p> TYPE: <code>RenderContext | None</code> DEFAULT: <code>None</code> </p> <code>kwargs</code> <p>Arbitrary arguments that can be used to narrow the template source search space.</p> <p> TYPE: <code>object</code> DEFAULT: <code>{}</code> </p>"},{"location":"api/loaders/#liquid2.loader.BaseLoader.load_async","title":"load_async  <code>async</code>","text":"<pre><code>load_async(\n    env: Environment,\n    name: str,\n    *,\n    globals: Mapping[str, object] | None = None,\n    context: RenderContext | None = None,\n    **kwargs: object\n) -&gt; Template\n</code></pre> <p>An async version of <code>load()</code>.</p>"},{"location":"api/loaders/#liquid2.loader.TemplateSource","title":"liquid2.loader.TemplateSource","text":"<p>               Bases: <code>NamedTuple</code></p> <p>A Liquid template source as returned by the <code>get_source</code> method of a <code>loader</code>.</p> ATTRIBUTE DESCRIPTION <code>source</code> <p>The liquid template source code.</p> <p> TYPE: <code>str</code> </p> <code>name</code> <p>The liquid template file name or other string identifying its origin.</p> <p> TYPE: <code>str</code> </p> <code>uptodate</code> <p>Optional callable that will return <code>True</code> if the template is up to date, or <code>False</code> if it needs to be reloaded.</p> <p> TYPE: <code>Callable[[], bool] | Callable[[], Awaitable[bool]] | None</code> </p> <code>matter</code> <p>Optional mapping containing variables associated with the template. Could be \"front matter\" or other meta data.</p> <p> TYPE: <code>dict[str, object] | None</code> </p>"},{"location":"api/loaders/#liquid2.FileSystemLoader","title":"liquid2.FileSystemLoader","text":"<p>               Bases: <code>BaseLoader</code></p> <p>A loader that loads templates from one or more directories on the file system.</p> PARAMETER DESCRIPTION <code>search_path</code> <p>One or more paths to search.</p> <p> TYPE: <code>str | Path | Iterable[str | Path]</code> </p> <code>encoding</code> <p>Encoding to use when opening files.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'utf-8'</code> </p> <code>ext</code> <p>A default file extension. Should include a leading period.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p>"},{"location":"api/loaders/#liquid2.FileSystemLoader.get_source","title":"get_source","text":"<pre><code>get_source(\n    env: Environment,\n    template_name: str,\n    *,\n    context: RenderContext | None = None,\n    **kwargs: object\n) -&gt; TemplateSource\n</code></pre> <p>Get source information for a template.</p>"},{"location":"api/loaders/#liquid2.FileSystemLoader.get_source_async","title":"get_source_async  <code>async</code>","text":"<pre><code>get_source_async(\n    env: Environment,\n    template_name: str,\n    *,\n    context: RenderContext | None = None,\n    **kwargs: object\n) -&gt; TemplateSource\n</code></pre> <p>Get source information for a template.</p>"},{"location":"api/loaders/#liquid2.FileSystemLoader.resolve_path","title":"resolve_path","text":"<pre><code>resolve_path(template_name: str) -&gt; Path\n</code></pre> <p>Return a path to the template identified by template_name.</p> <p>If the search path is a list of paths, returns the first path where template_name exists. If none of the search paths contain template_name, a TemplateNotFound exception is raised.</p>"},{"location":"api/loaders/#liquid2.CachingFileSystemLoader","title":"liquid2.CachingFileSystemLoader","text":"<p>               Bases: <code>CachingLoaderMixin</code>, <code>FileSystemLoader</code></p> <p>A file system loader that caches parsed templates in memory.</p> PARAMETER DESCRIPTION <code>search_path</code> <p>One or more paths to search.</p> <p> TYPE: <code>Union[str, Path, Iterable[Union[str, Path]]]</code> </p> <code>encoding</code> <p>Open template files with the given encoding.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'utf-8'</code> </p> <code>ext</code> <p>A default file extension. Should include a leading period.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>auto_reload</code> <p>If <code>True</code>, automatically reload a cached template if it has been updated.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> <code>namespace_key</code> <p>The name of a global render context variable or loader keyword argument that resolves to the current loader \"namespace\" or \"scope\".</p> <p>If you're developing a multi-user application, a good namespace might be <code>uid</code>, where <code>uid</code> is a unique identifier for a user and templates are arranged in folders named for each <code>uid</code> inside the search path.</p> <p> TYPE: <code>str</code> DEFAULT: <code>''</code> </p> <code>capacity</code> <p>The maximum number of templates to hold in the cache before removing the least recently used template.</p> <p> TYPE: <code>int</code> DEFAULT: <code>300</code> </p>"},{"location":"api/loaders/#liquid2.DictLoader","title":"liquid2.DictLoader","text":"<p>               Bases: <code>BaseLoader</code></p> <p>A loader that loads templates from a dictionary.</p> PARAMETER DESCRIPTION <code>templates</code> <p>A dictionary mapping template names to template source strings.</p> <p> TYPE: <code>dict[str, str]</code> </p>"},{"location":"api/loaders/#liquid2.DictLoader.get_source","title":"get_source","text":"<pre><code>get_source(\n    env: Environment,\n    template_name: str,\n    *,\n    context: RenderContext | None = None,\n    **kwargs: object\n) -&gt; TemplateSource\n</code></pre> <p>Get the source, filename and reload helper for a template.</p>"},{"location":"api/loaders/#liquid2.CachingDictLoader","title":"liquid2.CachingDictLoader","text":"<p>               Bases: <code>CachingLoaderMixin</code>, <code>DictLoader</code></p> <p>A <code>DictLoader</code> that caches parsed templates in memory.</p>"},{"location":"api/loaders/#liquid2.PackageLoader","title":"liquid2.PackageLoader","text":"<p>               Bases: <code>BaseLoader</code></p> <p>A template loader that reads templates from Python packages.</p> PARAMETER DESCRIPTION <code>package</code> <p>Import name of a package containing Liquid templates.</p> <p> TYPE: <code>str | ModuleType</code> </p> <code>package_path</code> <p>One or more directories in the package containing Liquid templates.</p> <p> TYPE: <code>str | Iterable[str]</code> DEFAULT: <code>'templates'</code> </p> <code>encoding</code> <p>Encoding of template files.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'utf-8'</code> </p> <code>ext</code> <p>A default file extension to use if one is not provided. Should include a leading period.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'.liquid'</code> </p>"},{"location":"api/loaders/#liquid2.PackageLoader.get_source","title":"get_source","text":"<pre><code>get_source(\n    env: Environment,\n    template_name: str,\n    *,\n    context: RenderContext | None = None,\n    **kwargs: object\n) -&gt; TemplateSource\n</code></pre> <p>Get source information for a template.</p>"},{"location":"api/loaders/#liquid2.PackageLoader.get_source_async","title":"get_source_async  <code>async</code>","text":"<pre><code>get_source_async(\n    env: Environment,\n    template_name: str,\n    *,\n    context: RenderContext | None = None,\n    **kwargs: object\n) -&gt; TemplateSource\n</code></pre> <p>Get source information for a template.</p>"},{"location":"api/loaders/#liquid2.ChoiceLoader","title":"liquid2.ChoiceLoader","text":"<p>               Bases: <code>BaseLoader</code></p> <p>A template loader that delegates to other template loaders.</p> PARAMETER DESCRIPTION <code>loaders</code> <p>A list of loaders implementing <code>liquid.loaders.BaseLoader</code>.</p> <p> TYPE: <code>list[BaseLoader]</code> </p>"},{"location":"api/loaders/#liquid2.ChoiceLoader.get_source","title":"get_source","text":"<pre><code>get_source(\n    env: Environment,\n    template_name: str,\n    *,\n    context: RenderContext | None = None,\n    **kwargs: object\n) -&gt; TemplateSource\n</code></pre> <p>Get source information for a template.</p>"},{"location":"api/loaders/#liquid2.ChoiceLoader.get_source_async","title":"get_source_async  <code>async</code>","text":"<pre><code>get_source_async(\n    env: Environment,\n    template_name: str,\n    *,\n    context: RenderContext | None = None,\n    **kwargs: object\n) -&gt; TemplateSource\n</code></pre> <p>Get source information for a template.</p>"},{"location":"api/loaders/#liquid2.CachingChoiceLoader","title":"liquid2.CachingChoiceLoader","text":"<p>               Bases: <code>CachingLoaderMixin</code>, <code>ChoiceLoader</code></p> <p>A <code>ChoiceLoader</code> that caches parsed templates in memory.</p> PARAMETER DESCRIPTION <code>loaders</code> <p>A list of loaders implementing <code>liquid.loaders.BaseLoader</code>.</p> <p> TYPE: <code>list[BaseLoader]</code> </p> <code>auto_reload</code> <p>If <code>True</code>, automatically reload a cached template if it has been updated.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> <code>namespace_key</code> <p>The name of a global render context variable or loader keyword argument that resolves to the current loader \"namespace\" or \"scope\".</p> <p> TYPE: <code>str</code> DEFAULT: <code>''</code> </p> <code>capacity</code> <p>The maximum number of templates to hold in the cache before removing the least recently used template.</p> <p> TYPE: <code>int</code> DEFAULT: <code>300</code> </p>"},{"location":"api/loaders/#liquid2.CachingLoaderMixin","title":"liquid2.CachingLoaderMixin","text":"<p>               Bases: <code>ABC</code>, <code>_CachingLoaderProtocol</code></p> <p>A mixin class that adds caching to a template loader.</p>"},{"location":"api/messages/","title":"Messages","text":""},{"location":"api/messages/#liquid2.Translations","title":"liquid2.Translations","text":"<p>               Bases: <code>Protocol</code></p> <p>Message catalog interface.</p> <p>An object implementing this protocol is expected to be available in a render context.</p> <p>Could be a <code>GNUTranslations</code> instance from the <code>gettext</code> module, a Babel <code>Translations</code> object, or any object implementing <code>gettext</code>, <code>ngettext</code>, <code>pgettext</code> and <code>npgettext</code> methods.</p>"},{"location":"api/messages/#liquid2.Translations.gettext","title":"gettext","text":"<pre><code>gettext(message: str) -&gt; str\n</code></pre> <p>Lookup the message in the catalog.</p>"},{"location":"api/messages/#liquid2.Translations.ngettext","title":"ngettext","text":"<pre><code>ngettext(singular: str, plural: str, n: int) -&gt; str\n</code></pre> <p>Do plural-forms message lookup.</p>"},{"location":"api/messages/#liquid2.Translations.npgettext","title":"npgettext","text":"<pre><code>npgettext(\n    context: str, singular: str, plural: str, n: int\n) -&gt; str\n</code></pre> <p>Do plural-forms context and message lookup.</p>"},{"location":"api/messages/#liquid2.Translations.pgettext","title":"pgettext","text":"<pre><code>pgettext(context: str, message: str) -&gt; str\n</code></pre> <p>Lookup the context and message in the catalog.</p>"},{"location":"api/messages/#liquid2.MessageTuple","title":"liquid2.MessageTuple","text":"<p>               Bases: <code>NamedTuple</code></p> <p>The tuple expected to be returned from babel extraction methods.</p>"},{"location":"api/messages/#liquid2.extract_from_template","title":"liquid2.extract_from_template","text":"<pre><code>extract_from_template(\n    template: Template,\n    keywords: Union[list[str], dict[str, Any], None] = None,\n    comment_tags: list[str] | None = None,\n) -&gt; Iterator[MessageTuple]\n</code></pre> <p>Extract translation messages from a Liquid template.</p>"},{"location":"api/render_context/","title":"Render context","text":""},{"location":"api/render_context/#liquid2.RenderContext","title":"liquid2.RenderContext","text":"<p>Template render state.</p>"},{"location":"api/render_context/#liquid2.RenderContext.assign","title":"assign","text":"<pre><code>assign(key: str, val: object) -&gt; None\n</code></pre> <p>Add key to the local namespace with value val.</p>"},{"location":"api/render_context/#liquid2.RenderContext.copy","title":"copy","text":"<pre><code>copy(\n    token: TokenT,\n    *,\n    namespace: Mapping[str, object],\n    template: Template | None = None,\n    disabled_tags: set[str] | None = None,\n    carry_loop_iterations: bool = False,\n    block_scope: bool = False\n) -&gt; RenderContext\n</code></pre> <p>Return a copy of this render context with a new scope.</p>"},{"location":"api/render_context/#liquid2.RenderContext.cycle","title":"cycle","text":"<pre><code>cycle(cycle_hash: int, length: int) -&gt; int\n</code></pre> <p>Return the index of the next item in the named cycle.</p>"},{"location":"api/render_context/#liquid2.RenderContext.decrement","title":"decrement","text":"<pre><code>decrement(name: str) -&gt; int\n</code></pre> <p>Decrement the named counter and return its value.</p>"},{"location":"api/render_context/#liquid2.RenderContext.extend","title":"extend","text":"<pre><code>extend(\n    namespace: Mapping[str, object],\n    template: Template | None = None,\n) -&gt; Iterator[RenderContext]\n</code></pre> <p>Extend this context with the given read-only namespace.</p>"},{"location":"api/render_context/#liquid2.RenderContext.filter","title":"filter","text":"<pre><code>filter(\n    name: str, *, token: TokenT\n) -&gt; Callable[..., object]\n</code></pre> <p>Return the filter callable for name.</p>"},{"location":"api/render_context/#liquid2.RenderContext.get","title":"get","text":"<pre><code>get(\n    path: list[object],\n    *,\n    token: TokenT | None,\n    default: object = UNDEFINED\n) -&gt; object\n</code></pre> <p>Resolve the variable path in the current namespace.</p>"},{"location":"api/render_context/#liquid2.RenderContext.get_async","title":"get_async  <code>async</code>","text":"<pre><code>get_async(\n    path: list[object],\n    *,\n    token: TokenT,\n    default: object = UNDEFINED\n) -&gt; object\n</code></pre> <p>Asynchronously resolve the variable path in the current namespace.</p>"},{"location":"api/render_context/#liquid2.RenderContext.get_item","title":"get_item","text":"<pre><code>get_item(obj: Any, key: Any) -&gt; Any\n</code></pre> <p>An item getter used when resolving a Liquid path.</p> <p>Override this to change the behavior of <code>.first</code>, <code>.last</code> and <code>.size</code>.</p>"},{"location":"api/render_context/#liquid2.RenderContext.get_item_async","title":"get_item_async  <code>async</code>","text":"<pre><code>get_item_async(obj: Any, key: Any) -&gt; Any\n</code></pre> <p>An async item getter for resolving paths.</p>"},{"location":"api/render_context/#liquid2.RenderContext.get_output_buffer","title":"get_output_buffer","text":"<pre><code>get_output_buffer(parent_buffer: TextIO | None) -&gt; StringIO\n</code></pre> <p>Return a new output buffer respecting any limits set on the environment.</p>"},{"location":"api/render_context/#liquid2.RenderContext.get_size_of_locals","title":"get_size_of_locals","text":"<pre><code>get_size_of_locals() -&gt; int\n</code></pre> <p>Return the \"size\" or a \"score\" for the current local namespace.</p> <p>This is used by the optional local namespace resource limit. Override <code>get_size_of_locals</code> to customize how the limit is calculated. Be sure to consider <code>self.local_namespace_size_carry</code> when writing a custom implementation of <code>get_size_of_locals</code>.</p> <p>The default implementation uses <code>sys.getsizeof()</code> on each of the local namespace's values. It is not a reliable measure of size in bytes.</p>"},{"location":"api/render_context/#liquid2.RenderContext.increment","title":"increment","text":"<pre><code>increment(name: str) -&gt; int\n</code></pre> <p>Increment the named counter and return its value.</p>"},{"location":"api/render_context/#liquid2.RenderContext.loop","title":"loop","text":"<pre><code>loop(\n    namespace: Mapping[str, object], forloop: ForLoop\n) -&gt; Iterator[RenderContext]\n</code></pre> <p>Just like <code>Context.extend</code>, but keeps track of ForLoop objects too.</p>"},{"location":"api/render_context/#liquid2.RenderContext.markup","title":"markup","text":"<pre><code>markup(s: str) -&gt; str | Markup\n</code></pre> <p>Return a safe string if auto escape is enabled.</p>"},{"location":"api/render_context/#liquid2.RenderContext.parentloop","title":"parentloop","text":"<pre><code>parentloop(token: TokenT) -&gt; Undefined | object\n</code></pre> <p>Return the last ForLoop object from the loop stack.</p>"},{"location":"api/render_context/#liquid2.RenderContext.raise_for_loop_limit","title":"raise_for_loop_limit","text":"<pre><code>raise_for_loop_limit(length: int = 1) -&gt; None\n</code></pre> <p>Raise a <code>LoopIterationLimitError</code> if loop stack is bigger than the limit.</p>"},{"location":"api/render_context/#liquid2.RenderContext.resolve","title":"resolve","text":"<pre><code>resolve(name: str, default: object = UNDEFINED) -&gt; object\n</code></pre> <p>Resolve variable name in the current scope.</p>"},{"location":"api/render_context/#liquid2.RenderContext.stopindex","title":"stopindex","text":"<pre><code>stopindex(key: str, index: int | None = None) -&gt; int\n</code></pre> <p>Set or return the stop index of a for loop.</p>"},{"location":"api/tag/","title":"Tag","text":""},{"location":"api/tag/#liquid2.Tag","title":"liquid2.Tag","text":"<p>               Bases: <code>ABC</code></p> <p>Base class for all built-in and custom template tags.</p>"},{"location":"api/tag/#liquid2.Tag.parse","title":"parse  <code>abstractmethod</code>","text":"<pre><code>parse(stream: TokenStream) -&gt; Node\n</code></pre> <p>Return a parse tree node by parsing tokens from the given stream.</p>"},{"location":"api/template/","title":"Template","text":""},{"location":"api/template/#liquid2.Template","title":"liquid2.Template","text":"<p>A parsed template ready to be rendered.</p> <p>Don't try to instantiate <code>Template</code> directly. Use <code>parse()</code>, <code>Environment.from_string()</code> or <code>Environment.get_template()</code> instead.</p>"},{"location":"api/template/#liquid2.Template.analyze","title":"analyze","text":"<pre><code>analyze(\n    *, include_partials: bool = True\n) -&gt; TemplateAnalysis\n</code></pre> <p>Statically analyze this template and any included/rendered templates.</p> PARAMETER DESCRIPTION <code>include_partials</code> <p>If <code>True</code>, we will try to load partial templates and analyze those templates too.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p>"},{"location":"api/template/#liquid2.Template.analyze_async","title":"analyze_async  <code>async</code>","text":"<pre><code>analyze_async(\n    *, include_partials: bool = True\n) -&gt; TemplateAnalysis\n</code></pre> <p>An async version of <code>analyze</code>.</p>"},{"location":"api/template/#liquid2.Template.filter_names","title":"filter_names","text":"<pre><code>filter_names(*, include_partials: bool = True) -&gt; list[str]\n</code></pre> <p>Return a list of filter names used in this template.</p>"},{"location":"api/template/#liquid2.Template.filter_names_async","title":"filter_names_async  <code>async</code>","text":"<pre><code>filter_names_async(\n    *, include_partials: bool = True\n) -&gt; list[str]\n</code></pre> <p>Return a list of filter names used in this template.</p>"},{"location":"api/template/#liquid2.Template.full_name","title":"full_name","text":"<pre><code>full_name() -&gt; str\n</code></pre> <p>Return this template's path, if available, joined with its name.</p>"},{"location":"api/template/#liquid2.Template.global_variable_paths","title":"global_variable_paths","text":"<pre><code>global_variable_paths(\n    *, include_partials: bool = True\n) -&gt; list[str]\n</code></pre> <p>Return a list of variables used in this template including all path segments.</p> <p>Excludes variables that are local to the template, like those crated with <code>{% assign %}</code> and <code>{% capture %}</code>.</p> PARAMETER DESCRIPTION <code>include_partials</code> <p>If <code>True</code>, will try to load and find variables in included/rendered templates too.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>list[str]</code> <p>A list of distinct paths for variables in this template.</p>"},{"location":"api/template/#liquid2.Template.global_variable_paths_async","title":"global_variable_paths_async  <code>async</code>","text":"<pre><code>global_variable_paths_async(\n    *, include_partials: bool = True\n) -&gt; list[str]\n</code></pre> <p>Return a list of variables used in this template including all path segments.</p> <p>Excludes variables that are local to the template, like those crated with <code>{% assign %}</code> and <code>{% capture %}</code>.</p> PARAMETER DESCRIPTION <code>include_partials</code> <p>If <code>True</code>, will try to load and find variables in included/rendered templates too.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>list[str]</code> <p>A list of distinct paths for variables in this template.</p>"},{"location":"api/template/#liquid2.Template.global_variable_segments","title":"global_variable_segments","text":"<pre><code>global_variable_segments(\n    *, include_partials: bool = True\n) -&gt; list[Segments]\n</code></pre> <p>Return a list of variables used in this template, each as a list of segments.</p> <p>Excludes variables that are local to the template, like those crated with <code>{% assign %}</code> and <code>{% capture %}</code>.</p> PARAMETER DESCRIPTION <code>include_partials</code> <p>If <code>True</code>, will try to load and find variables in included/rendered templates too.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>list[Segments]</code> <p>A list of distinct paths for variables in this template.</p>"},{"location":"api/template/#liquid2.Template.global_variable_segments_async","title":"global_variable_segments_async  <code>async</code>","text":"<pre><code>global_variable_segments_async(\n    *, include_partials: bool = True\n) -&gt; list[Segments]\n</code></pre> <p>Return a list of variables used in this template, each as a list of segments.</p> <p>Excludes variables that are local to the template, like those crated with <code>{% assign %}</code> and <code>{% capture %}</code>.</p> PARAMETER DESCRIPTION <code>include_partials</code> <p>If <code>True</code>, will try to load and find variables in included/rendered templates too.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>list[Segments]</code> <p>A list of distinct paths for variables in this template.</p>"},{"location":"api/template/#liquid2.Template.global_variables","title":"global_variables","text":"<pre><code>global_variables(\n    *, include_partials: bool = True\n) -&gt; list[str]\n</code></pre> <p>Return a list of variables used in this template without path segments.</p> <p>Excludes variables that are local to the template, like those crated with <code>{% assign %}</code> and <code>{% capture %}</code>.</p> PARAMETER DESCRIPTION <code>include_partials</code> <p>If <code>True</code>, will try to load and find variables in included/rendered templates too.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>list[str]</code> <p>A list of distinct root segments for variables in this template.</p>"},{"location":"api/template/#liquid2.Template.global_variables_async","title":"global_variables_async  <code>async</code>","text":"<pre><code>global_variables_async(\n    *, include_partials: bool = True\n) -&gt; list[str]\n</code></pre> <p>Return a list of variables used in this template without path segments.</p> <p>Excludes variables that are local to the template, like those crated with <code>{% assign %}</code> and <code>{% capture %}</code>.</p> PARAMETER DESCRIPTION <code>include_partials</code> <p>If <code>True</code>, will try to load and find variables in included/rendered templates too.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>list[str]</code> <p>A list of distinct root segments for variables in this template.</p>"},{"location":"api/template/#liquid2.Template.is_up_to_date","title":"is_up_to_date","text":"<pre><code>is_up_to_date() -&gt; bool\n</code></pre> <p>Return False if the template has been modified, True otherwise.</p>"},{"location":"api/template/#liquid2.Template.is_up_to_date_async","title":"is_up_to_date_async  <code>async</code>","text":"<pre><code>is_up_to_date_async() -&gt; bool\n</code></pre> <p>An async version of is_up_to_date().</p> <p>If template.uptodate is a coroutine, it wil be awaited. Otherwise it will be called just like is_up_to_date.</p>"},{"location":"api/template/#liquid2.Template.make_globals","title":"make_globals","text":"<pre><code>make_globals(\n    render_args: Mapping[str, object]\n) -&gt; Mapping[str, object]\n</code></pre> <p>Return a mapping including render arguments and template globals.</p>"},{"location":"api/template/#liquid2.Template.render","title":"render","text":"<pre><code>render(*args: Any, **kwargs: Any) -&gt; str\n</code></pre> <p>Render this template with args and kwargs added to the render context.</p> <p>args and kwargs are passed to <code>dict()</code>.</p>"},{"location":"api/template/#liquid2.Template.render_async","title":"render_async  <code>async</code>","text":"<pre><code>render_async(*args: Any, **kwargs: Any) -&gt; str\n</code></pre> <p>Render this template with args and kwargs added to the render context.</p> <p>args and kwargs are passed to <code>dict()</code>.</p>"},{"location":"api/template/#liquid2.Template.render_with_context","title":"render_with_context","text":"<pre><code>render_with_context(\n    context: RenderContext,\n    buf: TextIO,\n    *args: Any,\n    partial: bool = False,\n    block_scope: bool = False,\n    **kwargs: Any\n) -&gt; int\n</code></pre> <p>Render this template using an existing render context and output buffer.</p>"},{"location":"api/template/#liquid2.Template.render_with_context_async","title":"render_with_context_async  <code>async</code>","text":"<pre><code>render_with_context_async(\n    context: RenderContext,\n    buf: TextIO,\n    *args: Any,\n    partial: bool = False,\n    block_scope: bool = False,\n    **kwargs: Any\n) -&gt; int\n</code></pre> <p>Render this template using an existing render context and output buffer.</p>"},{"location":"api/template/#liquid2.Template.tag_names","title":"tag_names","text":"<pre><code>tag_names(*, include_partials: bool = True) -&gt; list[str]\n</code></pre> <p>Return a list of tag names used in this template.</p>"},{"location":"api/template/#liquid2.Template.tag_names_async","title":"tag_names_async  <code>async</code>","text":"<pre><code>tag_names_async(\n    *, include_partials: bool = True\n) -&gt; list[str]\n</code></pre> <p>Return a list of tag names used in this template.</p>"},{"location":"api/template/#liquid2.Template.variable_paths","title":"variable_paths","text":"<pre><code>variable_paths(\n    *, include_partials: bool = True\n) -&gt; list[str]\n</code></pre> <p>Return a list of variables used in this template including all path segments.</p> <p>Includes variables that are local to the template, like those crated with <code>{% assign %}</code> and <code>{% capture %}</code>.</p> <p>See also global_variable_paths.</p> PARAMETER DESCRIPTION <code>include_partials</code> <p>If <code>True</code>, will try to load and find variables in included/rendered templates too.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>list[str]</code> <p>A list of distinct paths for variables in this template.</p>"},{"location":"api/template/#liquid2.Template.variable_paths_async","title":"variable_paths_async  <code>async</code>","text":"<pre><code>variable_paths_async(\n    *, include_partials: bool = True\n) -&gt; list[str]\n</code></pre> <p>Return a list of variables used in this template including all path segments.</p> <p>Includes variables that are local to the template, like those crated with <code>{% assign %}</code> and <code>{% capture %}</code>.</p> <p>See also global_variable_paths.</p> PARAMETER DESCRIPTION <code>include_partials</code> <p>If <code>True</code>, will try to load and find variables in included/rendered templates too.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>list[str]</code> <p>A list of distinct paths for variables in this template.</p>"},{"location":"api/template/#liquid2.Template.variable_segments","title":"variable_segments","text":"<pre><code>variable_segments(\n    *, include_partials: bool = True\n) -&gt; list[Segments]\n</code></pre> <p>Return a list of variables used in this template, each as a list of segments.</p> <p>Includes variables that are local to the template, like those crated with <code>{% assign %}</code> and <code>{% capture %}</code>.</p> <p>See also global_variable_segments.</p> PARAMETER DESCRIPTION <code>include_partials</code> <p>If <code>True</code>, will try to load and find variables in included/rendered templates too.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>list[Segments]</code> <p>A list of distinct paths for variables in this template.</p>"},{"location":"api/template/#liquid2.Template.variable_segments_async","title":"variable_segments_async  <code>async</code>","text":"<pre><code>variable_segments_async(\n    *, include_partials: bool = True\n) -&gt; list[Segments]\n</code></pre> <p>Return a list of variables used in this template, each as a list of segments.</p> <p>Includes variables that are local to the template, like those crated with <code>{% assign %}</code> and <code>{% capture %}</code>.</p> <p>See also global_variable_segments.</p> PARAMETER DESCRIPTION <code>include_partials</code> <p>If <code>True</code>, will try to load and find variables in included/rendered templates too.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>list[Segments]</code> <p>A list of distinct paths for variables in this template.</p>"},{"location":"api/template/#liquid2.Template.variables","title":"variables","text":"<pre><code>variables(*, include_partials: bool = True) -&gt; list[str]\n</code></pre> <p>Return a list of variables used in this template without path segments.</p> <p>Includes variables that are local to the template, like those crated with <code>{% assign %}</code> and <code>{% capture %}</code>.</p> <p>See also global_variables.</p> PARAMETER DESCRIPTION <code>include_partials</code> <p>If <code>True</code>, will try to load and find variables in included/rendered templates too.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>list[str]</code> <p>A list of distinct root segments for variables in this template.</p>"},{"location":"api/template/#liquid2.Template.variables_async","title":"variables_async  <code>async</code>","text":"<pre><code>variables_async(\n    *, include_partials: bool = True\n) -&gt; list[str]\n</code></pre> <p>Return a list of variables used in this template without path segments.</p> <p>Includes variables that are local to the template, like those crated with <code>{% assign %}</code> and <code>{% capture %}</code>.</p> <p>See also global_variables.</p> PARAMETER DESCRIPTION <code>include_partials</code> <p>If <code>True</code>, will try to load and find variables in included/rendered templates too.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>list[str]</code> <p>A list of distinct root segments for variables in this template.</p>"},{"location":"api/template/#liquid2.static_analysis.TemplateAnalysis","title":"liquid2.static_analysis.TemplateAnalysis  <code>dataclass</code>","text":"<p>The result of analyzing a template using <code>Template.analyze()</code>.</p> PARAMETER DESCRIPTION <code>variables</code> <p>All referenced variables, whether they are in scope or not. Including references to names such as <code>forloop</code> from the <code>for</code> tag.</p> <p> TYPE: <code>dict[str, list[Variable]]</code> </p> <code>locals</code> <p>Template variables that are added to the template local scope, whether they are subsequently used or not.</p> <p> TYPE: <code>dict[str, list[Variable]]</code> </p> <code>globals</code> <p>Template variables that, on the given line number and \"file\", are out of scope or are assumed to be \"global\". That is, expected to be included by the application developer rather than a template author.</p> <p> TYPE: <code>dict[str, list[Variable]]</code> </p> <code>filters</code> <p>All filters found during static analysis.</p> <p> TYPE: <code>dict[str, list[Span]]</code> </p> <code>tags</code> <p>All tags found during static analysis.</p> <p> TYPE: <code>dict[str, list[Span]]</code> </p>"},{"location":"api/template/#liquid2.static_analysis.Variable","title":"liquid2.static_analysis.Variable  <code>dataclass</code>","text":"<p>A variable as sequence of segments that make up its path and its location.</p> <p>Variables with the same segments compare equal, regardless of span.</p>"},{"location":"api/template/#liquid2.static_analysis.Variable.segments","title":"segments  <code>instance-attribute</code>","text":"<pre><code>segments: Segments\n</code></pre> <p>The variable's segments.</p>"},{"location":"api/template/#liquid2.static_analysis.Variable.span","title":"span  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>span: Span = field(hash=False, compare=False)\n</code></pre> <p>The variable's location.</p>"},{"location":"api/template/#liquid2.static_analysis.Span","title":"liquid2.static_analysis.Span  <code>dataclass</code>","text":"<p>The location of a variable, tag or filter in a template.</p>"},{"location":"api/template/#liquid2.static_analysis.Span.end","title":"end  <code>instance-attribute</code>","text":"<pre><code>end: int\n</code></pre> <p>A stop index into the template source text.</p>"},{"location":"api/template/#liquid2.static_analysis.Span.start","title":"start  <code>instance-attribute</code>","text":"<pre><code>start: int\n</code></pre> <p>A start index into the template source text.</p>"},{"location":"api/template/#liquid2.static_analysis.Span.template_name","title":"template_name  <code>instance-attribute</code>","text":"<pre><code>template_name: str\n</code></pre> <p>The template name.</p>"},{"location":"api/tokens/","title":"Tokens","text":""},{"location":"api/tokens/#liquid2.token.TokenT","title":"liquid2.token.TokenT  <code>dataclass</code>","text":"<p>               Bases: <code>ABC</code></p> <p>The base class for all tokens.</p>"},{"location":"api/tokens/#liquid2.token.TokenT.start","title":"start  <code>abstractmethod</code> <code>property</code>","text":"<pre><code>start: int\n</code></pre> <p>The start position of this token.</p>"},{"location":"api/tokens/#liquid2.token.TokenT.stop","title":"stop  <code>abstractmethod</code> <code>property</code>","text":"<pre><code>stop: int\n</code></pre> <p>The end position of this token.</p>"},{"location":"api/tokens/#liquid2.token.TokenType","title":"liquid2.token.TokenType","text":"<p>               Bases: <code>Enum</code></p>"},{"location":"api/tokens/#liquid2.token.BlockCommentToken","title":"liquid2.token.BlockCommentToken  <code>dataclass</code>","text":"<p>               Bases: <code>CommentToken</code></p> <p>A token representing a block comment.</p> <p>That's one with a start and end tag.</p>"},{"location":"api/tokens/#liquid2.token.CommentToken","title":"liquid2.token.CommentToken  <code>dataclass</code>","text":"<p>               Bases: <code>TokenT</code></p> <p>A token representing a comment.</p>"},{"location":"api/tokens/#liquid2.token.ContentToken","title":"liquid2.token.ContentToken  <code>dataclass</code>","text":"<p>               Bases: <code>TokenT</code></p> <p>A token representing template text content that is not markup.</p>"},{"location":"api/tokens/#liquid2.token.ErrorToken","title":"liquid2.token.ErrorToken  <code>dataclass</code>","text":"<p>               Bases: <code>TokenT</code></p> <p>A token representing a syntax error found by the lexer.</p>"},{"location":"api/tokens/#liquid2.token.ErrorToken.start","title":"start  <code>property</code>","text":"<pre><code>start: int\n</code></pre> <p>Return the start position of this token.</p>"},{"location":"api/tokens/#liquid2.token.ErrorToken.stop","title":"stop  <code>property</code>","text":"<pre><code>stop: int\n</code></pre> <p>Return the end position of this token.</p>"},{"location":"api/tokens/#liquid2.token.InlineCommentToken","title":"liquid2.token.InlineCommentToken  <code>dataclass</code>","text":"<p>               Bases: <code>CommentToken</code></p> <p>A token representing an inline comment tag.</p> <p>That's one with <code>#</code> as the tag name. Like <code>{% # some comment %}</code>.</p>"},{"location":"api/tokens/#liquid2.token.LinesToken","title":"liquid2.token.LinesToken  <code>dataclass</code>","text":"<p>               Bases: <code>TokenT</code></p> <p>A token representing line statements, where each line is a tag expression.</p> <p>The built-in <code>{% liquid %}</code> tag is an example of a tag that uses line statements.</p>"},{"location":"api/tokens/#liquid2.token.OutputToken","title":"liquid2.token.OutputToken  <code>dataclass</code>","text":"<p>               Bases: <code>TokenT</code></p> <p>A token representing an output statement.</p>"},{"location":"api/tokens/#liquid2.token.PathToken","title":"liquid2.token.PathToken  <code>dataclass</code>","text":"<p>               Bases: <code>TokenT</code></p> <p>A token representing the path to a variable.</p>"},{"location":"api/tokens/#liquid2.token.RangeToken","title":"liquid2.token.RangeToken  <code>dataclass</code>","text":"<p>               Bases: <code>TokenT</code></p> <p>A token representing a range expression.</p> <p>For example, <code>(1..3)</code>.</p>"},{"location":"api/tokens/#liquid2.token.RawToken","title":"liquid2.token.RawToken  <code>dataclass</code>","text":"<p>               Bases: <code>TokenT</code></p> <p>A token representing raw content that should be treated as plain text.</p>"},{"location":"api/tokens/#liquid2.token.TagToken","title":"liquid2.token.TagToken  <code>dataclass</code>","text":"<p>               Bases: <code>TokenT</code></p> <p>A token representing a tag.</p> <p>This could be an inline tag, or the start or end of a block tag.</p>"},{"location":"api/tokens/#liquid2.token.Token","title":"liquid2.token.Token  <code>dataclass</code>","text":"<p>               Bases: <code>TokenT</code></p> <p>A liquid expression token.</p>"},{"location":"api/tokens/#liquid2.token.Token.start","title":"start  <code>property</code>","text":"<pre><code>start: int\n</code></pre> <p>Return the start position of this token.</p>"},{"location":"api/tokens/#liquid2.token.Token.stop","title":"stop  <code>property</code>","text":"<pre><code>stop: int\n</code></pre> <p>Return the end position of this token.</p>"},{"location":"api/tokens/#liquid2.token.is_comment_token","title":"liquid2.token.is_comment_token","text":"<pre><code>is_comment_token(token: TokenT) -&gt; TypeGuard[CommentToken]\n</code></pre> <p>A CommentToken type guard.</p>"},{"location":"api/tokens/#liquid2.token.is_content_token","title":"liquid2.token.is_content_token","text":"<pre><code>is_content_token(token: TokenT) -&gt; TypeGuard[ContentToken]\n</code></pre> <p>A ContentToken type guard.</p>"},{"location":"api/tokens/#liquid2.token.is_lines_token","title":"liquid2.token.is_lines_token","text":"<pre><code>is_lines_token(token: TokenT) -&gt; TypeGuard[LinesToken]\n</code></pre> <p>A LinesToken type guard.</p>"},{"location":"api/tokens/#liquid2.token.is_output_token","title":"liquid2.token.is_output_token","text":"<pre><code>is_output_token(token: TokenT) -&gt; TypeGuard[OutputToken]\n</code></pre> <p>An OutputToken type guard.</p>"},{"location":"api/tokens/#liquid2.token.is_path_token","title":"liquid2.token.is_path_token","text":"<pre><code>is_path_token(token: TokenT) -&gt; TypeGuard[PathToken]\n</code></pre> <p>A PathToken type guard.</p>"},{"location":"api/tokens/#liquid2.token.is_range_token","title":"liquid2.token.is_range_token","text":"<pre><code>is_range_token(token: TokenT) -&gt; TypeGuard[RangeToken]\n</code></pre> <p>A RangeToken type guard.</p>"},{"location":"api/tokens/#liquid2.token.is_raw_token","title":"liquid2.token.is_raw_token","text":"<pre><code>is_raw_token(token: TokenT) -&gt; TypeGuard[RawToken]\n</code></pre> <p>A RawToken type guard.</p>"},{"location":"api/tokens/#liquid2.token.is_tag_token","title":"liquid2.token.is_tag_token","text":"<pre><code>is_tag_token(token: TokenT) -&gt; TypeGuard[TagToken]\n</code></pre> <p>A TagToken type guard.</p>"},{"location":"api/tokens/#liquid2.token.is_token_type","title":"liquid2.token.is_token_type","text":"<pre><code>is_token_type(\n    token: TokenT, t: TokenType\n) -&gt; TypeGuard[Token]\n</code></pre> <p>A Token type guard.</p>"},{"location":"api/tokens/#liquid2.TokenStream","title":"liquid2.TokenStream","text":"<p>Step through a stream of tokens.</p>"},{"location":"api/tokens/#liquid2.TokenStream.current","title":"current","text":"<pre><code>current() -&gt; TokenT\n</code></pre> <p>Return the item at self[0] without advancing the iterator.</p>"},{"location":"api/tokens/#liquid2.TokenStream.expect","title":"expect","text":"<pre><code>expect(typ: TokenType) -&gt; None\n</code></pre> <p>Raise a LiquidSyntaxError if the current token type doesn't match typ.</p>"},{"location":"api/tokens/#liquid2.TokenStream.expect_eos","title":"expect_eos","text":"<pre><code>expect_eos() -&gt; None\n</code></pre> <p>Raise a syntax error if we're not at the end of the stream.</p>"},{"location":"api/tokens/#liquid2.TokenStream.expect_one_of","title":"expect_one_of","text":"<pre><code>expect_one_of(*types: TokenType) -&gt; None\n</code></pre> <p>Raise a LiquidSyntaxError if the current token type is not in types.</p>"},{"location":"api/tokens/#liquid2.TokenStream.expect_tag","title":"expect_tag","text":"<pre><code>expect_tag(tag_name: str) -&gt; None\n</code></pre> <p>Raise a syntax error if the current token is not a tag with tag_name.</p>"},{"location":"api/tokens/#liquid2.TokenStream.into_inner","title":"into_inner","text":"<pre><code>into_inner() -&gt; TokenStream\n</code></pre> <p>Return a new stream over the current token's expression, consuming the token.</p> RAISES DESCRIPTION <code>LiquidSyntaxError</code> <p>if the current token is not a tag</p>"},{"location":"api/tokens/#liquid2.TokenStream.is_tag","title":"is_tag","text":"<pre><code>is_tag(tag_name: str) -&gt; bool\n</code></pre> <p>Return True if the current token is a tag named tag_name.</p>"},{"location":"api/tokens/#liquid2.TokenStream.next","title":"next","text":"<pre><code>next() -&gt; TokenT\n</code></pre> <p>Return the next token and advance the iterator.</p>"},{"location":"api/tokens/#liquid2.TokenStream.peek","title":"peek","text":"<pre><code>peek() -&gt; TokenT\n</code></pre> <p>Return the item at self[1] without advancing the iterator.</p>"},{"location":"api/undefined/","title":"Undefined","text":""},{"location":"api/undefined/#liquid2.undefined.Undefined","title":"liquid2.undefined.Undefined","text":"<p>               Bases: <code>Mapping[Any, object]</code></p> <p>The default undefined type.</p> <p>Always evaluates to an empty string. Can be iterated over and indexed without error.</p>"},{"location":"api/undefined/#liquid2.undefined.Undefined.poke","title":"poke","text":"<pre><code>poke() -&gt; bool\n</code></pre> <p>Prod the type, giving it the opertunity to raise an exception.</p>"},{"location":"api/undefined/#liquid2.undefined.StrictUndefined","title":"liquid2.undefined.StrictUndefined","text":"<p>               Bases: <code>Undefined</code></p> <p>An undefined that raises an exception for everything other than <code>repr</code>.</p>"},{"location":"api/undefined/#liquid2.undefined.FalsyStrictUndefined","title":"liquid2.undefined.FalsyStrictUndefined","text":"<p>               Bases: <code>StrictUndefined</code></p> <p>An strict undefined type that can be tested for truthiness.</p>"},{"location":"api/undefined/#liquid2.undefined.DebugUndefined","title":"liquid2.undefined.DebugUndefined","text":"<p>               Bases: <code>Undefined</code></p> <p>An undefined that returns debug information when rendered.</p>"},{"location":"api/whitespace_control/","title":"WhitespaceControl","text":""},{"location":"api/whitespace_control/#liquid2.WhitespaceControl","title":"liquid2.WhitespaceControl","text":"<p>               Bases: <code>Enum</code></p>"},{"location":"api/whitespace_control/#liquid2.WhitespaceControl.DEFAULT","title":"DEFAULT  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>DEFAULT = auto()\n</code></pre> <p>Use the environment's <code>default_trim</code> setting.</p>"},{"location":"api/whitespace_control/#liquid2.WhitespaceControl.MINUS","title":"MINUS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MINUS = auto()\n</code></pre> <p>Trim all whitespace.</p>"},{"location":"api/whitespace_control/#liquid2.WhitespaceControl.PLUS","title":"PLUS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>PLUS = auto()\n</code></pre> <p>Preserve all whitespace.</p>"},{"location":"api/whitespace_control/#liquid2.WhitespaceControl.TILDE","title":"TILDE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>TILDE = auto()\n</code></pre> <p>Trim immediate carriage return and newline characters only.</p>"}]}